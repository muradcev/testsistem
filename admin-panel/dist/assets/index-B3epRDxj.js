import{a as zs,c as Ls,j as e,u as q,b as Be,d as Y,Q as Ds,e as Ts}from"./data-vendor-bMWk81w7.js";import{a as $s,r,u as Ht,N as Rs,O as Bs,L as ne,b as xs,d as Os,e as re,f as us,R as Ks,B as qs}from"./react-vendor-Ce4Q8di-.js";import{c as Ge,R as ie,A as Lt,C as ge,X as ye,Y as pe,T as de,a as Dt,P as et,b as tt,d as st,L as We,B as rt,e as Ue,f as Ps,g as Et,h as Qt}from"./chart-vendor-Dj6iC5dy.js";import{b as At,a as Qe,c as Je,d as Hs,f as Is}from"./date-vendor-BuBvEUuc.js";import{L as me,M as Ze,T as Ve,a as Le,P as oe,b as yt,C as ft,c as hs,u as It}from"./map-vendor-BP9Wsh33.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function a(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=a(i);fetch(i.href,l)}})();var Tt={},Jt=$s;Tt.createRoot=Jt.createRoot,Tt.hydrateRoot=Jt.hydrateRoot;let Gs={data:""},Ws=t=>{if(typeof window=="object"){let s=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return s.nonce=window.__nonce__,s.parentNode||(t||document.head).appendChild(s),s.firstChild}return t||Gs},Ys=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Us=/\/\*[^]*?\*\/|  +/g,Xt=/\n+/g,Ae=(t,s)=>{let a="",n="",i="";for(let l in t){let m=t[l];l[0]=="@"?l[1]=="i"?a=l+" "+m+";":n+=l[1]=="f"?Ae(m,l):l+"{"+Ae(m,l[1]=="k"?"":s)+"}":typeof m=="object"?n+=Ae(m,s?s.replace(/([^,])+/g,o=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,x=>/&/.test(x)?x.replace(/&/g,o):o?o+" "+x:x)):l):m!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ae.p?Ae.p(l,m):l+":"+m+";")}return a+(s&&i?s+"{"+i+"}":i)+n},_e={},ps=t=>{if(typeof t=="object"){let s="";for(let a in t)s+=a+ps(t[a]);return s}return t},Zs=(t,s,a,n,i)=>{let l=ps(t),m=_e[l]||(_e[l]=(x=>{let p=0,y=11;for(;p<x.length;)y=101*y+x.charCodeAt(p++)>>>0;return"go"+y})(l));if(!_e[m]){let x=l!==t?t:(p=>{let y,v,E=[{}];for(;y=Ys.exec(p.replace(Us,""));)y[4]?E.shift():y[3]?(v=y[3].replace(Xt," ").trim(),E.unshift(E[0][v]=E[0][v]||{})):E[0][y[1]]=y[2].replace(Xt," ").trim();return E[0]})(t);_e[m]=Ae(i?{["@keyframes "+m]:x}:x,a?"":"."+m)}let o=a&&_e.g?_e.g:null;return a&&(_e.g=_e[m]),((x,p,y,v)=>{v?p.data=p.data.replace(v,x):p.data.indexOf(x)===-1&&(p.data=y?x+p.data:p.data+x)})(_e[m],s,n,o),m},Vs=(t,s,a)=>t.reduce((n,i,l)=>{let m=s[l];if(m&&m.call){let o=m(a),x=o&&o.props&&o.props.className||/^go/.test(o)&&o;m=x?"."+x:o&&typeof o=="object"?o.props?"":Ae(o,""):o===!1?"":o}return n+i+(m??"")},"");function St(t){let s=this||{},a=t.call?t(s.p):t;return Zs(a.unshift?a.raw?Vs(a,[].slice.call(arguments,1),s.p):a.reduce((n,i)=>Object.assign(n,i&&i.call?i(s.p):i),{}):a,Ws(s.target),s.g,s.o,s.k)}let gs,$t,Rt;St.bind({g:1});let Ce=St.bind({k:1});function Qs(t,s,a,n){Ae.p=s,gs=t,$t=a,Rt=n}function Te(t,s){let a=this||{};return function(){let n=arguments;function i(l,m){let o=Object.assign({},l),x=o.className||i.className;a.p=Object.assign({theme:$t&&$t()},o),a.o=/ *go\d+/.test(x),o.className=St.apply(a,n)+(x?" "+x:"");let p=t;return t[0]&&(p=o.as||t,delete o.as),Rt&&p[0]&&Rt(o),gs(p,o)}return i}}var Js=t=>typeof t=="function",bt=(t,s)=>Js(t)?t(s):t,Xs=(()=>{let t=0;return()=>(++t).toString()})(),ys=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),ea=20,Gt="default",fs=(t,s)=>{let{toastLimit:a}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,a)};case 1:return{...t,toasts:t.toasts.map(m=>m.id===s.toast.id?{...m,...s.toast}:m)};case 2:let{toast:n}=s;return fs(t,{type:t.toasts.find(m=>m.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=s;return{...t,toasts:t.toasts.map(m=>m.id===i||i===void 0?{...m,dismissed:!0,visible:!1}:m)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(m=>m.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let l=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(m=>({...m,pauseDuration:m.pauseDuration+l}))}}},pt=[],bs={toasts:[],pausedAt:void 0,settings:{toastLimit:ea}},Ne={},js=(t,s=Gt)=>{Ne[s]=fs(Ne[s]||bs,t),pt.forEach(([a,n])=>{a===s&&n(Ne[s])})},vs=t=>Object.keys(Ne).forEach(s=>js(t,s)),ta=t=>Object.keys(Ne).find(s=>Ne[s].toasts.some(a=>a.id===t)),Ct=(t=Gt)=>s=>{js(s,t)},sa={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},aa=(t={},s=Gt)=>{let[a,n]=r.useState(Ne[s]||bs),i=r.useRef(Ne[s]);r.useEffect(()=>(i.current!==Ne[s]&&n(Ne[s]),pt.push([s,n]),()=>{let m=pt.findIndex(([o])=>o===s);m>-1&&pt.splice(m,1)}),[s]);let l=a.toasts.map(m=>{var o,x,p;return{...t,...t[m.type],...m,removeDelay:m.removeDelay||((o=t[m.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:m.duration||((x=t[m.type])==null?void 0:x.duration)||(t==null?void 0:t.duration)||sa[m.type],style:{...t.style,...(p=t[m.type])==null?void 0:p.style,...m.style}}});return{...a,toasts:l}},ra=(t,s="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||Xs()}),it=t=>(s,a)=>{let n=ra(s,t,a);return Ct(n.toasterId||ta(n.id))({type:2,toast:n}),n.id},te=(t,s)=>it("blank")(t,s);te.error=it("error");te.success=it("success");te.loading=it("loading");te.custom=it("custom");te.dismiss=(t,s)=>{let a={type:3,toastId:t};s?Ct(s)(a):vs(a)};te.dismissAll=t=>te.dismiss(void 0,t);te.remove=(t,s)=>{let a={type:4,toastId:t};s?Ct(s)(a):vs(a)};te.removeAll=t=>te.remove(void 0,t);te.promise=(t,s,a)=>{let n=te.loading(s.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let l=s.success?bt(s.success,i):void 0;return l?te.success(l,{id:n,...a,...a==null?void 0:a.success}):te.dismiss(n),i}).catch(i=>{let l=s.error?bt(s.error,i):void 0;l?te.error(l,{id:n,...a,...a==null?void 0:a.error}):te.dismiss(n)}),t};var na=1e3,la=(t,s="default")=>{let{toasts:a,pausedAt:n}=aa(t,s),i=r.useRef(new Map).current,l=r.useCallback((v,E=na)=>{if(i.has(v))return;let u=setTimeout(()=>{i.delete(v),m({type:4,toastId:v})},E);i.set(v,u)},[]);r.useEffect(()=>{if(n)return;let v=Date.now(),E=a.map(u=>{if(u.duration===1/0)return;let N=(u.duration||0)+u.pauseDuration-(v-u.createdAt);if(N<0){u.visible&&te.dismiss(u.id);return}return setTimeout(()=>te.dismiss(u.id,s),N)});return()=>{E.forEach(u=>u&&clearTimeout(u))}},[a,n,s]);let m=r.useCallback(Ct(s),[s]),o=r.useCallback(()=>{m({type:5,time:Date.now()})},[m]),x=r.useCallback((v,E)=>{m({type:1,toast:{id:v,height:E}})},[m]),p=r.useCallback(()=>{n&&m({type:6,time:Date.now()})},[n,m]),y=r.useCallback((v,E)=>{let{reverseOrder:u=!1,gutter:N=8,defaultPosition:b}=E||{},k=a.filter(z=>(z.position||b)===(v.position||b)&&z.height),c=k.findIndex(z=>z.id===v.id),f=k.filter((z,T)=>T<c&&z.visible).length;return k.filter(z=>z.visible).slice(...u?[f+1]:[0,f]).reduce((z,T)=>z+(T.height||0)+N,0)},[a]);return r.useEffect(()=>{a.forEach(v=>{if(v.dismissed)l(v.id,v.removeDelay);else{let E=i.get(v.id);E&&(clearTimeout(E),i.delete(v.id))}})},[a,l]),{toasts:a,handlers:{updateHeight:x,startPause:o,endPause:p,calculateOffset:y}}},ia=Ce`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,da=Ce`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oa=Ce`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ca=Te("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ia} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${da} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${oa} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ma=Ce`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,xa=Te("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${ma} 1s linear infinite;
`,ua=Ce`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ha=Ce`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,pa=Te("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ua} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ha} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ga=Te("div")`
  position: absolute;
`,ya=Te("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,fa=Ce`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ba=Te("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${fa} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ja=({toast:t})=>{let{icon:s,type:a,iconTheme:n}=t;return s!==void 0?typeof s=="string"?r.createElement(ba,null,s):s:a==="blank"?null:r.createElement(ya,null,r.createElement(xa,{...n}),a!=="loading"&&r.createElement(ga,null,a==="error"?r.createElement(ca,{...n}):r.createElement(pa,{...n})))},va=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Na=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,wa="0%{opacity:0;} 100%{opacity:1;}",ka="0%{opacity:1;} 100%{opacity:0;}",_a=Te("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Sa=Te("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ca=(t,s)=>{let a=t.includes("top")?1:-1,[n,i]=ys()?[wa,ka]:[va(a),Na(a)];return{animation:s?`${Ce(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ce(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Ma=r.memo(({toast:t,position:s,style:a,children:n})=>{let i=t.height?Ca(t.position||s||"top-center",t.visible):{opacity:0},l=r.createElement(ja,{toast:t}),m=r.createElement(Sa,{...t.ariaProps},bt(t.message,t));return r.createElement(_a,{className:t.className,style:{...i,...a,...t.style}},typeof n=="function"?n({icon:l,message:m}):r.createElement(r.Fragment,null,l,m))});Qs(r.createElement);var Ea=({id:t,className:s,style:a,onHeightUpdate:n,children:i})=>{let l=r.useCallback(m=>{if(m){let o=()=>{let x=m.getBoundingClientRect().height;n(t,x)};o(),new MutationObserver(o).observe(m,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return r.createElement("div",{ref:l,className:s,style:a},i)},Aa=(t,s)=>{let a=t.includes("top"),n=a?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ys()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(a?1:-1)}px)`,...n,...i}},Fa=St`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ct=16,za=({reverseOrder:t,position:s="top-center",toastOptions:a,gutter:n,children:i,toasterId:l,containerStyle:m,containerClassName:o})=>{let{toasts:x,handlers:p}=la(a,l);return r.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:ct,left:ct,right:ct,bottom:ct,pointerEvents:"none",...m},className:o,onMouseEnter:p.startPause,onMouseLeave:p.endPause},x.map(y=>{let v=y.position||s,E=p.calculateOffset(y,{reverseOrder:t,gutter:n,defaultPosition:s}),u=Aa(v,E);return r.createElement(Ea,{id:y.id,key:y.id,onHeightUpdate:p.updateHeight,className:y.visible?Fa:"",style:u},y.type==="custom"?bt(y.message,y):i?i(y):r.createElement(Ma,{toast:y,position:v}))}))},L=te;const La={};function Da(t,s){let a;try{a=t()}catch{return}return{getItem:i=>{var l;const m=x=>x===null?null:JSON.parse(x,void 0),o=(l=a.getItem(i))!=null?l:null;return o instanceof Promise?o.then(m):m(o)},setItem:(i,l)=>a.setItem(i,JSON.stringify(l,void 0)),removeItem:i=>a.removeItem(i)}}const nt=t=>s=>{try{const a=t(s);return a instanceof Promise?a:{then(n){return nt(n)(a)},catch(n){return this}}}catch(a){return{then(n){return this},catch(n){return nt(n)(a)}}}},Ta=(t,s)=>(a,n,i)=>{let l={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:k=>k,version:0,merge:(k,c)=>({...c,...k}),...s},m=!1;const o=new Set,x=new Set;let p;try{p=l.getStorage()}catch{}if(!p)return t((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),a(...k)},n,i);const y=nt(l.serialize),v=()=>{const k=l.partialize({...n()});let c;const f=y({state:k,version:l.version}).then(z=>p.setItem(l.name,z)).catch(z=>{c=z});if(c)throw c;return f},E=i.setState;i.setState=(k,c)=>{E(k,c),v()};const u=t((...k)=>{a(...k),v()},n,i);let N;const b=()=>{var k;if(!p)return;m=!1,o.forEach(f=>f(n()));const c=((k=l.onRehydrateStorage)==null?void 0:k.call(l,n()))||void 0;return nt(p.getItem.bind(p))(l.name).then(f=>{if(f)return l.deserialize(f)}).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==l.version){if(l.migrate)return l.migrate(f.state,f.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return f.state}).then(f=>{var z;return N=l.merge(f,(z=n())!=null?z:u),a(N,!0),v()}).then(()=>{c==null||c(N,void 0),m=!0,x.forEach(f=>f(N))}).catch(f=>{c==null||c(void 0,f)})};return i.persist={setOptions:k=>{l={...l,...k},k.getStorage&&(p=k.getStorage())},clearStorage:()=>{p==null||p.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>b(),hasHydrated:()=>m,onHydrate:k=>(o.add(k),()=>{o.delete(k)}),onFinishHydration:k=>(x.add(k),()=>{x.delete(k)})},b(),N||u},$a=(t,s)=>(a,n,i)=>{let l={storage:Da(()=>localStorage),partialize:b=>b,version:0,merge:(b,k)=>({...k,...b}),...s},m=!1;const o=new Set,x=new Set;let p=l.storage;if(!p)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),a(...b)},n,i);const y=()=>{const b=l.partialize({...n()});return p.setItem(l.name,{state:b,version:l.version})},v=i.setState;i.setState=(b,k)=>{v(b,k),y()};const E=t((...b)=>{a(...b),y()},n,i);i.getInitialState=()=>E;let u;const N=()=>{var b,k;if(!p)return;m=!1,o.forEach(f=>{var z;return f((z=n())!=null?z:E)});const c=((k=l.onRehydrateStorage)==null?void 0:k.call(l,(b=n())!=null?b:E))||void 0;return nt(p.getItem.bind(p))(l.name).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==l.version){if(l.migrate)return[!0,l.migrate(f.state,f.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,f.state];return[!1,void 0]}).then(f=>{var z;const[T,A]=f;if(u=l.merge(A,(z=n())!=null?z:E),a(u,!0),T)return y()}).then(()=>{c==null||c(u,void 0),u=n(),m=!0,x.forEach(f=>f(u))}).catch(f=>{c==null||c(void 0,f)})};return i.persist={setOptions:b=>{l={...l,...b},b.storage&&(p=b.storage)},clearStorage:()=>{p==null||p.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>N(),hasHydrated:()=>m,onHydrate:b=>(o.add(b),()=>{o.delete(b)}),onFinishHydration:b=>(x.add(b),()=>{x.delete(b)})},l.skipHydration||N(),u||E},Ra=(t,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((La?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ta(t,s)):$a(t,s),Ba=Ra,Oa="/api/v1",C=zs.create({baseURL:Oa,headers:{"Content-Type":"application/json"}});C.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(window.location.href="/login"),Promise.reject(t)});const Bt={getStats:()=>C.get("/admin/dashboard"),getAppStats:()=>C.get("/admin/app-stats"),getWeeklyStats:()=>C.get("/admin/dashboard/weekly"),getRecentActivities:()=>C.get("/admin/dashboard/activities"),getSystemStatus:()=>C.get("/admin/dashboard/system-status"),getPendingSummary:()=>C.get("/admin/dashboard/pending"),getLocationStats:()=>C.get("/admin/dashboard/location-stats")},ve={getAll:t=>C.get("/admin/drivers",{params:t}),getById:t=>C.get(`/admin/drivers/${t}`),getLocations:(t,s)=>C.get(`/admin/drivers/${t}/locations`,{params:s}),getTrips:(t,s)=>C.get(`/admin/drivers/${t}/trips`,{params:s}),getStops:t=>C.get(`/admin/drivers/${t}/stops`),updateStatus:(t,s)=>C.put(`/admin/drivers/${t}/status`,{is_active:s}),updateFeatures:(t,s)=>C.put(`/admin/drivers/${t}/features`,s),delete:t=>C.delete(`/admin/drivers/${t}`)},Wt={getLive:()=>C.get("/admin/locations/live")},Xe={getAll:()=>C.get("/admin/surveys"),create:t=>C.post("/admin/surveys",t),update:(t,s)=>C.put(`/admin/surveys/${t}`,s),delete:t=>C.delete(`/admin/surveys/${t}`),getResponses:t=>C.get(`/admin/surveys/${t}/responses`)},es={getAll:()=>C.get("/admin/settings"),update:t=>C.put("/admin/settings",{settings:t})},Ns={send:t=>C.post("/admin/notifications/send",t),broadcast:t=>C.post("/admin/notifications/broadcast",t)},ts={getRoutes:t=>C.get("/admin/reports/routes",{params:t}),getStops:t=>C.get("/admin/reports/stops",{params:t})},xe={create:t=>C.post("/admin/questions",t),createBulk:t=>C.post("/admin/questions/bulk",t),createBulkFiltered:t=>C.post("/admin/questions/bulk-filtered",t),getById:t=>C.get(`/admin/questions/${t}`),update:(t,s)=>C.put(`/admin/questions/${t}`,s),delete:t=>C.delete(`/admin/questions/${t}`),getPendingApproval:()=>C.get("/admin/questions/pending-approval"),approve:(t,s,a)=>C.post(`/admin/questions/${t}/approve`,{approved:s,rejection_reason:a}),send:t=>C.post(`/admin/questions/${t}/send`),getDriverQuestions:(t,s)=>C.get(`/admin/drivers/${t}/questions`,{params:{status:s}}),getDriverContext:t=>C.get(`/admin/drivers/${t}/context`),getStats:()=>C.get("/admin/questions/stats"),getDriversOnTrip:()=>C.get("/admin/questions/drivers-on-trip"),getIdleDrivers:()=>C.get("/admin/questions/idle-drivers")},jt={getAll:t=>C.get("/admin/notification-templates",{params:{active:t}}),getById:t=>C.get(`/admin/notification-templates/${t}`),create:t=>C.post("/admin/notification-templates",t),update:(t,s)=>C.put(`/admin/notification-templates/${t}`,s),delete:t=>C.delete(`/admin/notification-templates/${t}`)},Ka={getAll:()=>C.get("/admin/trigger-types")},Fe={getAll:t=>C.get("/admin/driver-homes",{params:t}),getByDriver:t=>C.get(`/admin/drivers/${t}/homes`),create:(t,s)=>C.post(`/admin/drivers/${t}/homes`,s),update:(t,s)=>C.put(`/admin/driver-homes/${t}`,s),delete:t=>C.delete(`/admin/driver-homes/${t}`)},qa={getAll:t=>C.get("/admin/stops",{params:t}),getUncategorized:t=>C.get("/admin/stops/uncategorized",{params:t}),updateType:(t,s)=>C.put(`/admin/stops/${t}`,{location_type:s}),getLocationTypes:()=>C.get("/admin/stops/location-types"),detectForDriver:(t,s)=>C.post(`/admin/stops/detect/${t}`,null,{params:s}),detectAll:t=>C.post("/admin/stops/detect-all",null,{params:t})},dt=Ls()(Ba(t=>({user:null,token:null,isAuthenticated:!1,login:async(s,a)=>{const n=await C.post("/admin/auth/login",{email:s,password:a}),{admin:i,auth:l}=n.data;C.defaults.headers.common.Authorization=`Bearer ${l.access_token}`,t({user:i,token:l.access_token,isAuthenticated:!0})},logout:()=>{delete C.defaults.headers.common.Authorization,t({user:null,token:null,isAuthenticated:!1})}}),{name:"auth-storage",partialize:t=>({user:t.user,token:t.token,isAuthenticated:t.isAuthenticated})})),ss=dt.getState().token;ss&&(C.defaults.headers.common.Authorization=`Bearer ${ss}`);function Pa({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const Ha=r.forwardRef(Pa);function Ia({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Yt=r.forwardRef(Ia);function Ga({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const ws=r.forwardRef(Ga);function Wa({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const ks=r.forwardRef(Wa);function Ya({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Ua=r.forwardRef(Ya);function Za({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const as=r.forwardRef(Za);function Va({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const rs=r.forwardRef(Va);function Qa({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const vt=r.forwardRef(Qa);function Ja({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const at=r.forwardRef(Ja);function Xa({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const er=r.forwardRef(Xa);function tr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"}))}const _s=r.forwardRef(tr);function sr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Ut=r.forwardRef(sr);function ar({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12.75c1.148 0 2.278.08 3.383.237 1.037.146 1.866.966 1.866 2.013 0 3.728-2.35 6.75-5.25 6.75S6.75 18.728 6.75 15c0-1.046.83-1.867 1.866-2.013A24.204 24.204 0 0 1 12 12.75Zm0 0c2.883 0 5.647.508 8.207 1.44a23.91 23.91 0 0 1-1.152 6.06M12 12.75c-2.883 0-5.647.508-8.208 1.44.125 2.104.52 4.136 1.153 6.06M12 12.75a2.25 2.25 0 0 0 2.248-2.354M12 12.75a2.25 2.25 0 0 1-2.248-2.354M12 8.25c.995 0 1.971-.08 2.922-.236.403-.066.74-.358.795-.762a3.778 3.778 0 0 0-.399-2.25M12 8.25c-.995 0-1.97-.08-2.922-.236-.402-.066-.74-.358-.795-.762a3.734 3.734 0 0 1 .4-2.253M12 8.25a2.25 2.25 0 0 0-2.248 2.146M12 8.25a2.25 2.25 0 0 1 2.248 2.146M8.683 5a6.032 6.032 0 0 1-1.155-1.002c.07-.63.27-1.222.574-1.747m.581 2.749A3.75 3.75 0 0 1 15.318 5m0 0c.427-.283.815-.62 1.155-.999a4.471 4.471 0 0 0-.575-1.752M4.921 6a24.048 24.048 0 0 0-.392 3.314c1.668.546 3.416.914 5.223 1.082M19.08 6c.205 1.08.337 2.187.392 3.314a23.882 23.882 0 0 1-5.223 1.082"}))}const Ie=r.forwardRef(ar);function rr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Zt=r.forwardRef(rr);function nr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const ue=r.forwardRef(nr);function lr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const ns=r.forwardRef(lr);function ir({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Nt=r.forwardRef(ir);function dr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const or=r.forwardRef(dr);function cr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const mr=r.forwardRef(cr);function xr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const ur=r.forwardRef(xr);function hr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const pr=r.forwardRef(hr);function gr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ce=r.forwardRef(gr);function yr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Vt=r.forwardRef(yr);function fr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const br=r.forwardRef(fr);function jr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ft=r.forwardRef(jr);function vr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const Se=r.forwardRef(vr);function Nr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Ot=r.forwardRef(Nr);function wr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const ls=r.forwardRef(wr);function kr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Kt=r.forwardRef(kr);function _r({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Ss=r.forwardRef(_r);function Sr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const wt=r.forwardRef(Sr);function Cr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const Cs=r.forwardRef(Cr);function Mr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const Er=r.forwardRef(Mr);function Ar({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const ze=r.forwardRef(Ar);function Fr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Ms=r.forwardRef(Fr);function zr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const se=r.forwardRef(zr);function Lr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const qt=r.forwardRef(Lr);function Dr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const Mt=r.forwardRef(Dr);function Tr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const fe=r.forwardRef(Tr);function $r({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const Es=r.forwardRef($r);function Rr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const De=r.forwardRef(Rr);function Br({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const Or=r.forwardRef(Br);function Kr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const kt=r.forwardRef(Kr);function qr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const gt=r.forwardRef(qr);function Pr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Hr=r.forwardRef(Pr);function Ir({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const Gr=r.forwardRef(Ir);function Wr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}const Yr=r.forwardRef(Wr);function Ur({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Zr=r.forwardRef(Ur);function Vr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const be=r.forwardRef(Vr);function Qr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const ee=r.forwardRef(Qr);function Jr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const we=r.forwardRef(Jr);function Xr({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const en=r.forwardRef(Xr);function tn({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const As=r.forwardRef(tn);function sn({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const an=r.forwardRef(sn);function rn({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const nn=r.forwardRef(rn);function ln({title:t,titleId:s,...a},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Ye=r.forwardRef(ln),dn=[{name:"Dashboard",href:"/dashboard",icon:ze},{name:"ofrler",href:"/drivers",icon:we},{name:"Canl Harita",href:"/live-map",icon:qt},{name:"Is Haritas",href:"/heat-map",icon:wt},{name:"Durak Ynetimi",href:"/stops",icon:se},{name:"Analitik",href:"/analytics",icon:ue},{name:"Raporlar",href:"/reports",icon:Ot},{name:"Hata Takip",href:"/error-monitoring",icon:Ie},{name:"Anketler",href:"/surveys",icon:pr},{name:"Akll Sorular",href:"/questions",icon:kt},{name:"Bildirim ablonlar",href:"/notification-templates",icon:_s},{name:"Uygulama Ayarlar",href:"/app-config",icon:Ha},{name:"Sistem Ayarlar",href:"/settings",icon:Vt}];function on(){var o;const{user:t,logout:s}=dt(),a=Ht(),[n,i]=r.useState(!1),l=()=>{s(),a("/login")},m=()=>i(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-white shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between h-14 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-7 w-7 text-primary-600"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"TestSistem"})]}),e.jsx("button",{onClick:()=>i(!0),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100",children:e.jsx(er,{className:"h-6 w-6"})})]})}),n&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black/50",onClick:m}),e.jsxs("div",{className:Ge("fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out","lg:translate-x-0",n?"translate-x-0":"-translate-x-full"),children:[e.jsxs("div",{className:"flex h-16 items-center justify-between px-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-8 w-8 text-primary-600"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"TestSistem"})]}),e.jsx("button",{onClick:m,className:"lg:hidden p-1 rounded-lg text-gray-600 hover:bg-gray-100",children:e.jsx(Ye,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"mt-6 px-3 overflow-y-auto",style:{maxHeight:"calc(100vh - 180px)"},children:dn.map(x=>e.jsxs(Rs,{to:x.href,onClick:m,className:({isActive:p})=>Ge("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium mb-1",p?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:[e.jsx(x.icon,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:x.name})]},x.name))}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-primary-700 font-medium",children:(o=t==null?void 0:t.name)==null?void 0:o.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t==null?void 0:t.email})]})]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[e.jsx(Ua,{className:"h-5 w-5"}),"k Yap"]})]})]}),e.jsx("div",{className:"lg:pl-64",children:e.jsxs("main",{className:"p-4 lg:p-6 pt-18 lg:pt-6",children:[e.jsx("div",{className:"lg:hidden h-14"})," ",e.jsx(Bs,{})]})})]})}function cn(){const[t,s]=r.useState(""),[a,n]=r.useState(""),[i,l]=r.useState(!1),m=dt(p=>p.login),o=Ht(),x=async p=>{var y,v;p.preventDefault(),l(!0);try{await m(t,a),L.success("Giri baarl!"),o("/dashboard")}catch(E){L.error(((v=(y=E.response)==null?void 0:y.data)==null?void 0:v.error)||"Giri baarsz")}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ee,{className:"h-16 w-16 text-primary-600"})}),e.jsx("h2",{className:"mt-4 text-3xl font-bold text-gray-900",children:"TestSistem Admin"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Ynetim paneline giri yapn"})]}),e.jsx("form",{className:"mt-8 space-y-6",onSubmit:x,children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"E-posta"}),e.jsx("input",{id:"email",type:"email",required:!0,value:t,onChange:p=>s(p.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 px-4 py-2 border",placeholder:"E-posta adresinizi girin"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"ifre"}),e.jsx("input",{id:"password",type:"password",required:!0,value:a,onChange:p=>n(p.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 px-4 py-2 border",placeholder:"ifrenizi girin"})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:i?"Giri yaplyor...":"Giri Yap"})]})}),e.jsx("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"ofr Uygulamas"}),e.jsx("p",{className:"text-xs text-green-600",children:"Android APK ndir"})]}),e.jsxs("a",{href:"/downloads/nakliyeo-v1.0.0.apk",download:!0,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Yt,{className:"h-4 w-4"}),"APK ndir"]})]})})]})})}const mn={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},xn=(t,s,a)=>{let n;const i=mn[t];return typeof i=="string"?n=i:s===1?n=i.one:n=i.other.replace("{{count}}",s.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?n+" sonra":n+" nce":n},un={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},hn={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},pn={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gn={date:At({formats:un,defaultWidth:"full"}),time:At({formats:hn,defaultWidth:"full"}),dateTime:At({formats:pn,defaultWidth:"full"})},yn={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},fn=(t,s,a,n)=>yn[t],bn={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},jn={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},vn={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},Nn={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},wn={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},kn={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},_n=(t,s)=>Number(t)+".",Sn={ordinalNumber:_n,era:Qe({values:bn,defaultWidth:"wide"}),quarter:Qe({values:jn,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Qe({values:vn,defaultWidth:"wide"}),day:Qe({values:Nn,defaultWidth:"wide"}),dayPeriod:Qe({values:wn,defaultWidth:"wide",formattingValues:kn,defaultFormattingWidth:"wide"})},Cn=/^(\d+)(\.)?/i,Mn=/\d+/i,En={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},An={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},Fn={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},zn={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},Ln={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},Dn={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},Tn={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},$n={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},Rn={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},Bn={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},On={ordinalNumber:Hs({matchPattern:Cn,parsePattern:Mn,valueCallback:function(t){return parseInt(t,10)}}),era:Je({matchPatterns:En,defaultMatchWidth:"wide",parsePatterns:An,defaultParseWidth:"any"}),quarter:Je({matchPatterns:Fn,defaultMatchWidth:"wide",parsePatterns:zn,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Je({matchPatterns:Ln,defaultMatchWidth:"wide",parsePatterns:Dn,defaultParseWidth:"any"}),day:Je({matchPatterns:Tn,defaultMatchWidth:"wide",parsePatterns:$n,defaultParseWidth:"any"}),dayPeriod:Je({matchPatterns:Rn,defaultMatchWidth:"any",parsePatterns:Bn,defaultParseWidth:"any"})},Kn={code:"tr",formatDistance:xn,formatLong:gn,formatRelative:fn,localize:Sn,match:On,options:{weekStartsOn:1,firstWeekContainsDate:1}};function Ee({title:t,value:s,icon:a,color:n,bgColor:i,trend:l,trendLabel:m,href:o}){const x=e.jsx("div",{className:`bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-5 hover:shadow-md transition-shadow ${o?"cursor-pointer":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${i}`,children:e.jsx(a,{className:`h-5 w-5 sm:h-6 sm:w-6 ${n}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:t}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s})]})]}),l!==void 0&&e.jsxs("div",{className:`hidden sm:flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${l>=0?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[l>=0?e.jsx(at,{className:"h-3.5 w-3.5"}):e.jsx(vt,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[l>=0?"+":"",l,"%"]}),m&&e.jsx("span",{className:"text-gray-500 ml-1",children:m})]})]})});return o?e.jsx(ne,{to:o,children:x}):x}function mt({label:t,value:s,icon:a,color:n}){return e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-xl",children:[e.jsx(a,{className:`h-5 w-5 mx-auto mb-1 ${n}`}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:s}),e.jsx("div",{className:"text-xs text-gray-500",children:t})]})}function qn(){var c,f,z,T;const{data:t,isLoading:s}=q({queryKey:["dashboard"],queryFn:()=>Bt.getStats(),refetchInterval:3e4}),{data:a}=q({queryKey:["appStats"],queryFn:()=>Bt.getAppStats(),refetchInterval:6e4}),{data:n}=q({queryKey:["driversOnTrip"],queryFn:()=>xe.getDriversOnTrip(),refetchInterval:3e4}),{data:i}=q({queryKey:["liveLocations"],queryFn:()=>Wt.getLive(),refetchInterval:3e4}),{data:l}=q({queryKey:["stopsStats"],queryFn:()=>qa.getAll({limit:1e3})}),{data:m}=q({queryKey:["pendingQuestions"],queryFn:()=>xe.getPendingApproval()}),o=t==null?void 0:t.data,x=a==null?void 0:a.data,p=((c=i==null?void 0:i.data)==null?void 0:c.locations)||[],y=((f=l==null?void 0:l.data)==null?void 0:f.stops)||[],v=((z=m==null?void 0:m.data)==null?void 0:z.questions)||[],E=[{name:"Pzt",seferler:Math.floor(Math.random()*30)+30,mesafe:Math.floor(Math.random()*5e3)+1e4},{name:"Sal",seferler:Math.floor(Math.random()*30)+35,mesafe:Math.floor(Math.random()*5e3)+11e3},{name:"ar",seferler:Math.floor(Math.random()*30)+32,mesafe:Math.floor(Math.random()*5e3)+10500},{name:"Per",seferler:Math.floor(Math.random()*30)+40,mesafe:Math.floor(Math.random()*5e3)+13e3},{name:"Cum",seferler:Math.floor(Math.random()*30)+38,mesafe:Math.floor(Math.random()*5e3)+12e3},{name:"Cmt",seferler:Math.floor(Math.random()*20)+20,mesafe:Math.floor(Math.random()*4e3)+8e3},{name:"Paz",seferler:Math.floor(Math.random()*15)+15,mesafe:Math.floor(Math.random()*3e3)+6e3}],u=[{name:"Seferde",value:(o==null?void 0:o.drivers_on_trip)||0,color:"#3B82F6"},{name:"Evde",value:(o==null?void 0:o.drivers_at_home)||0,color:"#10B981"},{name:"Beklemede",value:Math.max(0,((o==null?void 0:o.active_drivers)||0)-((o==null?void 0:o.drivers_on_trip)||0)-((o==null?void 0:o.drivers_at_home)||0)),color:"#F59E0B"}].filter(A=>A.value>0),N=p.reduce((A,_)=>{const F=_.province||"Bilinmiyor";return A[F]=(A[F]||0)+1,A},{}),b=Object.entries(N).sort(([,A],[,_])=>_-A).slice(0,5).map(([A,_])=>({name:A,value:_})),k={locations:p.length>0,lastSync:new Date};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-3 text-gray-500",children:"Ykleniyor..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sistem genel grnm ve anlk durum"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-green-50 text-green-700",children:[e.jsx(gt,{className:"h-3.5 w-3.5"}),"API ","Aktif"]}),e.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium ${k.locations?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"}`,children:[e.jsx(Hr,{className:"h-3.5 w-3.5"}),p.length," Canl Konum"]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[e.jsx(ce,{className:"h-3.5 w-3.5"}),"Son gncelleme: ",Is(k.lastSync,{addSuffix:!0,locale:Kn})]})]})]}),v.length>0&&e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(_s,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-amber-800",children:[v.length," Onay Bekleyen Soru"]}),e.jsx("p",{className:"text-sm text-amber-600",children:"ofrlerden gelen sorular onaynz bekliyor"})]})]}),e.jsxs(ne,{to:"/questions",className:"flex items-center gap-1 px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors",children:["ncele",e.jsx(as,{className:"h-4 w-4"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ee,{title:"Toplam ofr",value:(o==null?void 0:o.total_drivers)||0,icon:we,color:"text-blue-600",bgColor:"bg-blue-50",href:"/drivers"}),e.jsx(Ee,{title:"Aktif ofr",value:(o==null?void 0:o.active_drivers)||0,icon:we,color:"text-green-600",bgColor:"bg-green-50",trend:12,trendLabel:"bu ay"}),e.jsx(Ee,{title:"Seferdeki ofr",value:(o==null?void 0:o.drivers_on_trip)||0,icon:ee,color:"text-orange-600",bgColor:"bg-orange-50",href:"/live-map"}),e.jsx(Ee,{title:"Evdeki ofr",value:(o==null?void 0:o.drivers_at_home)||0,icon:se,color:"text-purple-600",bgColor:"bg-purple-50"})]}),x&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Uygulama Durumu"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"Otomatik gncelleme: 1dk"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsx(mt,{label:"Uygulama Ykl",value:x.drivers_with_app,icon:Se,color:"text-primary-600"}),e.jsx(mt,{label:"Son 24 Saat Aktif",value:x.active_last_24h,icon:an,color:"text-green-600"}),e.jsx(mt,{label:"Son 7 Gn Aktif",value:x.active_last_7d,icon:ue,color:"text-blue-600"}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex justify-center gap-4 mb-1",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-gray-600",children:x.ios_count}),e.jsx("div",{className:"text-xs text-gray-400",children:"iOS"})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:x.android_count}),e.jsx("div",{className:"text-xs text-gray-400",children:"Android"})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Platform"})]}),e.jsx(mt,{label:"Arka Plan Konum",value:x.background_loc_count,icon:se,color:"text-purple-600"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ee,{title:"Bugnk Sefer",value:(o==null?void 0:o.today_trips)||0,icon:ee,color:"text-indigo-600",bgColor:"bg-indigo-50"}),e.jsx(Ee,{title:"Bugnk Mesafe",value:`${((o==null?void 0:o.today_distance_km)||0).toLocaleString()} km`,icon:se,color:"text-cyan-600",bgColor:"bg-cyan-50"}),e.jsx(Ee,{title:"Kaytl Durak",value:y.length,icon:se,color:"text-teal-600",bgColor:"bg-teal-50",href:"/stops"}),e.jsx(Ee,{title:"Anket Yant Oran",value:`%${((o==null?void 0:o.survey_response_rate)||0).toFixed(0)}`,icon:ur,color:"text-pink-600",bgColor:"bg-pink-50",href:"/surveys"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Haftalk Sefer Trendi"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Son 7 gn"})]}),e.jsx("div",{className:"h-64",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Lt,{data:E,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSeferler",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx(ye,{dataKey:"name",stroke:"#9CA3AF",tick:{fontSize:12}}),e.jsx(pe,{stroke:"#9CA3AF",tick:{fontSize:12}}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(Dt,{type:"monotone",dataKey:"seferler",stroke:"#3B82F6",strokeWidth:2,fillOpacity:1,fill:"url(#colorSeferler)",name:"Sefer Says"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ofr Durumlar"}),e.jsx(ne,{to:"/drivers",className:"text-xs text-primary-600 hover:text-primary-700",children:"Tmn Gr "})]}),e.jsx("div",{className:"h-64",children:u.length>0?e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(et,{children:[e.jsx(tt,{data:u,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:5,dataKey:"value",children:u.map((A,_)=>e.jsx(st,{fill:A.color},`cell-${_}`))}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(We,{verticalAlign:"bottom",formatter:(A,_)=>e.jsxs("span",{className:"text-sm text-gray-600",children:[A," (",_.payload.value,")"]})})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Veri yok"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Haftalk Mesafe (km)"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Toplam kat edilen"})]}),e.jsx("div",{className:"h-64",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(rt,{data:E,children:[e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx(ye,{dataKey:"name",stroke:"#9CA3AF",tick:{fontSize:12}}),e.jsx(pe,{stroke:"#9CA3AF",tick:{fontSize:12}}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:A=>[`${A.toLocaleString()} km`,"Mesafe"]}),e.jsx(Ue,{dataKey:"mesafe",fill:"#10B981",radius:[6,6,0,0],name:"Mesafe"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"l Baznda Konum Younluu"}),e.jsx(ne,{to:"/heat-map",className:"text-xs text-primary-600 hover:text-primary-700",children:"Is Haritas "})]}),e.jsx("div",{className:"h-64",children:b.length>0?e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(rt,{data:b,layout:"vertical",children:[e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",horizontal:!1}),e.jsx(ye,{type:"number",stroke:"#9CA3AF",tick:{fontSize:12}}),e.jsx(pe,{dataKey:"name",type:"category",stroke:"#9CA3AF",tick:{fontSize:11},width:80}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:A=>[`${A} konum`,"Younluk"]}),e.jsx(Ue,{dataKey:"value",fill:"#8B5CF6",radius:[0,6,6,0]})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Konum verisi bekleniyor..."})})]})]}),((T=n==null?void 0:n.data)==null?void 0:T.drivers)&&n.data.drivers.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Seferdeki ofrler"}),e.jsxs("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 text-xs font-medium rounded-full",children:[n.data.drivers.length," aktif"]})]}),e.jsxs(ne,{to:"/live-map",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:["Haritada Gr",e.jsx(as,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ofr"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balang"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sre"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mesafe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hz"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"lem"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:n.data.drivers.slice(0,5).map(A=>{var _;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:(_=A.name)==null?void 0:_.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[A.name," ",A.surname]}),e.jsx("p",{className:"text-xs text-gray-500",children:A.phone})]})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600",children:A.start_province||"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600",children:A.trip_duration_minutes?`${Math.floor(A.trip_duration_minutes/60)}sa ${Math.round(A.trip_duration_minutes%60)}dk`:"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.distance_km?`${A.distance_km.toFixed(0)} km`:"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${A.current_speed>80?"bg-red-100 text-red-700":A.current_speed>50?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:A.current_speed?`${A.current_speed.toFixed(0)} km/h`:"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:e.jsx(ne,{to:`/drivers/${A.driver_id}`,className:"text-primary-600 hover:text-primary-700",children:e.jsx(Ss,{className:"h-5 w-5"})})})]},A.driver_id)})})]}),n.data.drivers.length>5&&e.jsx("div",{className:"text-center py-3 border-t border-gray-100",children:e.jsxs(ne,{to:"/live-map",className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:["Tmn Gr (",n.data.drivers.length," ofr)"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(ne,{to:"/live-map",className:"flex items-center gap-3 p-4 bg-white border border-gray-100 rounded-xl hover:border-primary-200 hover:shadow-md transition-all group",children:[e.jsx("div",{className:"p-2.5 bg-primary-50 rounded-xl group-hover:bg-primary-100 transition-colors",children:e.jsx(se,{className:"h-5 w-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Canl Harita"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p.length," aktif konum"]})]})]}),e.jsxs(ne,{to:"/heat-map",className:"flex items-center gap-3 p-4 bg-white border border-gray-100 rounded-xl hover:border-orange-200 hover:shadow-md transition-all group",children:[e.jsx("div",{className:"p-2.5 bg-orange-50 rounded-xl group-hover:bg-orange-100 transition-colors",children:e.jsx(wt,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Is Haritas"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Younluk analizi"})]})]}),e.jsxs(ne,{to:"/questions",className:"flex items-center gap-3 p-4 bg-white border border-gray-100 rounded-xl hover:border-purple-200 hover:shadow-md transition-all group",children:[e.jsxs("div",{className:"p-2.5 bg-purple-50 rounded-xl group-hover:bg-purple-100 transition-colors relative",children:[e.jsx(kt,{className:"h-5 w-5 text-purple-600"}),v.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:v.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Akll Sorular"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[v.length," onay bekliyor"]})]})]}),e.jsxs(ne,{to:"/reports",className:"flex items-center gap-3 p-4 bg-white border border-gray-100 rounded-xl hover:border-green-200 hover:shadow-md transition-all group",children:[e.jsx("div",{className:"p-2.5 bg-green-50 rounded-xl group-hover:bg-green-100 transition-colors",children:e.jsx(ue,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Raporlar"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Detayl analizler"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 rounded-xl shadow-lg p-6 text-white overflow-hidden relative",children:[e.jsx("div",{className:"absolute right-0 top-0 opacity-10",children:e.jsx(Se,{className:"h-48 w-48 -mr-12 -mt-12"})}),e.jsx("div",{className:"relative z-10 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Mobil Uygulama"}),e.jsx("p",{className:"text-green-100 mb-4 text-sm",children:"ofrler iin Android uygulamasn indirin ve takibe balayn"}),e.jsxs("a",{href:"/downloads/nakliyeo-v1.0.0.apk",download:!0,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-white text-green-600 font-semibold rounded-lg hover:bg-green-50 transition-colors shadow-md",children:[e.jsx(Yt,{className:"h-5 w-5"}),"APK ndir (v1.0.0)"]})]})})]})]})}const is={active:"Aktif",inactive:"Pasif",on_trip:"Seferde",at_home:"Evde"},xt={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",on_trip:"bg-orange-100 text-orange-800",at_home:"bg-blue-100 text-blue-800"};function Pn(){var v,E;const[t,s]=r.useState(""),[a,n]=r.useState(0),i=20,{data:l,isLoading:m}=q({queryKey:["drivers",a,i],queryFn:()=>ve.getAll({limit:i,offset:a*i})}),o=((v=l==null?void 0:l.data)==null?void 0:v.drivers)||[],x=((E=l==null?void 0:l.data)==null?void 0:E.total)||0,p=Math.ceil(x/i),y=o.filter(u=>u.name.toLowerCase().includes(t.toLowerCase())||u.surname.toLowerCase().includes(t.toLowerCase())||u.phone.includes(t));return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"ofrler"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Toplam: ",x," ofr"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ad, soyad veya telefon ile ara...",value:t,onChange:u=>s(u.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500"})]})}),e.jsx("div",{className:"block lg:hidden space-y-3",children:y.map(u=>e.jsxs(ne,{to:`/drivers/${u.id}`,className:"block bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-primary-700 font-medium text-sm",children:[u.name.charAt(0),u.surname.charAt(0)]})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[u.name," ",u.surname]}),e.jsx("div",{className:"text-xs text-gray-500",children:u.phone})]})]}),e.jsx("span",{className:Ge("px-2 py-1 text-xs font-medium rounded-full",xt[u.status]||xt.inactive),children:is[u.status]||"Bilinmiyor"})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("div",{children:u.province&&u.district?`${u.province}, ${u.district}`:"-"}),u.has_app&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{className:Ge("h-4 w-4 mr-1",u.device_os==="ios"?"text-gray-600":"text-green-600")}),e.jsx("span",{children:u.device_os==="ios"?"iOS":"Android"})]})]})]},u.id))}),e.jsxs("div",{className:"hidden lg:block bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ofr"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Telefon"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Konum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uygulama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Son Aktif"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"lemler"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(u=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsxs("span",{className:"text-primary-700 font-medium",children:[u.name.charAt(0),u.surname.charAt(0)]})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[u.name," ",u.surname]}),e.jsx("div",{className:"text-sm text-gray-500",children:u.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.province&&u.district?`${u.province}, ${u.district}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.has_app?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{className:Ge("h-5 w-5 mr-1",u.device_os==="ios"?"text-gray-600":"text-green-600")}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-900",children:u.device_os==="ios"?"iOS":"Android"}),e.jsxs("div",{className:"text-gray-500",children:["v",u.app_version]})]})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"Ykl deil"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:Ge("px-2 py-1 text-xs font-medium rounded-full",xt[u.status]||xt.inactive),children:is[u.status]||"Bilinmiyor"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.last_active_at?new Date(u.last_active_at).toLocaleString("tr-TR"):u.last_location_at?new Date(u.last_location_at).toLocaleString("tr-TR"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(ne,{to:`/drivers/${u.id}`,className:"text-primary-600 hover:text-primary-900",children:"Detay"})})]},u.id))})]})}),y.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:"ofr bulunamad"})]}),y.length===0&&e.jsx("div",{className:"lg:hidden text-center py-12 text-gray-500 bg-white rounded-lg shadow",children:"ofr bulunamad"}),p>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 rounded-lg shadow",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>n(Math.max(0,a-1)),disabled:a===0,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"nceki"}),e.jsxs("span",{className:"flex items-center text-sm text-gray-500",children:[a+1," / ",p]}),e.jsx("button",{onClick:()=>n(Math.min(p-1,a+1)),disabled:a>=p-1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Sonraki"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:a*i+1})," - ",e.jsx("span",{className:"font-medium",children:Math.min((a+1)*i,x)})," / ",e.jsx("span",{className:"font-medium",children:x})," sonu"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>n(Math.max(0,a-1)),disabled:a===0,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:e.jsx(or,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>n(Math.min(p-1,a+1)),disabled:a>=p-1,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:e.jsx(mr,{className:"h-5 w-5"})})]})})]})]})]})}delete me.Icon.Default.prototype._getIconUrl;me.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Hn=me.divIcon({html:'<div style="font-size: 24px;"></div>',className:"custom-home-icon",iconSize:[30,30],iconAnchor:[15,15]});function In(){var je,Oe,Me,$e,Q;const{id:t}=xs(),s=Ht(),a=Be(),[n,i]=r.useState(""),[l,m]=r.useState(""),[o,x]=r.useState(!1),[p,y]=r.useState(!1),[v,E]=r.useState(null),[u,N]=r.useState(null),[b,k]=r.useState(!1),[c,f]=r.useState({name:"",latitude:0,longitude:0,province:"",district:"",radius:200}),{data:z,isLoading:T}=q({queryKey:["driver",t],queryFn:()=>ve.getById(t),enabled:!!t}),{data:A}=q({queryKey:["driver-locations",t],queryFn:()=>ve.getLocations(t),enabled:!!t}),{data:_}=q({queryKey:["driver-trips",t],queryFn:()=>ve.getTrips(t,{limit:10}),enabled:!!t}),{data:F}=q({queryKey:["driver-homes",t],queryFn:()=>Fe.getByDriver(t),enabled:!!t}),{data:R}=q({queryKey:["driver-stops",t],queryFn:()=>ve.getStops(t),enabled:!!t}),g=Y({mutationFn:j=>Fe.create(t,j),onSuccess:()=>{L.success("Ev adresi eklendi"),a.invalidateQueries({queryKey:["driver-homes",t]}),y(!1),N(null),f({name:"",latitude:0,longitude:0,province:"",district:"",radius:200})},onError:j=>{var W,h;L.error(((h=(W=j.response)==null?void 0:W.data)==null?void 0:h.error)||"Ev adresi eklenemedi")}}),w=Y({mutationFn:({homeId:j,data:W})=>Fe.update(j,W),onSuccess:()=>{L.success("Ev adresi gncellendi"),a.invalidateQueries({queryKey:["driver-homes",t]}),E(null)},onError:()=>{L.error("Gncelleme baarsz")}}),D=Y({mutationFn:j=>Fe.delete(j),onSuccess:()=>{L.success("Ev adresi silindi"),a.invalidateQueries({queryKey:["driver-homes",t]})},onError:()=>{L.error("Ev adresi silinemedi")}}),I=Y({mutationFn:j=>ve.updateStatus(t,j),onSuccess:(j,W)=>{L.success(W?"Src aktifletirildi":"Src pasifletirildi"),a.invalidateQueries({queryKey:["driver",t]})},onError:()=>{L.error("Durum gncellenemedi")}}),V=Y({mutationFn:()=>ve.delete(t),onSuccess:()=>{L.success("Src silindi"),s("/drivers")},onError:()=>{L.error("Src silinemedi")}}),U=Y({mutationFn:j=>ve.updateFeatures(t,j),onSuccess:()=>{L.success("zellik gncellendi"),a.invalidateQueries({queryKey:["driver",t]})},onError:()=>{L.error("zellik gncellenemedi")}}),B=(z==null?void 0:z.data)||null,Z=((je=A==null?void 0:A.data)==null?void 0:je.locations)||[],ae=((Oe=_==null?void 0:_.data)==null?void 0:Oe.trips)||[],d=((Me=F==null?void 0:F.data)==null?void 0:Me.homes)||[],M=(($e=F==null?void 0:F.data)==null?void 0:$e.can_add)??!0,O=(((Q=R==null?void 0:R.data)==null?void 0:Q.stops)||[]).filter(j=>j.location_type==="unknown").sort((j,W)=>W.duration_minutes-j.duration_minutes).slice(0,10),P=async()=>{if(!n||!l){L.error("Balk ve ierik gerekli");return}x(!0);try{await Ns.send({driver_id:t,title:n,body:l}),L.success("Bildirim gnderildi"),i(""),m("")}catch{L.error("Bildirim gnderilemedi")}finally{x(!1)}},S=j=>{N(j),f({name:"Ev",latitude:j.latitude,longitude:j.longitude,province:j.province||"",district:j.district||"",radius:200}),y(!0)},H=()=>{c.name&&g.mutate({name:c.name,latitude:c.latitude,longitude:c.longitude,province:c.province||void 0,district:c.district||void 0,radius:c.radius})},J=j=>{if(j<60)return`${j} dk`;const W=Math.floor(j/60),h=j%60;return`${W}s ${h}dk`};if(T)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!B)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"ofr bulunamad"}),e.jsx(ne,{to:"/drivers",className:"text-primary-600 hover:text-primary-700 mt-2 inline-block",children:"Geri dn"})]});const X=Z.length>0?Z[0]:null,G=Z.map(j=>[j.latitude,j.longitude]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ne,{to:"/drivers",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ws,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[B.name," ",B.surname]}),e.jsx("p",{className:"text-gray-500",children:B.phone})]}),e.jsxs(ne,{to:`/drivers/${t}/routes`,className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(ue,{className:"h-5 w-5"}),"Gzergahlar Gr"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"ofr Bilgileri"}),e.jsxs("dl",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"E-posta"}),e.jsx("dd",{className:"text-sm font-medium",children:B.email})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Kaytl Adres"}),e.jsxs("dd",{className:"text-sm font-medium",children:[B.district,", ",B.province]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Kayt Tarihi"}),e.jsx("dd",{className:"text-sm font-medium",children:new Date(B.created_at).toLocaleDateString("tr-TR")})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Durum"}),e.jsx("dd",{children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:B.status==="active"?"Aktif":B.status==="on_trip"?"Seferde":B.status==="at_home"?"Evde":"Pasif"})})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Src Ynetimi"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Hesap Durumu"}),e.jsx("button",{onClick:()=>I.mutate(!B.is_active),disabled:I.isPending,className:`px-3 py-1 text-xs font-medium rounded-full transition-colors ${B.is_active?"bg-green-100 text-green-800 hover:bg-red-100 hover:text-red-800":"bg-red-100 text-red-800 hover:bg-green-100 hover:text-green-800"}`,children:I.isPending?"leniyor...":B.is_active?"Aktif - Tkla Devre D Brak":"Pasif - Tkla Aktifletir"})]}),e.jsxs("div",{className:"pt-2 border-t space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"zellik Kontrolleri"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Rehber Eriimi"}),e.jsx("button",{onClick:()=>U.mutate({contacts_enabled:!B.contacts_enabled}),disabled:U.isPending,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${B.contacts_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:B.contacts_enabled?"Ak":"Kapal"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Arama Gemii"}),e.jsx("button",{onClick:()=>U.mutate({call_log_enabled:!B.call_log_enabled}),disabled:U.isPending,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${B.call_log_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:B.call_log_enabled?"Ak":"Kapal"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Anketler"}),e.jsx("button",{onClick:()=>U.mutate({surveys_enabled:!B.surveys_enabled}),disabled:U.isPending,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${B.surveys_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:B.surveys_enabled?"Ak":"Kapal"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sorular"}),e.jsx("button",{onClick:()=>U.mutate({questions_enabled:!B.questions_enabled}),disabled:U.isPending,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${B.questions_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:B.questions_enabled?"Ak":"Kapal"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("button",{onClick:()=>k(!0),className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-red-600 border border-red-200 rounded-lg hover:bg-red-50 transition-colors",children:[e.jsx(be,{className:"h-4 w-4"}),"Srcy Sil"]})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-green-600"}),"Ev Adresleri",e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",d.length,"/2)"]})]}),d.length>0?e.jsx("ul",{className:"space-y-3 mb-4",children:d.map(j=>e.jsx("li",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-green-800 flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:""})," ",j.name]}),e.jsxs("p",{className:"text-sm text-green-600",children:[j.province,", ",j.district]}),e.jsxs("p",{className:"text-xs text-green-500",children:["Yarap: ",j.radius,"m",!j.is_active&&e.jsx("span",{className:"ml-2 text-red-500",children:"(Pasif)"})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>E(j),className:"p-1.5 text-green-600 hover:bg-green-100 rounded",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{confirm("Bu ev adresini silmek istediinize emin misiniz?")&&D.mutate(j.id)},className:"p-1.5 text-red-500 hover:bg-red-100 rounded",children:e.jsx(be,{className:"h-4 w-4"})})]})]})},j.id))}):e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Henz ev adresi eklenmemi"}),O.length>0&&M&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Sk Durduu Yerler"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Bu noktalardan birini ev olarak iaretleyebilirsiniz"}),e.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto",children:O.map(j=>e.jsxs("li",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[j.province,", ",j.district]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[J(j.duration_minutes)," bekledi"]})]}),e.jsxs("button",{onClick:()=>S(j),className:"flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 text-xs",children:[e.jsx(ze,{className:"h-3 w-3"}),"Ev Yap"]})]},j.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Aralar"]}),B.vehicles&&B.vehicles.length>0?e.jsx("ul",{className:"space-y-3",children:B.vehicles.map(j=>e.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[j.brand," ",j.model]}),e.jsx("p",{className:"text-sm text-gray-500",children:j.plate})]}),j.is_active&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Aktif"})]},j.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Ara kayd yok"}),e.jsx("h3",{className:"text-md font-semibold mt-6 mb-3",children:"Dorseler"}),B.trailers&&B.trailers.length>0?e.jsx("ul",{className:"space-y-3",children:B.trailers.map(j=>e.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:j.trailer_type}),e.jsx("p",{className:"text-sm text-gray-500",children:j.plate})]}),j.is_active&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Aktif"})]},j.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Dorse kayd yok"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Konum Gemii ve Ev Adresleri"]}),e.jsx("div",{className:"h-96 rounded-lg overflow-hidden",children:e.jsxs(Ze,{center:X?[X.latitude,X.longitude]:[39.925533,32.866287],zoom:X?12:6,style:{height:"100%",width:"100%"},children:[e.jsx(Ve,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),X&&e.jsx(Le,{position:[X.latitude,X.longitude],children:e.jsx(oe,{children:e.jsxs("div",{children:[e.jsxs("strong",{children:[B.name," ",B.surname]}),e.jsx("br",{}),"Son konum: ",new Date(X.timestamp).toLocaleString("tr-TR"),e.jsx("br",{}),"Hz: ",X.speed.toFixed(1)," km/s"]})})}),G.length>1&&e.jsx(yt,{positions:G,color:"blue",weight:3,opacity:.7}),d.map(j=>e.jsxs("div",{children:[e.jsx(Le,{position:[j.latitude,j.longitude],icon:Hn,children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("strong",{children:[" ",j.name]}),e.jsx("br",{}),j.province,", ",j.district,e.jsx("br",{}),"Yarap: ",j.radius,"m"]})})}),e.jsx(ft,{center:[j.latitude,j.longitude],radius:j.radius,pathOptions:{color:j.is_active?"#22c55e":"#ef4444",fillColor:j.is_active?"#22c55e":"#ef4444",fillOpacity:.2}})]},j.id))]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5"}),"Bildirim Gnder"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balk"}),e.jsx("input",{type:"text",value:n,onChange:j=>i(j.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Bildirim bal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"erik"}),e.jsx("textarea",{value:l,onChange:j=>m(j.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Bildirim ierii"})]}),e.jsx("button",{onClick:P,disabled:o,className:"w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 disabled:opacity-50",children:o?"Gnderiliyor...":"Gnder"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Son Seferler"]}),ae.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balang"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesafe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Durum"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ae.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(j.start_time).toLocaleString("tr-TR")}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[j.distance_km.toFixed(1)," km"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.status==="completed"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:j.status==="completed"?"Tamamland":"Devam Ediyor"})})]},j.id))})]})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Sefer kayd yok"})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-green-600"}),"Ev Adresi Ekle"]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"font-medium",children:[B.name," ",B.surname]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[u.province,", ",u.district]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[u.latitude.toFixed(6),", ",u.longitude.toFixed(6)]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ev Ad"}),e.jsx("input",{type:"text",value:c.name,onChange:j=>f(W=>({...W,name:j.target.value})),placeholder:"Ev 1, Ev 2, Ana Ev, vb.",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tespit Yarap (metre)"}),e.jsx("input",{type:"number",value:c.radius,onChange:j=>f(W=>({...W,radius:parseInt(j.target.value)||200})),min:50,max:1e3,className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ofr bu yarap iinde durunca ev olarak alglanr"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{y(!1),N(null),f({name:"",latitude:0,longitude:0,province:"",district:"",radius:200})},className:"flex-1 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"ptal"}),e.jsxs("button",{onClick:H,disabled:!c.name||g.isPending,className:"flex-1 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),g.isPending?"Kaydediliyor...":"Kaydet"]})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-primary-600"}),"Ev Adresini Dzenle"]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ev Ad"}),e.jsx("input",{type:"text",value:v.name,onChange:j=>E(W=>W?{...W,name:j.target.value}:null),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tespit Yarap (metre)"}),e.jsx("input",{type:"number",value:v.radius,onChange:j=>E(W=>W?{...W,radius:parseInt(j.target.value)||200}:null),min:50,max:1e3,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:v.is_active,onChange:j=>E(W=>W?{...W,is_active:j.target.checked}:null),className:"h-4 w-4 text-primary-600 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Aktif (Durak tespitinde kullanlsn)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>E(null),className:"flex-1 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"ptal"}),e.jsx("button",{onClick:()=>{v&&w.mutate({homeId:v.id,data:{name:v.name,radius:v.radius,is_active:v.is_active}})},disabled:w.isPending,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:w.isPending?"Kaydediliyor...":"Gncelle"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Kt,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Srcy Sil"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 mb-2",children:[e.jsxs("strong",{children:[B==null?void 0:B.name," ",B==null?void 0:B.surname]})," (",B==null?void 0:B.phone,") adl srcy silmek istediinize emin misiniz?"]}),e.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:"Bu ilem geri alnamaz! Srcye ait tm veriler (aralar, dorseler, konum gemii, seferler, anket yantlar) kalc olarak silinecektir."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"ptal"}),e.jsxs("button",{onClick:()=>{V.mutate(),k(!1)},disabled:V.isPending,className:"flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),V.isPending?"Siliniyor...":"Evet, Sil"]})]})]})})]})}delete me.Icon.Default.prototype._getIconUrl;me.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function Gn(){var N,b,k;const{id:t}=xs(),[s,a]=r.useState(null),[n,i]=r.useState({start:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),{data:l,isLoading:m}=q({queryKey:["driver-routes",t,n],queryFn:()=>C.get(`/admin/analytics/drivers/${t}/routes`,{params:{start_date:n.start,end_date:n.end}}),enabled:!!t}),{data:o}=q({queryKey:["trip-details",s],queryFn:()=>C.get(`/admin/analytics/trips/${s}/details`),enabled:!!s}),x=((N=l==null?void 0:l.data)==null?void 0:N.routes)||[],p=((b=o==null?void 0:o.data)==null?void 0:b.locations)||[],y=((k=o==null?void 0:o.data)==null?void 0:k.stops)||[],v=()=>s&&p.length>0?[p[0].latitude,p[0].longitude]:x.length>0&&x[0].start_latitude?[x[0].start_latitude,x[0].start_longitude]:[39,35],E=p.map(c=>[c.latitude,c.longitude]),u=c=>{switch(c){case"loading":return"#22c55e";case"unloading":return"#ef4444";case"rest_area":return"#3b82f6";case"gas_station":return"#f97316";case"parking":return"#6b7280";default:return"#8b5cf6"}};return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ne,{to:`/drivers/${t}`,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ws,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ofr Gzergahlar"}),e.jsx("p",{className:"text-gray-500",children:"Tm seferleri ve rotalar grntleyin"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Zt,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:n.start,onChange:c=>i(f=>({...f,start:c.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"date",value:n.end,onChange:c=>i(f=>({...f,end:c.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[x.length," sefer bulundu"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"font-semibold",children:"Seferler"})}),e.jsxs("div",{className:"max-h-[600px] overflow-y-auto",children:[x.map(c=>{var f;return e.jsxs("button",{onClick:()=>a(c.trip_id),className:`w-full text-left p-4 border-b hover:bg-gray-50 ${s===c.trip_id?"bg-primary-50":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[c.start_province,"  ",c.end_province||"?"]}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${c.status==="completed"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:c.status==="completed"?"Tamamland":"Devam Ediyor"})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:new Date(c.started_at).toLocaleString("tr-TR")}),e.jsxs("p",{children:[(f=c.distance_km)==null?void 0:f.toFixed(1)," km  ",c.duration_minutes," dk"]}),c.cargo_type&&e.jsxs("p",{className:"text-primary-600",children:["Yk: ",c.cargo_type]}),c.price&&e.jsxs("p",{className:"text-green-600 font-medium",children:[c.price," "]})]})]},c.trip_id)}),x.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Bu tarih aralnda sefer bulunamad"})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold",children:s?"Sefer Detay":"Harita"}),s&&e.jsx("button",{onClick:()=>a(null),className:"text-sm text-gray-500 hover:text-gray-700",children:"Temizle"})]}),e.jsx("div",{className:"h-[600px]",children:e.jsxs(Ze,{center:v(),zoom:s?10:6,style:{height:"100%",width:"100%"},children:[e.jsx(Ve,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s&&E.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(yt,{positions:E,color:"#3b82f6",weight:4,opacity:.8}),e.jsx(Le,{position:E[0],children:e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Balang"})]})})}),E.length>1&&e.jsx(Le,{position:E[E.length-1],children:e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gr,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{children:"Biti"})]})})}),y.map(c=>e.jsx(hs,{center:[c.latitude,c.longitude],radius:8,fillColor:u(c.location_type),color:"white",weight:2,fillOpacity:.8,children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:c.location_type==="loading"?"Ykleme":c.location_type==="unloading"?"Boaltma":c.location_type==="rest_area"?"Dinlenme":c.location_type==="gas_station"?"Benzinlik":"Durak"}),e.jsx("br",{}),c.province,", ",c.district,e.jsx("br",{}),"Sre: ",c.duration_minutes," dk",e.jsx("br",{}),new Date(c.started_at).toLocaleTimeString("tr-TR")]})})},c.id))]}),!s&&x.filter(c=>c.start_latitude&&c.end_latitude).map(c=>{var f;return e.jsx(yt,{positions:[[c.start_latitude,c.start_longitude],[c.end_latitude,c.end_longitude]],color:c.status==="completed"?"#22c55e":"#f97316",weight:2,opacity:.6,eventHandlers:{click:()=>a(c.trip_id)},children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("strong",{children:[c.start_province,"  ",c.end_province]}),e.jsx("br",{}),(f=c.distance_km)==null?void 0:f.toFixed(1)," km",e.jsx("br",{}),new Date(c.started_at).toLocaleDateString("tr-TR")]})})},c.trip_id)})]},s||"default")})]})]}),s&&y.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Sefer Duraklar"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map((c,f)=>e.jsxs("div",{className:"border rounded-lg p-4",style:{borderLeftColor:u(c.location_type),borderLeftWidth:4},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["#",f+1," ",c.location_type==="loading"?"Ykleme":c.location_type==="unloading"?"Boaltma":c.location_type==="rest_area"?"Dinlenme":c.location_type==="gas_station"?"Benzinlik":"Durak"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[c.duration_minutes," dk"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[c.province,", ",c.district]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[new Date(c.started_at).toLocaleTimeString("tr-TR"),c.ended_at&&` - ${new Date(c.ended_at).toLocaleTimeString("tr-TR")}`]})]},c.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Durak Tipleri"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{children:"Ykleme"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{children:"Boaltma"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"Dinlenme"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),e.jsx("span",{children:"Benzinlik"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),e.jsx("span",{children:"Park"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{children:"Dier"})]})]})]})]})}delete me.Icon.Default.prototype._getIconUrl;me.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Re={marmara:{name:"Marmara",color:"#3B82F6",center:[40.7,29],provinces:["stanbul","Kocaeli","Sakarya","Bursa","Balkesir","anakkale","Edirne","Krklareli","Tekirda","Yalova","Bilecik"]},ege:{name:"Ege",color:"#10B981",center:[38.5,28],provinces:["zmir","Aydn","Denizli","Mula","Manisa","Ktahya","Uak","Afyonkarahisar"]},akdeniz:{name:"Akdeniz",color:"#F59E0B",center:[36.8,32.5],provinces:["Antalya","Adana","Mersin","Hatay","Kahramanmara","Osmaniye","Isparta","Burdur"]},icAnadolu:{name:" Anadolu",color:"#EF4444",center:[39,33],provinces:["Ankara","Konya","Eskiehir","Kayseri","Sivas","Yozgat","Krehir","Nevehir","Aksaray","Nide","Karaman","Krkkale","ankr"]},karadeniz:{name:"Karadeniz",color:"#8B5CF6",center:[41,36],provinces:["Samsun","Trabzon","Ordu","Giresun","Rize","Artvin","Gmhane","Bayburt","Tokat","Amasya","orum","Sinop","Kastamonu","Bartn","Karabk","Zonguldak","Dzce","Bolu"]},doguAnadolu:{name:"Dou Anadolu",color:"#EC4899",center:[39.5,41],provinces:["Erzurum","Van","Malatya","Elaz","Erzincan","Mu","Bitlis","Bingl","Tunceli","Ar","Kars","Idr","Ardahan","Hakkari"]},guneydoguAnadolu:{name:"Gneydou Anadolu",color:"#06B6D4",center:[37.5,39.5],provinces:["Gaziantep","anlurfa","Diyarbakr","Mardin","Batman","Siirt","rnak","Adyaman","Kilis"]}},ut=t=>new me.DivIcon({className:"custom-marker",html:`<div style="
      background-color: ${t};
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    "></div>`,iconSize:[24,24],iconAnchor:[12,12]}),ds={on_trip:ut("#f97316"),at_home:ut("#3b82f6"),active:ut("#22c55e"),inactive:ut("#6b7280")};function Wn({locations:t,selectedRegion:s}){const a=It(),n=r.useRef(!1);return r.useEffect(()=>{if(s&&Re[s]){const i=Re[s];a.flyTo(i.center,7,{duration:1})}else if(t.length>0&&!n.current){const i=me.latLngBounds(t.map(l=>[l.latitude,l.longitude]));a.fitBounds(i,{padding:[50,50]}),n.current=!0}else s||a.flyTo([39.925533,32.866287],6,{duration:1})},[t,a,s]),null}function Yn(){var k;const[t,s]=r.useState(null),[a,n]=r.useState(null),[i,l]=r.useState(null),[m,o]=r.useState(!1),[x,p]=r.useState([]),y=dt(c=>c.token),{data:v,isLoading:E}=q({queryKey:["live-locations"],queryFn:()=>Wt.getLive(),refetchInterval:1e4});r.useEffect(()=>{if(!y){console.log("No auth token, skipping WebSocket connection");return}let c;{const _=window.location.protocol==="https:"?"wss:":"ws:",F=window.location.hostname==="localhost"?"localhost:8080":window.location.host;c=`${_}//${F}/ws?type=admin&client_id=admin-panel-${Date.now()}&token=${encodeURIComponent(y)}`}let f=null,z,T;const A=()=>{try{f=new WebSocket(c),f.onopen=()=>{o(!0),console.log("WebSocket connected"),T=setInterval(()=>{(f==null?void 0:f.readyState)===WebSocket.OPEN&&f.send(JSON.stringify({type:"ping"}))},3e4)},f.onmessage=_=>{var F,R;try{const g=JSON.parse(_.data);if(g.type==="location_update"){const w={driver_id:g.driver_id,driver_name:((F=g.name)==null?void 0:F.split(" ")[0])||"",driver_surname:((R=g.name)==null?void 0:R.split(" ").slice(1).join(" "))||"",latitude:g.latitude,longitude:g.longitude,speed:g.speed||0,status:g.status||"active",updated_at:new Date(g.timestamp*1e3).toISOString(),province:g.province};p(D=>{const I=D.findIndex(V=>V.driver_id===g.driver_id);if(I>=0){const V=[...D];return V[I]=w,V}return[...D,w]})}else g.type==="driver_status"&&p(w=>w.map(D=>D.driver_id===g.driver_id?{...D,status:g.status}:D))}catch(g){console.error("WebSocket message parse error:",g)}},f.onclose=()=>{o(!1),clearInterval(T),console.log("WebSocket disconnected, reconnecting..."),z=setTimeout(A,5e3)},f.onerror=_=>{console.error("WebSocket error:",_),f==null||f.close()}}catch(_){console.error("WebSocket connection error:",_),z=setTimeout(A,5e3)}};return A(),()=>{clearTimeout(z),clearInterval(T),f==null||f.close()}},[y]),r.useEffect(()=>{var c;(c=v==null?void 0:v.data)!=null&&c.locations&&p(f=>{const T=[...v.data.locations];return f.forEach(A=>{const _=T.find(F=>F.driver_id===A.driver_id);if(_){if(new Date(A.updated_at)>new Date(_.updated_at)){const F=T.findIndex(R=>R.driver_id===A.driver_id);T[F]=A}}else T.push(A)}),T})},[v]);const u=x.filter(c=>{if(t&&c.status!==t)return!1;if(a){const f=Re[a];if(f&&c.province&&!f.provinces.includes(c.province))return!1}return!(i&&c.province!==i)}),N={on_trip:x.filter(c=>c.status==="on_trip").length,at_home:x.filter(c=>c.status==="at_home").length,active:x.filter(c=>c.status==="active").length,total:x.length},b=c=>{const f=Re[c];return x.filter(z=>z.province&&f.provinces.includes(z.province)).length};return E&&x.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Canl Harita"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`h-3 w-3 rounded-full ${m?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:m?"Canl balant aktif":"Balant kuruluyor..."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 mb-3 sm:mb-4",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 w-full sm:w-auto",children:"Durum:"}),e.jsxs("button",{onClick:()=>s(null),className:`px-2 py-1 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${t===null?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Tm (",N.total,")"]}),e.jsxs("button",{onClick:()=>s("on_trip"),className:`px-2 py-1 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${t==="on_trip"?"bg-orange-500 text-white":"bg-orange-100 text-orange-700 hover:bg-orange-200"}`,children:["Seferde (",N.on_trip,")"]}),e.jsxs("button",{onClick:()=>s("at_home"),className:`px-2 py-1 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${t==="at_home"?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:["Evde (",N.at_home,")"]}),e.jsxs("button",{onClick:()=>s("active"),className:`px-2 py-1 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${t==="active"?"bg-green-500 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:["Aktif (",N.active,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 w-full sm:w-auto sm:mr-2",children:"Blge:"}),e.jsx("button",{onClick:()=>{n(null),l(null)},className:`px-2 py-1 sm:px-3 sm:py-1.5 rounded-lg text-xs font-medium transition-colors ${a===null?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Tm Trkiye"}),Object.entries(Re).map(([c,f])=>e.jsxs("button",{onClick:()=>{n(c),l(null)},className:`px-2 py-1 sm:px-3 sm:py-1.5 rounded-lg text-xs font-medium transition-colors ${a===c?"text-white":"text-gray-700 hover:opacity-80"}`,style:{backgroundColor:a===c?f.color:`${f.color}20`,color:a===c?"white":f.color},children:[f.name," (",b(c),")"]},c))]}),a&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mt-2 sm:mt-3 pt-2 sm:pt-3 border-t",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 w-full sm:w-auto sm:mr-2",children:"l:"}),e.jsx("button",{onClick:()=>l(null),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${i===null?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Tm"}),(k=Re[a])==null?void 0:k.provinces.map(c=>{const f=x.filter(z=>z.province===c).length;return e.jsxs("button",{onClick:()=>l(c),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${i===c?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[c," (",f,")"]},c)})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden h-[50vh] sm:h-[60vh] lg:h-[calc(100vh-340px)]",children:e.jsxs(Ze,{center:[39.925533,32.866287],zoom:6,style:{height:"100%",width:"100%"},children:[e.jsx(Ve,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Wn,{locations:u,selectedRegion:a}),u.map(c=>e.jsx(Le,{position:[c.latitude,c.longitude],icon:ds[c.status]||ds.inactive,children:e.jsx(oe,{children:e.jsxs("div",{className:"min-w-48",children:[e.jsxs("h3",{className:"font-semibold",children:[c.driver_name," ",c.driver_surname]}),c.province&&e.jsx("p",{className:"text-sm text-gray-600",children:c.province}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Hz: ",c.speed.toFixed(1)," km/s"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Gncelleme:"," ",new Date(c.updated_at).toLocaleTimeString("tr-TR")]}),e.jsxs("p",{className:"text-sm",children:["Durum:"," ",e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${c.status==="on_trip"?"bg-orange-100 text-orange-800":c.status==="at_home"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:c.status==="on_trip"?"Seferde":c.status==="at_home"?"Evde":"Aktif"})]}),e.jsx(ne,{to:`/drivers/${c.driver_id}`,className:"text-primary-600 hover:text-primary-700 text-sm mt-2 inline-block",children:"Detaya Git "})]})})},c.driver_id))]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-semibold mb-2 sm:mb-3",children:"Durum Aklamalar"}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:items-center gap-2 sm:gap-6 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-orange-500 border-2 border-white shadow"}),e.jsx("span",{children:"Seferde"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-blue-500 border-2 border-white shadow"}),e.jsx("span",{children:"Evde"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-green-500 border-2 border-white shadow"}),e.jsx("span",{children:"Aktif"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-gray-500 border-2 border-white shadow"}),e.jsx("span",{children:"Pasif"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-semibold mb-2 sm:mb-3",children:"Blge Dalm"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:Object.entries(Re).map(([c,f])=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:f.color}}),e.jsxs("span",{className:"truncate",children:[f.name,": ",b(c)]})]},c))})]})]})]})}const Ke=.01;function Un(t){const s={};return t.forEach(a=>{const n=Math.floor(a.latitude/Ke)*Ke,i=Math.floor(a.longitude/Ke)*Ke,l=`${n.toFixed(4)}_${i.toFixed(4)}`;s[l]||(s[l]={lat:n+Ke/2,lng:i+Ke/2,count:0,drivers:[],lastSeen:a.timestamp}),s[l].count++,s[l].drivers.includes(a.driver_id)||s[l].drivers.push(a.driver_id),new Date(a.timestamp)>new Date(s[l].lastSeen)&&(s[l].lastSeen=a.timestamp)}),Object.values(s)}function zt(t,s){const a=t/s;return a>.8?"#ef4444":a>.6?"#f97316":a>.4?"#eab308":a>.2?"#22c55e":"#3b82f6"}function Zn({center:t}){const s=It();return r.useMemo(()=>{s.setView(t,s.getZoom())},[t,s]),null}function Vn(){var v,E;const[t,s]=r.useState("24h"),[a]=r.useState([39,35]),{data:n}=q({queryKey:["live-locations"],queryFn:()=>Wt.getLive(),refetchInterval:3e4}),{data:i}=q({queryKey:["drivers"],queryFn:()=>ve.getAll({limit:1e3})}),l=((v=n==null?void 0:n.data)==null?void 0:v.locations)||[],m=((E=i==null?void 0:i.data)==null?void 0:E.drivers)||[],o=r.useMemo(()=>{const u={};return m.forEach(N=>{u[N.id]=`${N.name} ${N.surname}`}),l.map(N=>({...N,driver_name:u[N.driver_id]||"Bilinmiyor"}))},[l,m]),x=r.useMemo(()=>Un(o),[o]),p=r.useMemo(()=>Math.max(...x.map(u=>u.count),1),[x]),y=r.useMemo(()=>{const u=new Set(l.map(k=>k.driver_id)),N=x.length,b=x.filter(k=>k.count/p>.6).length;return{activeDrivers:u.size,totalZones:N,hotZones:b,totalLocations:l.length}},[l,x,p]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(wt,{className:"h-7 w-7 text-orange-500"}),"Is Haritas"]}),e.jsx("p",{className:"text-gray-500",children:"Konum younluk analizi"})]}),e.jsx("div",{className:"flex gap-2",children:["1h","6h","24h","7d"].map(u=>e.jsxs("button",{onClick:()=>s(u),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${t===u?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[u==="1h"&&"Son 1 Saat",u==="6h"&&"Son 6 Saat",u==="24h"&&"Son 24 Saat",u==="7d"&&"Son 7 Gn"]},u))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(we,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Aktif Src"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.activeDrivers})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(se,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Toplam Blge"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalZones})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(wt,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Youn Blge"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.hotZones})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(ce,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Konum Kayd"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalLocations})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"h-[600px] rounded-lg overflow-hidden",children:e.jsxs(Ze,{center:a,zoom:6,style:{height:"100%",width:"100%"},children:[e.jsx(Ve,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Zn,{center:a}),x.map((u,N)=>e.jsx(ft,{center:[u.lat,u.lng],radius:Math.max(500,u.count*100),pathOptions:{color:zt(u.count,p),fillColor:zt(u.count,p),fillOpacity:.4,weight:1},children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Blge Bilgisi"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Konum Says:"})," ",u.count]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Src Says:"})," ",u.drivers.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Son Grlme:"})," ",new Date(u.lastSeen).toLocaleString("tr-TR")]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u.lat.toFixed(4),", ",u.lng.toFixed(4)]})]})})},N))]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"ok Az"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Az"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Orta"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-orange-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Youn"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"ok Youn"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"En Youn Blgeler"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sra"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Koordinat"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Konum Says"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Src Says"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Son Grlme"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Younluk"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.sort((u,N)=>N.count-u.count).slice(0,10).map((u,N)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:["#",N+1]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-500",children:[u.lat.toFixed(4),", ",u.lng.toFixed(4)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:u.count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:u.drivers.length}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(u.lastSeen).toLocaleString("tr-TR")}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:zt(u.count,p)}}),e.jsxs("span",{className:"text-sm",children:[(u.count/p*100).toFixed(0),"%"]})]})})]},N))})]})})]})]})}const Qn={yes_no:"Evet/Hayr",multiple_choice:"oktan Semeli",scale:"lek (1-10)",price:"Fiyat",text:"Metin"},Jn={manual:"Manuel",location:"Konum Bazl",time:"Zamanl",trip_end:"Sefer Bitii"};function Xn(){var R,g;const t=Be(),[s,a]=r.useState(!1),[n,i]=r.useState(!1),[l,m]=r.useState(null),[o,x]=r.useState({title:"",description:"",type:"yes_no",options:[""],is_active:!0,trigger_type:"manual"}),{data:p,isLoading:y}=q({queryKey:["surveys"],queryFn:()=>Xe.getAll()}),{data:v}=q({queryKey:["survey-responses",l==null?void 0:l.id],queryFn:()=>Xe.getResponses(l.id),enabled:!!l&&n}),E=Y({mutationFn:w=>Xe.create(w),onSuccess:()=>{t.invalidateQueries({queryKey:["surveys"]}),L.success("Anket oluturuldu"),c()},onError:()=>L.error("Anket oluturulamad")}),u=Y({mutationFn:({id:w,data:D})=>Xe.update(w,D),onSuccess:()=>{t.invalidateQueries({queryKey:["surveys"]}),L.success("Anket gncellendi"),c()},onError:()=>L.error("Anket gncellenemedi")}),N=Y({mutationFn:w=>Xe.delete(w),onSuccess:()=>{t.invalidateQueries({queryKey:["surveys"]}),L.success("Anket silindi")},onError:()=>L.error("Anket silinemedi")}),b=((R=p==null?void 0:p.data)==null?void 0:R.surveys)||[],k=((g=v==null?void 0:v.data)==null?void 0:g.responses)||[],c=()=>{a(!1),m(null),x({title:"",description:"",type:"yes_no",options:[""],is_active:!0,trigger_type:"manual"})},f=w=>{m(w),x({title:w.title,description:w.description,type:w.type,options:w.options.length>0?w.options:[""],is_active:w.is_active,trigger_type:w.trigger_type}),a(!0)},z=w=>{w.preventDefault();const D={...o,options:o.type==="multiple_choice"?o.options.filter(I=>I.trim()!==""):[]};l?u.mutate({id:l.id,data:D}):E.mutate(D)},T=w=>{window.confirm("Bu anketi silmek istediinize emin misiniz?")&&N.mutate(w)},A=()=>{x(w=>({...w,options:[...w.options,""]}))},_=w=>{x(D=>({...D,options:D.options.filter((I,V)=>V!==w)}))},F=(w,D)=>{x(I=>({...I,options:I.options.map((V,U)=>U===w?D:V)}))};return y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Anketler"}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(De,{className:"h-5 w-5"}),"Yeni Anket"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Anket"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tip"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tetikleyici"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Yant"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"lemler"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:b.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.title}),e.jsx("p",{className:"text-sm text-gray-500",children:w.description})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Qn[w.type]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Jn[w.trigger_type]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${w.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.is_active?"Aktif":"Pasif"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:w.response_count||0}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{m(w),i(!0)},className:"p-1 text-gray-500 hover:text-primary-600",title:"Yantlar Gr",children:e.jsx(Ss,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>f(w),className:"p-1 text-gray-500 hover:text-primary-600",title:"Dzenle",children:e.jsx(fe,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>T(w.id),className:"p-1 text-gray-500 hover:text-red-600",title:"Sil",children:e.jsx(be,{className:"h-5 w-5"})})]})})]},w.id))})]}),b.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Henz anket oluturulmam"})]}),s&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:c}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:l?"Anketi Dzenle":"Yeni Anket"}),e.jsx("button",{onClick:c,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(Ye,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balk"}),e.jsx("input",{type:"text",required:!0,value:o.title,onChange:w=>x(D=>({...D,title:w.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aklama"}),e.jsx("textarea",{value:o.description,onChange:w=>x(D=>({...D,description:w.target.value})),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Tipi"}),e.jsxs("select",{value:o.type,onChange:w=>x(D=>({...D,type:w.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"yes_no",children:"Evet/Hayr"}),e.jsx("option",{value:"multiple_choice",children:"oktan Semeli"}),e.jsx("option",{value:"scale",children:"lek (1-10)"}),e.jsx("option",{value:"price",children:"Fiyat"}),e.jsx("option",{value:"text",children:"Metin"})]})]}),o.type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seenekler"}),e.jsxs("div",{className:"space-y-2",children:[o.options.map((w,D)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:w,onChange:I=>F(D,I.target.value),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2",placeholder:`Seenek ${D+1}`}),o.options.length>1&&e.jsx("button",{type:"button",onClick:()=>_(D),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:e.jsx(Ye,{className:"h-5 w-5"})})]},D)),e.jsx("button",{type:"button",onClick:A,className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Seenek Ekle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tetikleyici"}),e.jsxs("select",{value:o.trigger_type,onChange:w=>x(D=>({...D,trigger_type:w.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"manual",children:"Manuel"}),e.jsx("option",{value:"location",children:"Konum Bazl"}),e.jsx("option",{value:"time",children:"Zamanl"}),e.jsx("option",{value:"trip_end",children:"Sefer Bitii"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:o.is_active,onChange:w=>x(D=>({...D,is_active:w.target.checked})),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-gray-700",children:"Aktif"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsx("button",{type:"submit",disabled:E.isPending||u.isPending,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:E.isPending||u.isPending?"Kaydediliyor...":"Kaydet"})]})]})]})]})}),n&&l&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>{i(!1),m(null)}}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full p-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:[l.title," - Yantlar"]}),e.jsx("button",{onClick:()=>{i(!1),m(null)},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(Ye,{className:"h-5 w-5"})})]}),k.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"ofr"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Yant"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tarih"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:k.map(w=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:w.driver_name}),e.jsx("td",{className:"px-4 py-2 text-sm",children:w.answer}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:new Date(w.created_at).toLocaleString("tr-TR")})]},w.id))})]}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Henz yant yok"})]})]})})]})}function el(){const t=Be(),[s,a]=r.useState({sms_enabled:"false",sms_provider:"netgsm",sms_api_key:"",sms_api_secret:"",location_interval_active:"30",location_interval_idle:"300",location_interval_trip:"10",trip_start_speed_threshold:"15",trip_end_idle_minutes:"15",home_radius_meters:"200"}),[n,i]=r.useState(""),[l,m]=r.useState(""),[o,x]=r.useState(!1),{data:p,isLoading:y}=q({queryKey:["settings"],queryFn:()=>es.getAll()});r.useEffect(()=>{var N;(N=p==null?void 0:p.data)!=null&&N.settings&&a(b=>({...b,...p.data.settings}))},[p]);const v=Y({mutationFn:N=>es.update(N),onSuccess:()=>{t.invalidateQueries({queryKey:["settings"]}),L.success("Ayarlar kaydedildi")},onError:()=>L.error("Ayarlar kaydedilemedi")}),E=N=>{N.preventDefault(),v.mutate(s)},u=async()=>{if(!n||!l){L.error("Balk ve ierik gerekli");return}x(!0);try{await Ns.broadcast({title:n,body:l}),L.success("Toplu bildirim gnderildi"),i(""),m("")}catch{L.error("Bildirim gnderilemedi")}finally{x(!1)}};return y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Vt,{className:"h-5 w-5"}),"Genel Ayarlar"]}),e.jsxs("form",{onSubmit:E,className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"border-b pb-3 sm:pb-4 mb-3 sm:mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 sm:mb-3 text-sm sm:text-base",children:"SMS Ayarlar"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"checkbox",id:"sms_enabled",checked:s.sms_enabled==="true",onChange:N=>a(b=>({...b,sms_enabled:N.target.checked?"true":"false"})),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"sms_enabled",className:"text-sm text-gray-700",children:"SMS Dorulama Aktif"})]}),s.sms_enabled==="true"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMS Salayc"}),e.jsx("select",{value:s.sms_provider,onChange:N=>a(b=>({...b,sms_provider:N.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:e.jsx("option",{value:"netgsm",children:"NetGSM"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),e.jsx("input",{type:"text",value:s.sms_api_key,onChange:N=>a(b=>({...b,sms_api_key:N.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Secret"}),e.jsx("input",{type:"password",value:s.sms_api_secret,onChange:N=>a(b=>({...b,sms_api_secret:N.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsxs("div",{className:"border-b pb-3 sm:pb-4 mb-3 sm:mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 sm:mb-3 text-sm sm:text-base",children:"Konum Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aktif Aral (sn)"}),e.jsx("input",{type:"number",value:s.location_interval_active,onChange:N=>a(b=>({...b,location_interval_active:N.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beklemede Aral (sn)"}),e.jsx("input",{type:"number",value:s.location_interval_idle,onChange:N=>a(b=>({...b,location_interval_idle:N.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sefer Aral (sn)"}),e.jsx("input",{type:"number",value:s.location_interval_trip,onChange:N=>a(b=>({...b,location_interval_trip:N.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ev Yarap (m)"}),e.jsx("input",{type:"number",value:s.home_radius_meters,onChange:N=>a(b=>({...b,home_radius_meters:N.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsxs("div",{className:"mb-3 sm:mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 sm:mb-3 text-sm sm:text-base",children:"Sefer Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balama Hz Eii (km/s)"}),e.jsx("input",{type:"number",value:s.trip_start_speed_threshold,onChange:N=>a(b=>({...b,trip_start_speed_threshold:N.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Biti Bekleme Sresi (dk)"}),e.jsx("input",{type:"number",value:s.trip_end_idle_minutes,onChange:N=>a(b=>({...b,trip_end_idle_minutes:N.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsx("button",{type:"submit",disabled:v.isPending,className:"w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 disabled:opacity-50",children:v.isPending?"Kaydediliyor...":"Kaydet"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5"}),"Toplu Bildirim Gnder"]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mb-3 sm:mb-4",children:"Tm aktif ofrlere ayn anda bildirim gnderin."}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balk"}),e.jsx("input",{type:"text",value:n,onChange:N=>i(N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Bildirim bal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"erik"}),e.jsx("textarea",{value:l,onChange:N=>m(N.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Bildirim ierii"})]}),e.jsx("button",{onClick:u,disabled:o,className:"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 disabled:opacity-50",children:o?"Gnderiliyor...":"Tm ofrlere Gnder"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2 text-sm sm:text-base",children:"Ayar Aklamalar"}),e.jsxs("ul",{className:"text-xs sm:text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Aktif Aral:"})," ofr aktif olduunda konum gnderme skl"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Beklemede Aral:"})," ofr hareketsizken konum gnderme skl"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sefer Aral:"})," Sefer srasnda konum gnderme skl"]}),e.jsxs("li",{className:"hidden sm:list-item",children:[e.jsx("strong",{children:"Ev Yarap:"})," ofrn evde saylaca mesafe"]}),e.jsxs("li",{className:"hidden sm:list-item",children:[e.jsx("strong",{children:"Balama Hz Eii:"})," Seferin balad kabul edilen minimum hz"]}),e.jsxs("li",{className:"hidden sm:list-item",children:[e.jsx("strong",{children:"Biti Bekleme Sresi:"})," Bu sre hareketsiz kalnrsa sefer sonlandrlr"]})]})]})]})}const os=["#3b82f6","#22c55e","#f97316","#ef4444","#8b5cf6","#06b6d4","#ec4899","#84cc16"],qe={stanbul:[41.0082,28.9784],Ankara:[39.9334,32.8597],zmir:[38.4237,27.1428],Bursa:[40.1826,29.0665],Antalya:[36.8969,30.7133],Adana:[37,35.3213],Konya:[37.8746,32.4932],Gaziantep:[37.0662,37.3833],Mersin:[36.8121,34.6415],Kayseri:[38.7312,35.4787],Eskiehir:[39.7767,30.5206],Samsun:[41.2867,36.33],Denizli:[37.7765,29.0864],anlurfa:[37.1591,38.7969],Trabzon:[41.0027,39.7168],Diyarbakr:[37.9144,40.2306],Malatya:[38.3552,38.3095],Erzurum:[39.9,41.27],Van:[38.4891,43.4089],Batman:[37.8812,41.1351],Hatay:[36.2,36.16],Manisa:[38.6191,27.4289],Kocaeli:[40.7654,29.9408],Sakarya:[40.7569,30.3781],Tekirda:[41.0022,27.5126]};function tl(){var U,B,Z,ae;const[t,s]=r.useState("overview"),[a,n]=r.useState("30d"),[i,l]=r.useState("all"),{data:m,isLoading:o}=q({queryKey:["route-heatmap"],queryFn:()=>C.get("/admin/analytics/heatmap")}),{data:x,isLoading:p}=q({queryKey:["province-stats"],queryFn:()=>C.get("/admin/analytics/province-stats")}),{data:y,isLoading:v,refetch:E}=q({queryKey:["daily-stats"],queryFn:()=>C.get("/admin/analytics/daily-stats")}),{data:u,isLoading:N}=q({queryKey:["price-matrix"],queryFn:()=>C.get("/admin/analytics/price-matrix")}),b=((U=m==null?void 0:m.data)==null?void 0:U.heatmap)||[],k=((B=x==null?void 0:x.data)==null?void 0:B.province_stats)||[],c=((Z=y==null?void 0:y.data)==null?void 0:Z.daily_stats)||[],f=((ae=u==null?void 0:u.data)==null?void 0:ae.price_matrix)||[],z=o||p||v||N,T=r.useMemo(()=>{if(a==="all")return c;const d=parseInt(a),M=new Date;return M.setDate(M.getDate()-d),c.filter($=>new Date($.stat_date)>=M)},[c,a]),A=r.useMemo(()=>{const d=T.reduce((Q,j)=>Q+j.total_trips,0),M=T.reduce((Q,j)=>Q+j.total_distance_km,0),$=T.reduce((Q,j)=>Q+j.total_revenue,0),O=T.length>0?T.reduce((Q,j)=>Q+j.avg_price,0)/T.length:0,P=T.length>0?T.reduce((Q,j)=>Q+j.active_drivers,0)/T.length:0,S=Math.floor(T.length/2),H=T.slice(0,S),J=T.slice(S),X=H.reduce((Q,j)=>Q+j.total_trips,0),G=J.reduce((Q,j)=>Q+j.total_trips,0),je=G>0?(X-G)/G*100:0,Oe=H.reduce((Q,j)=>Q+j.total_revenue,0),Me=J.reduce((Q,j)=>Q+j.total_revenue,0),$e=Me>0?(Oe-Me)/Me*100:0;return{totalTrips:d,totalDistance:M,totalRevenue:$,avgPrice:O,avgDrivers:P,tripsTrend:je,revenueTrend:$e}},[T]),_=r.useMemo(()=>b.filter(d=>qe[d.from_province]&&qe[d.to_province]).filter(d=>i==="all"||d.from_province===i||d.to_province===i).map(d=>({positions:[qe[d.from_province],qe[d.to_province]],weight:Math.min(d.trip_count/2,10)+1,color:d.trip_count>20?"#ef4444":d.trip_count>10?"#f97316":"#3b82f6",route:d})),[b,i]),F=r.useMemo(()=>k.filter(d=>qe[d.province]).filter(d=>i==="all"||d.province===i).map(d=>({position:qe[d.province],radius:Math.min(d.driver_count*2,30)+5,stat:d})),[k,i]),R=r.useMemo(()=>T.slice().reverse().map(d=>({date:new Date(d.stat_date).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit"}),sefer:d.total_trips,mesafe:Math.round(d.total_distance_km),ciro:Math.round(d.total_revenue),sofor:d.active_drivers,fiyat:Math.round(d.avg_price)})),[T]),g=r.useMemo(()=>k.slice(0,8).map(d=>({name:d.province,value:d.trip_count})),[k]),w=r.useMemo(()=>{const d=new Set;return b.forEach(M=>{d.add(M.from_province),d.add(M.to_province)}),Array.from(d).sort()},[b]),D=d=>{let M,$,O;if(d==="csv"){const J=["Tarih","Aktif ofr","Toplam Sefer","Mesafe (km)","Ort. Fiyat","Toplam Ciro"],X=T.map(G=>[new Date(G.stat_date).toLocaleDateString("tr-TR"),G.active_drivers,G.total_trips,G.total_distance_km.toFixed(0),G.avg_price.toFixed(0),G.total_revenue.toFixed(0)]);M=[J.join(","),...X.map(G=>G.join(","))].join(`
`),$=`analytics-${a}.csv`,O="text/csv"}else M=JSON.stringify({dailyStats:T,provinceStats:k,heatmap:b},null,2),$=`analytics-${a}.json`,O="application/json";const P=new Blob([M],{type:O}),S=URL.createObjectURL(P),H=document.createElement("a");H.href=S,H.download=$,H.click(),URL.revokeObjectURL(S),L.success(`${d.toUpperCase()} dosyas indirildi`)},I=[{id:"overview",label:"Genel Bak",icon:ue},{id:"charts",label:"Grafikler",icon:at},{id:"map",label:"Gzergah Haritas",icon:qt},{id:"stats",label:"Detayl statistik",icon:Er},{id:"prices",label:"Fiyat Matrisi",icon:Ft}],V=[{value:"7d",label:"Son 7 Gn"},{value:"14d",label:"Son 14 Gn"},{value:"30d",label:"Son 30 Gn"},{value:"90d",label:"Son 90 Gn"},{value:"all",label:"Tm Zamanlar"}];return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analitik & Raporlar"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Detayl performans analizi ve gzergah istatistikleri"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-200 rounded-lg p-1",children:[e.jsx(Zt,{className:"h-4 w-4 text-gray-400 ml-2"}),e.jsx("select",{value:a,onChange:d=>n(d.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 pr-8",children:V.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]}),(t==="map"||t==="stats")&&e.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-200 rounded-lg p-1",children:[e.jsx(Cs,{className:"h-4 w-4 text-gray-400 ml-2"}),e.jsxs("select",{value:i,onChange:d=>l(d.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 pr-8",children:[e.jsx("option",{value:"all",children:"Tm ller"}),w.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsx("button",{onClick:()=>E(),className:"p-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",title:"Yenile",children:e.jsx(ks,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"flex items-center gap-1.5 px-3 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(Yt,{className:"h-4 w-4"}),"Export"]}),e.jsxs("div",{className:"absolute right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10",children:[e.jsx("button",{onClick:()=>D("csv"),className:"block w-full px-4 py-2 text-sm text-left hover:bg-gray-50",children:"CSV olarak indir"}),e.jsx("button",{onClick:()=>D("json"),className:"block w-full px-4 py-2 text-sm text-left hover:bg-gray-50",children:"JSON olarak indir"})]})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsx("nav",{className:"flex space-x-1 min-w-max",children:I.map(d=>e.jsxs("button",{onClick:()=>s(d.id),className:`py-3 px-4 border-b-2 font-medium text-sm flex items-center gap-2 whitespace-nowrap transition-colors ${t===d.id?"border-primary-500 text-primary-600 bg-primary-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(d.icon,{className:"h-4 w-4"}),d.label]},d.id))})}),z&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Veriler ykleniyor..."})]})}),!z&&t==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(ee,{className:"h-5 w-5 text-blue-600"})}),A.tripsTrend!==0&&e.jsxs("div",{className:`flex items-center gap-0.5 text-xs font-medium ${A.tripsTrend>=0?"text-green-600":"text-red-600"}`,children:[A.tripsTrend>=0?e.jsx(at,{className:"h-3.5 w-3.5"}):e.jsx(vt,{className:"h-3.5 w-3.5"}),Math.abs(A.tripsTrend).toFixed(0),"%"]})]}),e.jsx("p",{className:"mt-3 text-2xl font-bold text-gray-900",children:A.totalTrips.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500",children:"Toplam Sefer"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:e.jsx(qt,{className:"h-5 w-5 text-green-600"})})}),e.jsxs("p",{className:"mt-3 text-2xl font-bold text-gray-900",children:[(A.totalDistance/1e3).toFixed(0),"K"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Toplam Mesafe (km)"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(Ft,{className:"h-5 w-5 text-purple-600"})}),A.revenueTrend!==0&&e.jsxs("div",{className:`flex items-center gap-0.5 text-xs font-medium ${A.revenueTrend>=0?"text-green-600":"text-red-600"}`,children:[A.revenueTrend>=0?e.jsx(at,{className:"h-3.5 w-3.5"}):e.jsx(vt,{className:"h-3.5 w-3.5"}),Math.abs(A.revenueTrend).toFixed(0),"%"]})]}),e.jsxs("p",{className:"mt-3 text-2xl font-bold text-gray-900",children:[(A.totalRevenue/1e3).toFixed(0),"K "]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Toplam Ciro"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsx("div",{className:"p-2 bg-orange-50 rounded-lg w-fit",children:e.jsx(ue,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("p",{className:"mt-3 text-2xl font-bold text-gray-900",children:[A.avgPrice.toFixed(0)," "]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ortalama Fiyat"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsx("div",{className:"p-2 bg-cyan-50 rounded-lg w-fit",children:e.jsx(ce,{className:"h-5 w-5 text-cyan-600"})}),e.jsx("p",{className:"mt-3 text-2xl font-bold text-gray-900",children:A.avgDrivers.toFixed(0)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ort. Aktif ofr/Gn"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Sefer & Ciro Trendi"}),e.jsx("div",{className:"h-64",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:R,children:[e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx(ye,{dataKey:"date",tick:{fontSize:11},stroke:"#9CA3AF"}),e.jsx(pe,{yAxisId:"left",tick:{fontSize:11},stroke:"#9CA3AF"}),e.jsx(pe,{yAxisId:"right",orientation:"right",tick:{fontSize:11},stroke:"#9CA3AF"}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),e.jsx(We,{}),e.jsx(Ue,{yAxisId:"left",dataKey:"sefer",fill:"#3b82f6",name:"Sefer",radius:[4,4,0,0]}),e.jsx(Et,{yAxisId:"right",type:"monotone",dataKey:"ciro",stroke:"#22c55e",strokeWidth:2,dot:!1,name:"Ciro ()"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"l Bazl Sefer Dalm"}),e.jsx("div",{className:"h-64",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(et,{children:[e.jsx(tt,{data:g,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",children:g.map((d,M)=>e.jsx(st,{fill:os[M%os.length]},`cell-${M}`))}),e.jsx(de,{}),e.jsx(We,{layout:"vertical",align:"right",verticalAlign:"middle",formatter:d=>e.jsx("span",{className:"text-xs text-gray-600",children:d})})]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"En Popler Gzergahlar"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gzergah"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sefer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort. Mesafe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort. Fiyat"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Younluk"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:b.slice(0,10).map((d,M)=>{var P,S;const $=Math.max(...b.map(H=>H.trip_count)),O=d.trip_count/$*100;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:d.from_province}),e.jsx("span",{className:"text-gray-400 mx-2",children:""}),e.jsx("span",{className:"text-sm text-gray-600",children:d.to_province})]}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:d.trip_count}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(P=d.avg_distance_km)==null?void 0:P.toFixed(0)," km"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(S=d.avg_price)==null?void 0:S.toFixed(0)," "]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"w-24 h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${O}%`,backgroundColor:O>70?"#ef4444":O>40?"#f97316":"#3b82f6"}})})})]},M)})})]})})]})]}),!z&&t==="charts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Gnlk Sefer Trendi"}),e.jsx("div",{className:"h-72",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Lt,{data:R,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSefer",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx(ye,{dataKey:"date",tick:{fontSize:11},stroke:"#9CA3AF"}),e.jsx(pe,{tick:{fontSize:11},stroke:"#9CA3AF"}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),e.jsx(Dt,{type:"monotone",dataKey:"sefer",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorSefer)",name:"Sefer Says"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Gnlk Ciro Trendi"}),e.jsx("div",{className:"h-72",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Lt,{data:R,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCiro",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]})}),e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx(ye,{dataKey:"date",tick:{fontSize:11},stroke:"#9CA3AF"}),e.jsx(pe,{tick:{fontSize:11},stroke:"#9CA3AF"}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"},formatter:d=>`${d.toLocaleString("tr-TR")} `}),e.jsx(Dt,{type:"monotone",dataKey:"ciro",stroke:"#22c55e",strokeWidth:2,fillOpacity:1,fill:"url(#colorCiro)",name:"Ciro ()"})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Gnlk Mesafe (km)"}),e.jsx("div",{className:"h-64",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(rt,{data:R.slice(-14),children:[e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx(ye,{dataKey:"date",tick:{fontSize:10},stroke:"#9CA3AF"}),e.jsx(pe,{tick:{fontSize:10},stroke:"#9CA3AF"}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"},formatter:d=>`${d.toLocaleString("tr-TR")} km`}),e.jsx(Ue,{dataKey:"mesafe",fill:"#f97316",name:"Mesafe (km)",radius:[4,4,0,0]})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Aktif ofr Says"}),e.jsx("div",{className:"h-64",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Qt,{data:R.slice(-14),children:[e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx(ye,{dataKey:"date",tick:{fontSize:10},stroke:"#9CA3AF"}),e.jsx(pe,{tick:{fontSize:10},stroke:"#9CA3AF"}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),e.jsx(Et,{type:"monotone",dataKey:"sofor",stroke:"#8b5cf6",strokeWidth:2,dot:{fill:"#8b5cf6",r:3},name:"Aktif ofr"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Ortalama Fiyat Trendi"}),e.jsx("div",{className:"h-64",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Qt,{data:R,children:[e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx(ye,{dataKey:"date",tick:{fontSize:10},stroke:"#9CA3AF"}),e.jsx(pe,{tick:{fontSize:10},stroke:"#9CA3AF"}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"},formatter:d=>`${d.toLocaleString("tr-TR")} `}),e.jsx(Et,{type:"monotone",dataKey:"fiyat",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444",r:3},name:"Ort. Fiyat ()"})]})})})]})]}),R.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[e.jsx(ue,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Seilen tarih aralnda veri bulunamad"})]})]}),!z&&t==="map"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"Trkiye Gzergah Haritas"}),e.jsx("p",{className:"text-xs text-gray-500",children:"izgi kalnl sefer saysn, daire bykl ofr saysn gsterir"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[_.length," gzergah, ",F.length," il"]})]}),e.jsx("div",{className:"h-[500px] lg:h-[600px] rounded-lg overflow-hidden",children:e.jsxs(Ze,{center:[39,35],zoom:6,style:{height:"100%",width:"100%"},children:[e.jsx(Ve,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),_.map((d,M)=>{var $,O;return e.jsx(yt,{positions:d.positions,color:d.color,weight:d.weight,opacity:.6,children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("strong",{children:[d.route.from_province,"  ",d.route.to_province]}),e.jsx("br",{}),"Sefer: ",d.route.trip_count,e.jsx("br",{}),"Ort. Mesafe: ",($=d.route.avg_distance_km)==null?void 0:$.toFixed(0)," km",e.jsx("br",{}),"Ort. Fiyat: ",(O=d.route.avg_price)==null?void 0:O.toFixed(0)," "]})})},M)}),F.map((d,M)=>{var $;return e.jsx(hs,{center:d.position,radius:d.radius,fillColor:"#22c55e",color:"#16a34a",weight:2,opacity:.8,fillOpacity:.5,children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:d.stat.province}),e.jsx("br",{}),"ofr: ",d.stat.driver_count,e.jsx("br",{}),"Sefer: ",d.stat.trip_count,e.jsx("br",{}),"Mesafe: ",($=d.stat.total_distance_km)==null?void 0:$.toFixed(0)," km"]})})},M)})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[e.jsx("h3",{className:"font-medium text-sm mb-3",children:"Harita Aklamalar"}),e.jsxs("div",{className:"flex flex-wrap gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-1 bg-blue-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"1-10 Sefer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-1 bg-orange-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"11-20 Sefer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-1 bg-red-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"20+ Sefer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500 opacity-60"}),e.jsx("span",{className:"text-gray-600",children:"l (ofr saysna gre boyut)"})]})]})]})]}),!z&&t==="stats"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"l Bazl statistikler"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"l"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ofr"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sefer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesafe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort. Fiyat"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:k.filter(d=>i==="all"||d.province===i).slice(0,25).map((d,M)=>{var $,O;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:d.province}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:d.driver_count}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:d.trip_count}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[($=d.total_distance_km)==null?void 0:$.toFixed(0)," km"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(O=d.avg_price)==null?void 0:O.toFixed(0)," "]})]},M)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Gnlk statistikler"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tarih"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ofr"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sefer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesafe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort. Fiyat"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ciro"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:T.slice(0,30).map((d,M)=>{var $,O,P;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 whitespace-nowrap",children:new Date(d.stat_date).toLocaleDateString("tr-TR")}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:d.active_drivers}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:d.total_trips}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[($=d.total_distance_km)==null?void 0:$.toFixed(0)," km"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(O=d.avg_price)==null?void 0:O.toFixed(0)," "]}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-green-600",children:[(P=d.total_revenue)==null?void 0:P.toFixed(0)," "]})]},M)})})]})})]})]}),!z&&t==="prices"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"ehirleraras Fiyat Matrisi"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Gzergah bazl ortalama fiyatlar ve gvenilirlik seviyeleri"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nereden"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nereye"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sefer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesafe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort. Fiyat"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"/Km"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gven"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:f.map((d,M)=>{var $,O,P;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:d.from_province}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:d.to_province}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:d.trip_count}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[($=d.avg_distance_km)==null?void 0:$.toFixed(0)," km"]}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-green-600",children:[(O=d.avg_price)==null?void 0:O.toFixed(0)," "]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(P=d.price_per_km_avg)==null?void 0:P.toFixed(2)," "]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d.confidence_level==="high_confidence"?"bg-green-100 text-green-700":d.confidence_level==="medium_confidence"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:d.confidence_level==="high_confidence"?"Yksek":d.confidence_level==="medium_confidence"?"Orta":"Dk"})})]},M)})})]})}),f.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Ft,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Henz yeterli fiyat verisi yok"})]})]})]})}function sl(){var _,F,R;const t=Be(),[s,a]=r.useState("cargo"),[n,i]=r.useState(null),[l,m]=r.useState(null),{data:o}=q({queryKey:["cargo-types"],queryFn:()=>C.get("/admin/config/cargo-types")}),{data:x}=q({queryKey:["vehicle-brands"],queryFn:()=>C.get("/admin/config/vehicle-brands")}),{data:p}=q({queryKey:["trailer-types"],queryFn:()=>C.get("/admin/config/trailer-types")}),{data:y}=q({queryKey:["mobile-config"],queryFn:()=>C.get("/admin/config/mobile")}),v=((_=o==null?void 0:o.data)==null?void 0:_.cargo_types)||[],E=((F=x==null?void 0:x.data)==null?void 0:F.vehicle_brands)||[],u=((R=p==null?void 0:p.data)==null?void 0:R.trailer_types)||[],N=(y==null?void 0:y.data)||null,b=Y({mutationFn:g=>g.action==="delete"?C.delete(`/admin/config/cargo-types/${g.id}`):g.id?C.put(`/admin/config/cargo-types/${g.id}`,g.item):C.post("/admin/config/cargo-types",g.item),onSuccess:()=>{t.invalidateQueries({queryKey:["cargo-types"]}),L.success("Kaydedildi"),i(null)},onError:()=>L.error("Hata olutu")}),k=Y({mutationFn:g=>g.action==="delete"?C.delete(`/admin/config/vehicle-brands/${g.id}`):g.id?C.put(`/admin/config/vehicle-brands/${g.id}`,g.item):C.post("/admin/config/vehicle-brands",g.item),onSuccess:()=>{t.invalidateQueries({queryKey:["vehicle-brands"]}),L.success("Kaydedildi"),i(null)},onError:()=>L.error("Hata olutu")}),c=Y({mutationFn:g=>g.action==="delete"?C.delete(`/admin/config/vehicle-models/${g.id}`):g.id?C.put(`/admin/config/vehicle-models/${g.id}`,g.item):C.post(`/admin/config/vehicle-brands/${g.brandId}/models`,g.item),onSuccess:()=>{t.invalidateQueries({queryKey:["vehicle-brands"]}),L.success("Kaydedildi"),m(null)},onError:()=>L.error("Hata olutu")}),f=Y({mutationFn:g=>g.action==="delete"?C.delete(`/admin/config/trailer-types/${g.id}`):g.id?C.put(`/admin/config/trailer-types/${g.id}`,g.item):C.post("/admin/config/trailer-types",g.item),onSuccess:()=>{t.invalidateQueries({queryKey:["trailer-types"]}),L.success("Kaydedildi"),i(null)},onError:()=>L.error("Hata olutu")}),z=Y({mutationFn:g=>C.put("/admin/config/mobile",g),onSuccess:()=>{t.invalidateQueries({queryKey:["mobile-config"]}),L.success("Mobil ayarlar kaydedildi")},onError:()=>L.error("Mobil ayarlar kaydedilemedi")}),T=(g,w)=>{window.confirm("Silmek istediinize emin misiniz?")&&(g==="cargo"?b.mutate({id:w,item:{},action:"delete"}):g==="vehicles"?k.mutate({id:w,item:{},action:"delete"}):f.mutate({id:w,item:{},action:"delete"}))},A=[{id:"cargo",label:"Yk Tipleri",icon:br,count:v.length},{id:"vehicles",label:"Ara Markalar",icon:ee,count:E.length},{id:"trailers",label:"Dorse Tipleri",icon:Zr,count:u.length},{id:"mobile",label:"Mobil Ayarlar",icon:Se}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Uygulama Ayarlar"}),e.jsx("p",{className:"text-gray-500",children:"Mobil uygulamada grntlenecek seenekleri ynetin"})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:A.map(g=>e.jsxs("button",{onClick:()=>a(g.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${s===g.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(g.icon,{className:"h-5 w-5"}),g.label,g.count!==void 0&&e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:g.count})]},g.id))})}),s==="cargo"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold",children:"Yk Tipleri"}),e.jsxs("button",{onClick:()=>i({type:"cargo",item:{}}),className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(De,{className:"h-5 w-5"}),"Yeni Ekle"]})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sra"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aklama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"kon"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"lemler"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:v.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:g.sort_order}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:g.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:g.description}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:g.icon}),e.jsxs("td",{className:"px-6 py-4 text-right",children:[e.jsx("button",{onClick:()=>i({type:"cargo",item:g}),className:"text-gray-500 hover:text-primary-600 p-1",children:e.jsx(fe,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>T("cargo",g.id),className:"text-gray-500 hover:text-red-600 p-1 ml-2",children:e.jsx(be,{className:"h-5 w-5"})})]})]},g.id))})]})]}),s==="vehicles"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold",children:"Ara Markalar"}),e.jsxs("button",{onClick:()=>i({type:"vehicles",item:{}}),className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(De,{className:"h-5 w-5"}),"Yeni Marka"]})]}),E.map(g=>{var w;return e.jsxs("div",{className:"border-b last:border-b-0",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"font-medium",children:g.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",((w=g.models)==null?void 0:w.length)||0," model)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>m({brandId:g.id}),className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Model Ekle"}),e.jsx("button",{onClick:()=>i({type:"vehicles",item:g}),className:"text-gray-500 hover:text-primary-600 p-1",children:e.jsx(fe,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>T("vehicles",g.id),className:"text-gray-500 hover:text-red-600 p-1",children:e.jsx(be,{className:"h-5 w-5"})})]})]}),g.models&&g.models.length>0&&e.jsx("div",{className:"p-4 pl-12 grid grid-cols-2 md:grid-cols-4 gap-2",children:g.models.map(D=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-100 rounded px-3 py-1",children:[e.jsx("span",{className:"text-sm",children:D.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>m({brandId:g.id,model:D}),className:"text-gray-400 hover:text-primary-600 p-1",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{window.confirm("Modeli silmek istiyor musunuz?")&&c.mutate({brandId:g.id,id:D.id,item:{},action:"delete"})},className:"text-gray-400 hover:text-red-600 p-1",children:e.jsx(be,{className:"h-4 w-4"})})]})]},D.id))})]},g.id)})]})}),s==="trailers"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold",children:"Dorse Tipleri"}),e.jsxs("button",{onClick:()=>i({type:"trailers",item:{}}),className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(De,{className:"h-5 w-5"}),"Yeni Ekle"]})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sra"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aklama"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"lemler"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:g.sort_order}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:g.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:g.description}),e.jsxs("td",{className:"px-6 py-4 text-right",children:[e.jsx("button",{onClick:()=>i({type:"trailers",item:g}),className:"text-gray-500 hover:text-primary-600 p-1",children:e.jsx(fe,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>T("trailers",g.id),className:"text-gray-500 hover:text-red-600 p-1 ml-2",children:e.jsx(be,{className:"h-5 w-5"})})]})]},g.id))})]})]}),s==="mobile"&&N&&e.jsx(nl,{config:N,onSave:g=>z.mutate(g),isLoading:z.isPending}),n&&e.jsx(al,{type:n.type,item:n.item,onClose:()=>i(null),onSave:g=>{const w=g.id?"update":"create";n.type==="cargo"?b.mutate({id:g.id,item:g,action:w}):n.type==="vehicles"?k.mutate({id:g.id,item:g,action:w}):f.mutate({id:g.id,item:g,action:w})}}),l&&e.jsx(rl,{brandId:l.brandId,model:l.model,onClose:()=>m(null),onSave:g=>{var w;c.mutate({brandId:l.brandId,id:(w=l.model)==null?void 0:w.id,item:g,action:l.model?"update":"create"})}})]})}function al({type:t,item:s,onClose:a,onSave:n}){const[i,l]=r.useState({name:s.name||"",description:s.description||"",icon:s.icon||"",sort_order:s.sort_order||0,is_active:s.is_active??!0}),m=x=>{x.preventDefault(),n({...i,id:s.id})},o=t==="cargo"?s.id?"Yk Tipi Dzenle":"Yeni Yk Tipi":t==="vehicles"?s.id?"Marka Dzenle":"Yeni Marka":s.id?"Dorse Tipi Dzenle":"Yeni Dorse Tipi";return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:o}),e.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(Ye,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad"}),e.jsx("input",{type:"text",required:!0,value:i.name,onChange:x=>l(p=>({...p,name:x.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),t!=="vehicles"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aklama"}),e.jsx("textarea",{value:i.description,onChange:x=>l(p=>({...p,description:x.target.value})),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),t==="cargo"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"kon"}),e.jsx("input",{type:"text",value:i.icon,onChange:x=>l(p=>({...p,icon:x.target.value})),placeholder:"food, construction, etc.",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sra"}),e.jsx("input",{type:"number",value:i.sort_order,onChange:x=>l(p=>({...p,sort_order:parseInt(x.target.value)||0})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Kaydet"})]})]})]})]})})}function rl({brandId:t,model:s,onClose:a,onSave:n}){const[i,l]=r.useState((s==null?void 0:s.name)||""),m=o=>{o.preventDefault(),n({name:i,is_active:!0})};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:s?"Model Dzenle":"Yeni Model"}),e.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(Ye,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Ad"}),e.jsx("input",{type:"text",required:!0,value:i,onChange:o=>l(o.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Actros, FH16, etc."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Kaydet"})]})]})]})]})})}function nl({config:t,onSave:s,isLoading:a}){const[n,i]=r.useState(t),l=o=>{o.preventDefault(),s(n)},m=(o,x)=>{i(p=>({...p,[o]:x}))};return e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Konum Gncelleme Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hareket Gncelleme Aral (sn)"}),e.jsx("input",{type:"number",value:n.location_update_interval_moving,onChange:o=>m("location_update_interval_moving",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hareket halindeyken konum gncelleme skl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sabit Gncelleme Aral (sn)"}),e.jsx("input",{type:"number",value:n.location_update_interval_stationary,onChange:o=>m("location_update_interval_stationary",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Durunca konum gncelleme skl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Yer Deiiklii (m)"}),e.jsx("input",{type:"number",value:n.minimum_displacement_meters,onChange:o=>m("minimum_displacement_meters",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Konum gncellemesi iin minimum hareket mesafesi"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hzl Hareket Eii (km/sa)"}),e.jsx("input",{type:"number",value:n.fast_moving_threshold_kmh,onChange:o=>m("fast_moving_threshold_kmh",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bu hzn zerinde daha sk gncelleme"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hzl Hareket Aral (sn)"}),e.jsx("input",{type:"number",value:n.fast_moving_interval_seconds,onChange:o=>m("fast_moving_interval_seconds",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hzl harekette gncelleme skl"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Pil Optimizasyonu"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"battery_optimization",checked:n.battery_optimization_enabled,onChange:o=>m("battery_optimization_enabled",o.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"battery_optimization",className:"ml-2 text-sm font-medium text-gray-700",children:"Pil Optimizasyonu Aktif"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konum Hassasiyeti"}),e.jsxs("select",{value:n.location_accuracy_mode,onChange:o=>m("location_accuracy_mode",o.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"high",children:"Yksek (GPS)"}),e.jsx("option",{value:"balanced",children:"Dengeli (GPS + A)"}),e.jsx("option",{value:"low_power",children:"Dk G (A)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dk Pil Eii (%)"}),e.jsx("input",{type:"number",min:"5",max:"50",value:n.low_battery_threshold,onChange:o=>m("low_battery_threshold",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dk Pil Aral (sn)"}),e.jsx("input",{type:"number",value:n.low_battery_interval_seconds,onChange:o=>m("low_battery_interval_seconds",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dk pilde gncelleme skl"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Offline Mod"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"offline_mode",checked:n.offline_mode_enabled,onChange:o=>m("offline_mode_enabled",o.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"offline_mode",className:"ml-2 text-sm font-medium text-gray-700",children:"Offline Mod Aktif"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"sync_wifi",checked:n.sync_on_wifi_only,onChange:o=>m("sync_on_wifi_only",o.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"sync_wifi",className:"ml-2 text-sm font-medium text-gray-700",children:"Sadece WiFi'da Senkronize Et"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maks. Offline Konum Says"}),e.jsx("input",{type:"number",value:n.max_offline_locations,onChange:o=>m("max_offline_locations",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Aral (dk)"}),e.jsx("input",{type:"number",value:n.offline_sync_interval_minutes,onChange:o=>m("offline_sync_interval_minutes",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maks. Offline Veri (MB)"}),e.jsx("input",{type:"number",value:n.max_offline_data_size_mb,onChange:o=>m("max_offline_data_size_mb",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Aktivite Alglama"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"activity_recognition",checked:n.activity_recognition_enabled,onChange:o=>m("activity_recognition_enabled",o.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"activity_recognition",className:"ml-2 text-sm font-medium text-gray-700",children:"Aktivite Alglama Aktif"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"stop_detection",checked:n.stop_detection_enabled,onChange:o=>m("stop_detection_enabled",o.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"stop_detection",className:"ml-2 text-sm font-medium text-gray-700",children:"Durak Alglama Aktif"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durak Alglama Yarap (m)"}),e.jsx("input",{type:"number",value:n.stop_detection_radius_meters,onChange:o=>m("stop_detection_radius_meters",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min. Durak Sresi (dk)"}),e.jsx("input",{type:"number",value:n.stop_detection_min_minutes,onChange:o=>m("stop_detection_min_minutes",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Genel Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heartbeat Aral (dk)"}),e.jsx("input",{type:"number",value:n.heartbeat_interval_minutes,onChange:o=>m("heartbeat_interval_minutes",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uygulama aktiflik kontrol skl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Veri Saklama Sresi (gn)"}),e.jsx("input",{type:"number",value:n.data_retention_days,onChange:o=>m("data_retention_days",parseInt(o.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Uygulama Versiyonu"}),e.jsx("input",{type:"text",value:n.min_app_version,onChange:o=>m("min_app_version",o.target.value),placeholder:"1.0.0",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"force_update",checked:n.force_update_enabled,onChange:o=>m("force_update_enabled",o.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"force_update",className:"ml-2 text-sm font-medium text-gray-700",children:"Zorunlu Gncelleme Aktif"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Kaydediliyor...":"Ayarlar Kaydet"})})]})}const lt=[{id:"yes_no",name:"Evet/Hayr"},{id:"multiple_choice",name:"oktan Semeli"},{id:"text",name:"Metin"},{id:"number",name:"Say"},{id:"price",name:"Fiyat (TL)"}],_t={draft:{label:"Taslak",color:"bg-gray-100 text-gray-800"},pending_approval:{label:"Onay Bekliyor",color:"bg-yellow-100 text-yellow-800"},approved:{label:"Onayland",color:"bg-blue-100 text-blue-800"},sent:{label:"Gnderildi",color:"bg-green-100 text-green-800"},answered:{label:"Cevapland",color:"bg-purple-100 text-purple-800"},expired:{label:"Sresi Doldu",color:"bg-red-100 text-red-800"},rejected:{label:"Reddedildi",color:"bg-red-100 text-red-800"}},cs={Tm:[],Marmara:["stanbul","Kocaeli","Bursa","Balkesir","anakkale","Edirne","Krklareli","Tekirda","Sakarya","Yalova","Bilecik"],Ege:["zmir","Aydn","Denizli","Mula","Manisa","Afyonkarahisar","Ktahya","Uak"],Akdeniz:["Antalya","Adana","Mersin","Hatay","Kahramanmara","Osmaniye","Burdur","Isparta"]," Anadolu":["Ankara","Konya","Kayseri","Eskiehir","Sivas","Yozgat","Krkkale","Aksaray","Nide","Nevehir","Krehir","Karaman","ankr"],Karadeniz:["Samsun","Trabzon","Ordu","Giresun","Rize","Artvin","Gmhane","Bayburt","Tokat","Amasya","orum","Sinop","Kastamonu","Bartn","Karabk","Zonguldak","Bolu","Dzce"],"Dou Anadolu":["Erzurum","Van","Malatya","Elaz","Ar","Kars","Idr","Ardahan","Mu","Bitlis","Bingl","Tunceli","Erzincan"],"Gneydou Anadolu":["Gaziantep","Diyarbakr","anlurfa","Mardin","Batman","Siirt","rnak","Adyaman","Kilis"]};function ll(){var ae,d,M,$,O,P;const t=Be(),[s,a]=r.useState("pending"),[n,i]=r.useState(null),[l,m]=r.useState(!1),[o,x]=r.useState(!1),[p,y]=r.useState(null),[v,E]=r.useState("Tm"),[u,N]=r.useState("all"),[b,k]=r.useState([]),{data:c,isLoading:f}=q({queryKey:["pending-questions"],queryFn:()=>xe.getPendingApproval(),enabled:s==="pending"}),{data:z}=q({queryKey:["drivers-on-trip"],queryFn:()=>xe.getDriversOnTrip(),enabled:s==="drivers"}),{data:T}=q({queryKey:["idle-drivers"],queryFn:()=>xe.getIdleDrivers(),enabled:s==="drivers"}),{data:A}=q({queryKey:["all-drivers"],queryFn:()=>ve.getAll({limit:100}),enabled:s==="bulk"}),{data:_}=q({queryKey:["question-stats"],queryFn:()=>xe.getStats()}),F=Y({mutationFn:({id:S,approved:H,reason:J})=>xe.approve(S,H,J),onSuccess:()=>{t.invalidateQueries({queryKey:["pending-questions"]}),t.invalidateQueries({queryKey:["question-stats"]}),L.success("lem baarl")},onError:()=>L.error("lem baarsz")}),R=Y({mutationFn:S=>xe.send(S),onSuccess:()=>{t.invalidateQueries({queryKey:["pending-questions"]}),L.success("Soru gnderildi")},onError:()=>L.error("Gnderilemedi")}),g=Y({mutationFn:S=>xe.delete(S),onSuccess:()=>{t.invalidateQueries({queryKey:["pending-questions"]}),t.invalidateQueries({queryKey:["question-stats"]}),L.success("Soru silindi")},onError:()=>L.error("Silinemedi - Sadece taslak durumundaki sorular silinebilir")}),w=Y({mutationFn:({id:S,data:H})=>xe.update(S,H),onSuccess:()=>{t.invalidateQueries({queryKey:["pending-questions"]}),L.success("Soru gncellendi"),x(!1),y(null)},onError:()=>L.error("Gncellenemedi")}),D=Y({mutationFn:S=>xe.createBulk(S),onSuccess:S=>{var J;t.invalidateQueries({queryKey:["pending-questions"]}),t.invalidateQueries({queryKey:["question-stats"]});const H=((J=S==null?void 0:S.data)==null?void 0:J.created_count)||b.length;L.success(`${H} ofre soru gnderildi`),k([])},onError:()=>L.error("Toplu soru gnderilemedi")}),I=((ae=c==null?void 0:c.data)==null?void 0:ae.questions)||[],V=((d=z==null?void 0:z.data)==null?void 0:d.drivers)||[],U=((M=T==null?void 0:T.data)==null?void 0:M.drivers)||[],B=(($=A==null?void 0:A.data)==null?void 0:$.drivers)||[],Z=((O=_==null?void 0:_.data)==null?void 0:O.stats)||{};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Akll Soru Sistemi"}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-3 py-1.5 sm:px-4 sm:py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 text-xs sm:text-sm self-start sm:self-auto",children:[e.jsx(De,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Yeni Soru"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-yellow-100 rounded-lg",children:e.jsx(ce,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Onay Bekleyen"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:Z.pending_approval||0})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:e.jsx(Nt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Cevap Oran"}),e.jsxs("p",{className:"text-lg sm:text-2xl font-bold",children:[((P=Z.answer_rate)==null?void 0:P.toFixed(1))||0,"%"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-orange-100 rounded-lg",children:e.jsx(ee,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Seferde"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:V.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:e.jsx(en,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Beklemede"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:U.length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsxs("nav",{className:"flex -mb-px min-w-max",children:[e.jsxs("button",{onClick:()=>a("pending"),className:`px-3 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 flex items-center gap-1 sm:gap-2 whitespace-nowrap ${s==="pending"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Onay Bekleyenler"}),e.jsx("span",{className:"sm:hidden",children:"Onay"}),"(",I.length,")"]}),e.jsxs("button",{onClick:()=>a("history"),className:`px-3 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 flex items-center gap-1 sm:gap-2 whitespace-nowrap ${s==="history"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Soru Gemii"}),e.jsx("span",{className:"sm:hidden",children:"Gemi"})]}),e.jsxs("button",{onClick:()=>a("bulk"),className:`px-3 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 flex items-center gap-1 sm:gap-2 whitespace-nowrap ${s==="bulk"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(As,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Toplu Gnder"}),e.jsx("span",{className:"sm:hidden",children:"Toplu"})]}),e.jsxs("button",{onClick:()=>a("drivers"),className:`px-3 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 flex items-center gap-1 sm:gap-2 whitespace-nowrap ${s==="drivers"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"ofr Durumlar"}),e.jsx("span",{className:"sm:hidden",children:"ofrler"})]})]})}),e.jsxs("div",{className:"p-3 sm:p-6",children:[s==="pending"&&e.jsx("div",{className:"space-y-3 sm:space-y-4",children:f?e.jsx("div",{className:"flex justify-center py-6 sm:py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-primary-600"})}):I.length===0?e.jsx("div",{className:"text-center py-6 sm:py-8 text-gray-500 text-sm",children:"Onay bekleyen soru bulunmuyor"}):I.map(S=>{var H,J,X;return e.jsx("div",{className:"border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-2 flex-wrap",children:[e.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-xs ${(H=_t[S.status])==null?void 0:H.color}`,children:(J=_t[S.status])==null?void 0:J.label}),e.jsx("span",{className:"text-xs text-gray-500",children:S.source_type==="ai_generated"?" AI":S.source_type==="rule_based"?" Kural":" Manuel"}),e.jsx("span",{className:"text-xs bg-gray-100 px-1.5 sm:px-2 py-0.5 rounded hidden sm:inline",children:((X=lt.find(G=>G.id===S.question_type))==null?void 0:X.name)||S.question_type}),S.ai_confidence&&e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-1.5 sm:px-2 py-0.5 rounded hidden sm:inline",children:["%",(S.ai_confidence*100).toFixed(0)]})]}),e.jsx("p",{className:"font-medium text-gray-900 text-sm sm:text-lg",children:S.question_text}),S.options&&S.options.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:S.options.map((G,je)=>e.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:G},je))}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:[" ",S.driver_name," ",S.driver_surname,S.driver_province&&` |  ${S.driver_province}`]}),S.ai_reasoning&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1 italic bg-gray-50 p-2 rounded hidden sm:block",children:[" ",S.ai_reasoning]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 sm:mt-2",children:new Date(S.created_at).toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"flex sm:flex-col gap-1 sm:ml-4",children:[["draft","pending_approval","approved"].includes(S.status)&&e.jsx("button",{onClick:()=>{y(S),x(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Dzenle",children:e.jsx(fe,{className:"h-5 w-5"})}),S.status==="draft"&&e.jsx("button",{onClick:()=>{confirm("Bu soruyu silmek istediinize emin misiniz?")&&g.mutate(S.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Sil",children:e.jsx(be,{className:"h-5 w-5"})}),S.status==="pending_approval"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F.mutate({id:S.id,approved:!0}),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Onayla",children:e.jsx(Nt,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>{const G=prompt("Red sebebi:");G&&F.mutate({id:S.id,approved:!1,reason:G})},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Reddet",children:e.jsx(nn,{className:"h-5 w-5"})})]}),S.status==="approved"&&e.jsx("button",{onClick:()=>R.mutate(S.id),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg",title:"imdi Gnder",children:e.jsx(Mt,{className:"h-5 w-5"})})]})]})},S.id)})}),s==="drivers"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-orange-500"}),"Seferde Olan ofrler"]}),e.jsx("div",{className:"space-y-2",children:V.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"Seferde ofr yok"}):V.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[S.name," ",S.surname]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Sefer sresi: ",Math.round(S.trip_duration_minutes)," dk",S.current_speed&&` | Hz: ${S.current_speed.toFixed(0)} km/s`]})]}),e.jsx("button",{onClick:()=>{i(S),m(!0)},className:"px-3 py-1 bg-orange-500 text-white text-sm rounded hover:bg-orange-600",children:"Soru Sor"})]},S.driver_id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-blue-500"}),"Beklemede Olan ofrler"]}),e.jsx("div",{className:"space-y-2",children:U.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"Beklemede ofr yok"}):U.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[S.name," ",S.surname]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[S.idle_hours?`${S.idle_hours.toFixed(1)} saat beklemede`:"Konum yok",S.home_province&&` | ${S.home_province}`]})]}),e.jsx("button",{onClick:()=>{i(S),m(!0)},className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",children:"Soru Sor"})]},S.driver_id))})]})]}),s==="history"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtrele:"})]}),e.jsxs("select",{value:u,onChange:S=>N(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"Tm Durumlar"}),e.jsx("option",{value:"sent",children:"Gnderildi"}),e.jsx("option",{value:"answered",children:"Cevapland"}),e.jsx("option",{value:"expired",children:"Sresi Doldu"}),e.jsx("option",{value:"rejected",children:"Reddedildi"})]}),e.jsx("select",{value:v,onChange:S=>E(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-1 text-sm",children:Object.keys(cs).map(S=>e.jsx("option",{value:S,children:S},S))})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ns,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{children:"Soru gemii iin bir ofr sein"}),e.jsx("p",{className:"text-sm mt-2",children:"ofr Durumlar sekmesinden bir ofre tklayarak o ofrn soru gemiini grebilirsiniz."})]})]}),s==="bulk"&&e.jsx(ol,{allDrivers:B,selectedDrivers:b,setSelectedDrivers:k,onSend:D.mutate,isLoading:D.isPending,turkeyRegions:cs})]})]}),l&&e.jsx(il,{driver:n,onClose:()=>{m(!1),i(null)},onSuccess:()=>{t.invalidateQueries({queryKey:["pending-questions"]}),m(!1),i(null)}}),o&&p&&e.jsx(dl,{question:p,onClose:()=>{x(!1),y(null)},onSave:S=>w.mutate({id:p.id,data:S}),isLoading:w.isPending})]})}function il({driver:t,onClose:s,onSuccess:a}){const[n,i]=r.useState(""),[l,m]=r.useState("yes_no"),[o,x]=r.useState(["",""]),[p,y]=r.useState([]),[v,E]=r.useState(!0),[u,N]=r.useState(!1),b=[{text:"u an yknz var m?",type:"yes_no",followUps:[{condition:{answer:"yes"},question:"Yknz nereye?",type:"text"},{condition:{answer:"no"},question:"Yk aryor musunuz?",type:"yes_no"}]},{text:"Msait misiniz?",type:"yes_no",followUps:[{condition:{answer:"yes"},question:"Hangi blgeden yk almak istersiniz?",type:"text"}]},{text:"Son seferiniz iin ne kadar cret aldnz?",type:"price",followUps:[]},{text:"Yol durumu nasl?",type:"multiple_choice",options:["Ak","Youn","ok Youn","Kapal"],followUps:[]}],k=()=>t?"id"in t?t.id:"driver_id"in t?t.driver_id:null:null,c=()=>t?`${t.name} ${t.surname}`:"",f=async()=>{const F=k();if(!F||!n){L.error("ofr ve soru metni gerekli");return}N(!0);try{await xe.create({driver_id:F,question_text:n,question_type:l,options:l==="multiple_choice"?o.filter(R=>R):void 0,follow_up_questions:p.length>0?p:void 0,send_immediately:v,priority:50}),L.success("Soru oluturuldu"),a()}catch{L.error("Soru oluturulamad")}finally{N(!1)}},z=F=>{i(F.text),m(F.type),F.options&&x(F.options),y(F.followUps)},T=()=>{y([...p,{condition:{answer:"yes"},question:"",type:"text"}])},A=F=>{y(p.filter((R,g)=>g!==F))},_=(F,R,g)=>{const w=[...p];R==="condition"?w[F].condition={answer:g}:R==="question"?w[F].question=g:R==="type"&&(w[F].type=g),y(w)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h2",{className:"text-xl font-semibold",children:["Yeni Soru Olutur",t&&e.jsxs("span",{className:"text-gray-500 text-base ml-2",children:["- ",c()]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hazr Sorular"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((F,R)=>e.jsxs("button",{onClick:()=>z(F),className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full hover:bg-gray-200",children:[F.text.substring(0,30),"..."]},R))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Metni *"}),e.jsx("textarea",{value:n,onChange:F=>i(F.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Sorunuzu yazn..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Tipi"}),e.jsx("select",{value:l,onChange:F=>m(F.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:lt.map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))})]}),l==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seenekler"}),e.jsxs("div",{className:"space-y-2",children:[o.map((F,R)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:F,onChange:g=>{const w=[...o];w[R]=g.target.value,x(w)},className:"flex-1 border border-gray-300 rounded-lg px-3 py-2",placeholder:`Seenek ${R+1}`}),o.length>2&&e.jsx("button",{onClick:()=>x(o.filter((g,w)=>w!==R)),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:"Sil"})]},R)),e.jsx("button",{onClick:()=>x([...o,""]),className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Seenek Ekle"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Takip Sorular (Koullu)"}),e.jsx("button",{onClick:T,className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Takip Sorusu Ekle"})]}),p.length>0&&e.jsx("div",{className:"space-y-3 border rounded-lg p-3 bg-gray-50",children:p.map((F,R)=>e.jsxs("div",{className:"flex flex-col gap-2 p-3 bg-white rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Eer cevap"}),e.jsxs("select",{value:F.condition.answer,onChange:g=>_(R,"condition",g.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"yes",children:"Evet"}),e.jsx("option",{value:"no",children:"Hayr"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"ise:"}),e.jsx("button",{onClick:()=>A(R),className:"ml-auto text-red-600 text-sm",children:"Kaldr"})]}),e.jsx("input",{type:"text",value:F.question,onChange:g=>_(R,"question",g.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"Takip sorusu..."}),e.jsx("select",{value:F.type,onChange:g=>_(R,"type",g.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:lt.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))})]},R))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"sendImmediately",checked:v,onChange:F=>E(F.target.checked),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"sendImmediately",className:"text-sm text-gray-700",children:"Hemen gnder (onay bekleme)"})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsxs("button",{onClick:f,disabled:u||!n||!k(),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[u?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Mt,{className:"h-5 w-5"}),v?"Gnder":"Olutur"]})]})]})})}function dl({question:t,onClose:s,onSave:a,isLoading:n}){var u,N;const[i,l]=r.useState(t.question_text),[m,o]=r.useState(t.question_type),[x,p]=r.useState(t.options||["",""]),[y,v]=r.useState(t.priority),E=()=>{const b={question_text:i,question_type:m,priority:y};m==="multiple_choice"&&(b.options=x.filter(k=>k)),a(b)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full mx-4",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Soru Dzenle"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${(u=_t[t.status])==null?void 0:u.color}`,children:(N=_t[t.status])==null?void 0:N.label})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Metni"}),e.jsx("textarea",{value:i,onChange:b=>l(b.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Tipi"}),e.jsx("select",{value:m,onChange:b=>o(b.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:lt.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))})]}),m==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seenekler"}),e.jsxs("div",{className:"space-y-2",children:[x.map((b,k)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:c=>{const f=[...x];f[k]=c.target.value,p(f)},className:"flex-1 border border-gray-300 rounded-lg px-3 py-2",placeholder:`Seenek ${k+1}`}),x.length>2&&e.jsx("button",{onClick:()=>p(x.filter((c,f)=>f!==k)),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:"Sil"})]},k)),e.jsx("button",{onClick:()=>p([...x,""]),className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Seenek Ekle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ncelik (1-100)"}),e.jsx("input",{type:"number",min:"1",max:"100",value:y,onChange:b=>v(parseInt(b.target.value)||50),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ofr:"})," ",t.driver_name," ",t.driver_surname]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Oluturulma:"})," ",new Date(t.created_at).toLocaleString("tr-TR")]})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsxs("button",{onClick:E,disabled:n||!i,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[n?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Nt,{className:"h-5 w-5"}),"Kaydet"]})]})]})})}function ol({allDrivers:t,selectedDrivers:s,setSelectedDrivers:a,onSend:n,isLoading:i,turkeyRegions:l}){const[m,o]=r.useState(""),[x,p]=r.useState("yes_no"),[y,v]=r.useState(["",""]),[E,u]=r.useState("Tm"),[N,b]=r.useState(!0),k=t.filter(_=>{if(E==="Tm")return!0;const F=l[E]||[];return _.province&&F.includes(_.province)}),c=_=>{s.includes(_)?a(s.filter(F=>F!==_)):a([...s,_])},f=()=>{a(k.map(_=>_.id))},z=()=>{a([])},T=()=>{s.length===0||!m||(n({driver_ids:s,question_text:m,question_type:x,options:x==="multiple_choice"?y.filter(_=>_):void 0,send_immediately:N}),o(""))},A=[{text:"u an msait misiniz?",type:"yes_no"},{text:"Yknz var m?",type:"yes_no"},{text:"Hangi blgeden yk almak istersiniz?",type:"text"},{text:"Yol durumu nasl?",type:"multiple_choice",options:["Ak","Youn","ok Youn","Kapal"]}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5 text-primary-500"}),"Toplu Soru Gnder"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Birden fazla ofre ayn anda soru gnderin"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm bg-primary-100 text-primary-700 px-3 py-1 rounded-full",children:[s.length," ofr seili"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-medium",children:"ofr Sein"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("select",{value:E,onChange:_=>u(_.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:Object.keys(l).map(_=>e.jsx("option",{value:_,children:_},_))})})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:f,className:"text-xs text-primary-600 hover:text-primary-700",children:["Tmn Se (",k.length,")"]}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{onClick:z,className:"text-xs text-gray-600 hover:text-gray-700",children:"Seimi Temizle"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1",children:k.map(_=>e.jsxs("label",{className:`flex items-center gap-3 p-2 rounded cursor-pointer hover:bg-gray-50 ${s.includes(_.id)?"bg-primary-50":""}`,children:[e.jsx("input",{type:"checkbox",checked:s.includes(_.id),onChange:()=>c(_.id),className:"rounded border-gray-300 text-primary-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:[_.name," ",_.surname]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[_.phone," ",_.province&&`| ${_.province}`]})]})]},_.id))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Soru"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Hazr Sorular"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map((_,F)=>e.jsxs("button",{onClick:()=>{o(_.text),p(_.type),_.options&&v(_.options)},className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded hover:bg-gray-200",children:[_.text.substring(0,25),"..."]},F))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Metni *"}),e.jsx("textarea",{value:m,onChange:_=>o(_.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Sorunuzu yazn..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Tipi"}),e.jsx("select",{value:x,onChange:_=>p(_.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:lt.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))})]}),x==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seenekler"}),e.jsxs("div",{className:"space-y-2",children:[y.map((_,F)=>e.jsx("input",{type:"text",value:_,onChange:R=>{const g=[...y];g[F]=R.target.value,v(g)},className:"w-full border border-gray-300 rounded px-3 py-1 text-sm",placeholder:`Seenek ${F+1}`},F)),e.jsx("button",{onClick:()=>v([...y,""]),className:"text-xs text-primary-600",children:"+ Seenek Ekle"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"bulkSendImmediately",checked:N,onChange:_=>b(_.target.checked),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"bulkSendImmediately",className:"text-sm text-gray-700",children:"Hemen gnder"})]}),e.jsxs("button",{onClick:T,disabled:i||s.length===0||!m,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[i?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Mt,{className:"h-5 w-5"}),s.length," ofre Gnder"]})]})]})]})]})}const Pt=[{id:"announcement",name:"Duyuru",color:"bg-blue-100 text-blue-800"},{id:"alert",name:"Uyar",color:"bg-red-100 text-red-800"},{id:"reminder",name:"Hatrlatma",color:"bg-yellow-100 text-yellow-800"},{id:"promotion",name:"Promosyon",color:"bg-green-100 text-green-800"},{id:"system",name:"Sistem",color:"bg-gray-100 text-gray-800"}],Fs=[{id:"all",name:"Tm ofrler"},{id:"active",name:"Aktif ofrler"},{id:"inactive",name:"Pasif ofrler"},{id:"on_trip",name:"Seferde Olanlar"},{id:"at_home",name:"Evde Olanlar"},{id:"new",name:"Yeni Kaytlar"}];function cl(){var b,k;const t=Be(),[s,a]=r.useState(!1),[n,i]=r.useState(null),{data:l,isLoading:m}=q({queryKey:["notification-templates"],queryFn:()=>jt.getAll()}),{data:o}=q({queryKey:["trigger-types"],queryFn:()=>Ka.getAll()}),x=Y({mutationFn:c=>jt.delete(c),onSuccess:()=>{t.invalidateQueries({queryKey:["notification-templates"]}),L.success("ablon silindi")},onError:()=>L.error("Silinemedi")}),p=((b=l==null?void 0:l.data)==null?void 0:b.templates)||[],y=((k=o==null?void 0:o.data)==null?void 0:k.trigger_types)||[],v=c=>Pt.find(f=>f.id===c)||Pt[0],E=c=>{var f;return((f=Fs.find(z=>z.id===c))==null?void 0:f.name)||c},u=c=>{i(c),a(!0)},N=c=>{confirm("Bu ablonu silmek istediinize emin misiniz?")&&x.mutate(c)};return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bildirim ablonlar"}),e.jsxs("button",{onClick:()=>{i(null),a(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[e.jsx(De,{className:"h-5 w-5"}),"Yeni ablon"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:p.length===0?e.jsx("div",{className:"col-span-2 text-center py-12 text-gray-500",children:"Henz ablon oluturulmam"}):p.map(c=>{const f=v(c.category);return e.jsx("div",{className:`bg-white rounded-lg shadow p-4 border-l-4 ${c.is_active?"border-green-500":"border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ut,{className:"h-5 w-5 text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:c.name}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${f.color}`,children:f.name})]}),e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:c.title}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:c.body}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-400",children:[e.jsxs("span",{children:["Hedef: ",E(c.target_audience)]}),e.jsx("span",{children:"|"}),e.jsxs("span",{children:["Gnderim: ",c.sent_count]}),e.jsx("span",{children:"|"}),e.jsxs("span",{children:["Okunma: ",c.read_count]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>u(c),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(c.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",children:e.jsx(be,{className:"h-4 w-4"})})]})]})},c.id)})}),s&&e.jsx(ml,{template:n,triggerTypes:y,onClose:()=>{a(!1),i(null)},onSuccess:()=>{t.invalidateQueries({queryKey:["notification-templates"]}),a(!1),i(null)}})]})}function ml({template:t,triggerTypes:s,onClose:a,onSuccess:n}){const[i,l]=r.useState({name:(t==null?void 0:t.name)||"",title:(t==null?void 0:t.title)||"",body:(t==null?void 0:t.body)||"",category:(t==null?void 0:t.category)||"announcement",trigger_type:(t==null?void 0:t.trigger_type)||"manual",target_audience:(t==null?void 0:t.target_audience)||"all",is_active:(t==null?void 0:t.is_active)??!0}),[m,o]=r.useState(!1),x=async()=>{if(!i.name||!i.title||!i.body){L.error("Tm alanlar doldurun");return}o(!0);try{t?(await jt.update(t.id,i),L.success("ablon gncellendi")):(await jt.create(i),L.success("ablon oluturuldu")),n()}catch{L.error("lem baarsz")}finally{o(!1)}},p=["{{driver_name}}","{{trip_count}}","{{total_distance}}","{{province}}","{{diesel_price}}"];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-semibold",children:t?"ablonu Dzenle":"Yeni Bildirim ablonu"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ablon Ad *"}),e.jsx("input",{type:"text",value:i.name,onChange:y=>l({...i,name:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"rn: Haftalk zet"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bildirim Bal *"}),e.jsx("input",{type:"text",value:i.title,onChange:y=>l({...i,title:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Bildirimde grnecek balk"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bildirim erii *"}),e.jsx("textarea",{value:i.body,onChange:y=>l({...i,body:y.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Bildirim ierii..."}),e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Kullanlabilir deikenler:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:p.map(y=>e.jsx("button",{type:"button",onClick:()=>l({...i,body:i.body+y}),className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded hover:bg-gray-200",children:y},y))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),e.jsx("select",{value:i.category,onChange:y=>l({...i,category:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:Pt.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tetikleyici"}),e.jsxs("select",{value:i.trigger_type,onChange:y=>l({...i,trigger_type:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"manual",children:"Manuel"}),e.jsx("option",{value:"scheduled",children:"Zamanl"}),e.jsx("option",{value:"event",children:"Olay Bazl"}),s.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hedef Kitle"}),e.jsx("select",{value:i.target_audience,onChange:y=>l({...i,target_audience:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:Fs.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:i.is_active,onChange:y=>l({...i,is_active:y.target.checked}),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-gray-700",children:"Aktif"})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsxs("button",{onClick:x,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[m?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Mt,{className:"h-5 w-5"}),t?"Gncelle":"Olutur"]})]})]})})}const Pe=["#3b82f6","#22c55e","#f97316","#ef4444","#8b5cf6","#06b6d4","#ec4899","#84cc16"];function xl(){var I,V,U,B,Z,ae;const[t,s]=r.useState("overview"),[a,n]=r.useState("30d"),[i,l]=r.useState({start:"",end:""}),m=()=>{const d=new Date;let M,$=d.toISOString().split("T")[0];switch(a){case"7d":M=new Date(d.setDate(d.getDate()-7)).toISOString().split("T")[0];break;case"30d":M=new Date(d.setDate(d.getDate()-30)).toISOString().split("T")[0];break;case"90d":M=new Date(d.setDate(d.getDate()-90)).toISOString().split("T")[0];break;case"custom":M=i.start,$=i.end;break;default:M=new Date(d.setDate(d.getDate()-30)).toISOString().split("T")[0]}return{start_date:M,end_date:$}},{data:o}=q({queryKey:["dashboard"],queryFn:()=>Bt.getStats()}),{data:x,isLoading:p}=q({queryKey:["reports","routes",a,i],queryFn:()=>ts.getRoutes(m()),enabled:t==="routes"||t==="overview"}),{data:y,isLoading:v}=q({queryKey:["reports","stops",a,i],queryFn:()=>ts.getStops(m()),enabled:t==="stops"||t==="overview"}),{data:E,isLoading:u}=q({queryKey:["reports","questions"],queryFn:()=>xe.getStats(),enabled:t==="questions"||t==="overview"}),N=o==null?void 0:o.data,b=((I=x==null?void 0:x.data)==null?void 0:I.routes)||[],k=((V=x==null?void 0:x.data)==null?void 0:V.summary)||{},c=((U=y==null?void 0:y.data)==null?void 0:U.stops)||[],f=((B=y==null?void 0:y.data)==null?void 0:B.summary)||{},z=((Z=E==null?void 0:E.data)==null?void 0:Z.stats)||{},T=[{id:"overview",label:"Genel zet",icon:Ot},{id:"routes",label:"Gzergah Analizi",icon:ee},{id:"stops",label:"Durak Analizi",icon:se},{id:"questions",label:"Soru statistikleri",icon:kt},{id:"drivers",label:"ofr Performans",icon:we}],A=t==="routes"&&p||t==="stops"&&v||t==="questions"&&u||t==="overview"&&(p||v),_=r.useMemo(()=>b.slice(0,10).map(d=>{var M,$;return{name:`${(M=d.from_province)==null?void 0:M.substring(0,3)}  ${($=d.to_province)==null?void 0:$.substring(0,3)}`,sefer:d.trip_count,mesafe:d.avg_distance_km}}),[b]),F=r.useMemo(()=>{const d={};return c.forEach(M=>{const $=M.stop_type||"other";d[$]=(d[$]||0)+M.stop_count}),Object.entries(d).map(([M,$])=>({name:M==="rest"?"Mola":M==="loading"?"Ykleme":M==="unloading"?"Boaltma":"Dier",value:$}))},[c]),R=r.useMemo(()=>Object.entries(z.by_status||{}).map(([d,M])=>({name:d==="draft"?"Taslak":d==="pending_approval"?"Onay Bekliyor":d==="approved"?"Onayl":d==="rejected"?"Reddedildi":d==="sent"?"Gnderildi":d==="answered"?"Cevapland":d==="expired"?"Sresi Doldu":d,value:M})),[z]),g=(d,M,$)=>{if($==="print"){window.print();return}if(!d||d.length===0){L.error("Export edilecek veri yok");return}let O,P,S;if($==="csv"){const X=Object.keys(d[0]);O=[X.join(","),...d.map(G=>X.map(je=>JSON.stringify(G[je]??"")).join(","))].join(`
`),P="text/csv;charset=utf-8;",S="csv"}else O=JSON.stringify(d,null,2),P="application/json",S="json";const H=new Blob([O],{type:P}),J=document.createElement("a");J.href=URL.createObjectURL(H),J.download=`${M}_${new Date().toISOString().split("T")[0]}.${S}`,J.click(),L.success(`${S.toUpperCase()} dosyas indirildi`)},w=({data:d,filename:M})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>g(d,M,"csv"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Yr,{className:"h-4 w-4"}),"CSV"]}),e.jsxs("button",{onClick:()=>g(d,M,"json"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ls,{className:"h-4 w-4"}),"JSON"]}),e.jsxs("button",{onClick:()=>g([],"","print"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(Or,{className:"h-4 w-4"}),"Yazdr"]})]}),D=({title:d,value:M,subtitle:$,icon:O,color:P,bgColor:S,trend:H})=>e.jsxs("div",{className:`${S} rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:`p-2 ${P.replace("text-","bg-").replace("600","200")} rounded-lg`,children:e.jsx(O,{className:`h-5 w-5 ${P}`})}),H!==void 0&&e.jsxs("div",{className:`flex items-center gap-0.5 text-xs font-medium ${H>=0?"text-green-600":"text-red-600"}`,children:[H>=0?e.jsx(at,{className:"h-3.5 w-3.5"}):e.jsx(vt,{className:"h-3.5 w-3.5"}),Math.abs(H).toFixed(0),"%"]})]}),e.jsx("p",{className:"mt-3 text-2xl font-bold text-gray-900",children:M}),e.jsx("p",{className:`text-xs ${P}`,children:d}),$&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:$})]});return e.jsxs("div",{className:"space-y-5 print:space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 print:hidden",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Raporlar"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Detayl analiz ve veri exportu"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded-lg p-1",children:[e.jsx(Zt,{className:"h-4 w-4 text-gray-400 ml-2"}),[{value:"7d",label:"7 Gn"},{value:"30d",label:"30 Gn"},{value:"90d",label:"90 Gn"},{value:"custom",label:"zel"}].map(d=>e.jsx("button",{onClick:()=>n(d.value),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${a===d.value?"bg-primary-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:d.label},d.value))]}),a==="custom"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:i.start,onChange:d=>l(M=>({...M,start:d.target.value})),className:"px-2 py-1.5 text-xs border border-gray-200 rounded-lg"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"date",value:i.end,onChange:d=>l(M=>({...M,end:d.target.value})),className:"px-2 py-1.5 text-xs border border-gray-200 rounded-lg"})]})]})]}),e.jsxs("div",{className:"hidden print:block text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"TestSistem Rapor"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("tr-TR")})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden print:shadow-none print:border-0",children:[e.jsx("div",{className:"border-b border-gray-100 overflow-x-auto print:hidden",children:e.jsx("nav",{className:"flex min-w-max",children:T.map(d=>e.jsxs("button",{onClick:()=>s(d.id),className:`flex items-center gap-2 px-5 py-3.5 text-sm font-medium border-b-2 whitespace-nowrap transition-colors ${t===d.id?"border-primary-500 text-primary-600 bg-primary-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-200"}`,children:[e.jsx(d.icon,{className:"h-4 w-4"}),d.label]},d.id))})}),e.jsx("div",{className:"p-5",children:A?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Rapor ykleniyor..."})]})}):e.jsxs(e.Fragment,{children:[t==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Genel zet Raporu"}),e.jsx(w,{data:[{...k,...f,...N}],filename:"genel_ozet"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(D,{title:"Toplam ofr",value:(N==null?void 0:N.total_drivers)||0,subtitle:"Kaytl",icon:we,color:"text-blue-600",bgColor:"bg-blue-50"}),e.jsx(D,{title:"Aktif ofr",value:(N==null?void 0:N.active_drivers)||0,subtitle:"Bu dnem",icon:we,color:"text-green-600",bgColor:"bg-green-50",trend:12}),e.jsx(D,{title:"Toplam Sefer",value:k.total_trips||0,subtitle:"Seili dnem",icon:ee,color:"text-orange-600",bgColor:"bg-orange-50"}),e.jsx(D,{title:"Toplam Mesafe",value:`${((k.total_distance_km||0)/1e3).toFixed(0)}K km`,subtitle:"Seili dnem",icon:se,color:"text-purple-600",bgColor:"bg-purple-50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"En Popler Gzergahlar"}),e.jsx("div",{className:"h-64",children:_.length>0?e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(rt,{data:_,layout:"vertical",children:[e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",horizontal:!1}),e.jsx(ye,{type:"number",tick:{fontSize:11},stroke:"#9CA3AF"}),e.jsx(pe,{dataKey:"name",type:"category",tick:{fontSize:10},stroke:"#9CA3AF",width:70}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),e.jsx(Ue,{dataKey:"sefer",fill:"#3b82f6",name:"Sefer Says",radius:[0,4,4,0]})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"Veri yok"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Durak Tr Dalm"}),e.jsx("div",{className:"h-64",children:F.length>0?e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(et,{children:[e.jsx(tt,{data:F,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",children:F.map((d,M)=>e.jsx(st,{fill:Pe[M%Pe.length]},`cell-${M}`))}),e.jsx(de,{}),e.jsx(We,{layout:"vertical",align:"right",verticalAlign:"middle",formatter:d=>e.jsx("span",{className:"text-xs text-gray-600",children:d})})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"Veri yok"})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Dnem zeti"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ort. Sefer Sresi"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[(k.avg_duration_hours||0).toFixed(1)," sa"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ort. Mesafe"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[(k.avg_distance_km||0).toFixed(0)," km"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Toplam Durak"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:f.total_stops||0})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ort. Durak Sresi"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[(f.avg_duration_minutes||0).toFixed(0)," dk"]})]})]})]})]}),t==="routes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gzergah Analizi"}),e.jsx(w,{data:b,filename:"guzergah_raporu"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(D,{title:"Toplam Sefer",value:k.total_trips||0,icon:ee,color:"text-blue-600",bgColor:"bg-blue-50"}),e.jsx(D,{title:"Toplam Mesafe",value:`${(k.total_distance_km||0).toLocaleString()} km`,icon:se,color:"text-green-600",bgColor:"bg-green-50"}),e.jsx(D,{title:"Ort. Sre",value:`${(k.avg_duration_hours||0).toFixed(1)} sa`,icon:ce,color:"text-orange-600",bgColor:"bg-orange-50"}),e.jsx(D,{title:"Ort. Mesafe",value:`${(k.avg_distance_km||0).toFixed(0)} km`,icon:ue,color:"text-purple-600",bgColor:"bg-purple-50"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Gzergah Bazl Sefer Says"}),e.jsx("div",{className:"h-72",children:_.length>0?e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(rt,{data:_,children:[e.jsx(ge,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx(ye,{dataKey:"name",tick:{fontSize:10},stroke:"#9CA3AF"}),e.jsx(pe,{tick:{fontSize:11},stroke:"#9CA3AF"}),e.jsx(de,{contentStyle:{backgroundColor:"#FFF",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),e.jsx(Ue,{dataKey:"sefer",fill:"#3b82f6",name:"Sefer",radius:[4,4,0,0]})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Veri yok"})})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gzergah"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sefer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Toplam Mesafe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort. Mesafe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort. Sre"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:b.map((d,M)=>{var $,O,P;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:[d.from_province," ",e.jsx("span",{className:"text-gray-400",children:""})," ",d.to_province]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:d.trip_count}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[($=d.total_distance_km)==null?void 0:$.toLocaleString()," km"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(O=d.avg_distance_km)==null?void 0:O.toFixed(0)," km"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(P=d.avg_duration_hours)==null?void 0:P.toFixed(1)," sa"]})]},M)})})]}),b.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ee,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Bu tarih aralnda gzergah verisi bulunamad"})]})]})]}),t==="stops"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Durak Analizi"}),e.jsx(w,{data:c,filename:"durak_raporu"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(D,{title:"Toplam Durak",value:f.total_stops||0,icon:se,color:"text-blue-600",bgColor:"bg-blue-50"}),e.jsx(D,{title:"Ort. Sre",value:`${(f.avg_duration_minutes||0).toFixed(0)} dk`,icon:ce,color:"text-orange-600",bgColor:"bg-orange-50"}),e.jsx(D,{title:"Toplam Sre",value:`${(f.total_duration_hours||0).toFixed(1)} sa`,icon:Ot,color:"text-green-600",bgColor:"bg-green-50"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Durak Tr Dalm"}),e.jsx("div",{className:"h-64",children:F.length>0?e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(et,{children:[e.jsx(tt,{data:F,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",children:F.map((d,M)=>e.jsx(st,{fill:Pe[M%Pe.length]},`cell-${M}`))}),e.jsx(de,{}),e.jsx(We,{layout:"vertical",align:"right",verticalAlign:"middle"})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Veri yok"})})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Konum"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Say"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort. Sre"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Max Sre"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tip"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:c.map((d,M)=>{var $,O;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:d.location_name||d.province}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:d.stop_count}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[($=d.avg_duration_minutes)==null?void 0:$.toFixed(0)," dk"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(O=d.max_duration_minutes)==null?void 0:O.toFixed(0)," dk"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${d.stop_type==="rest"?"bg-green-100 text-green-700":d.stop_type==="loading"?"bg-blue-100 text-blue-700":d.stop_type==="unloading"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"}`,children:d.stop_type==="rest"?"Mola":d.stop_type==="loading"?"Ykleme":d.stop_type==="unloading"?"Boaltma":d.stop_type||"Dier"})})]},M)})})]}),c.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(se,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{children:"Bu tarih aralnda durak verisi bulunamad"})]})]})]}),t==="questions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Soru statistikleri"}),e.jsx(w,{data:[z],filename:"soru_raporu"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(D,{title:"Onay Bekleyen",value:z.pending_approval||0,icon:kt,color:"text-blue-600",bgColor:"bg-blue-50"}),e.jsx(D,{title:"Yant Oran",value:`%${(z.answer_rate||0).toFixed(1)}`,icon:ue,color:"text-green-600",bgColor:"bg-green-50"}),e.jsx(D,{title:"Toplam Soru",value:z.total||0,icon:ls,color:"text-purple-600",bgColor:"bg-purple-50"}),e.jsx(D,{title:"Cevaplanan",value:((ae=z.by_status)==null?void 0:ae.answered)||0,icon:ce,color:"text-orange-600",bgColor:"bg-orange-50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Duruma Gre Dalm"}),e.jsx("div",{className:"h-64",children:R.length>0?e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(et,{children:[e.jsx(tt,{data:R,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",children:R.map((d,M)=>e.jsx(st,{fill:Pe[M%Pe.length]},`cell-${M}`))}),e.jsx(de,{}),e.jsx(We,{layout:"vertical",align:"right",verticalAlign:"middle",formatter:d=>e.jsx("span",{className:"text-xs",children:d})})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Veri yok"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Detayl Durum"}),e.jsx("div",{className:"space-y-3",children:Object.entries(z.by_status||{}).map(([d,M])=>{const $=Object.values(z.by_status||{}).reduce((P,S)=>P+S,0),O=$>0?M/$*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:d==="draft"?"Taslak":d==="pending_approval"?"Onay Bekliyor":d==="approved"?"Onayl":d==="rejected"?"Reddedildi":d==="sent"?"Gnderildi":d==="answered"?"Cevapland":d==="expired"?"Sresi Doldu":d}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:M})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all",style:{width:`${O}%`}})})]},d)})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Kaynaa Gre Dalm"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(z.by_source||{}).map(([d,M])=>e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M}),e.jsx("p",{className:"text-xs text-gray-500",children:d==="manual"?"Manuel":d==="manual_bulk"?"Toplu Manuel":d==="auto_rule"?"Otomatik Kural":d==="ai_generated"?"AI retimi":d})]},d))})]})]}),t==="drivers"&&e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx(we,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ofr Performans Raporu"}),e.jsx("p",{className:"text-sm",children:"Bu rapor yaknda eklenecek"})]})]})})]})]})}function ul(){const[t,s]=r.useState(null),[a,n]=r.useState(!0),[i,l]=r.useState("overview"),m="https://sentry.io",o="https://console.firebase.google.com";r.useEffect(()=>{x()},[]);const x=async()=>{n(!0),setTimeout(()=>{s({total_errors:0,errors_today:0,errors_this_week:0,top_errors:[],error_trend:[]}),n(!1)},500)},p=({title:y,value:v,icon:E,color:u,subtitle:N})=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:y}),e.jsx("p",{className:`text-3xl font-bold mt-1 ${u}`,children:v}),N&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:N})]}),e.jsx("div",{className:`p-3 rounded-xl ${u.replace("text-","bg-").replace("600","100")}`,children:e.jsx(E,{className:`h-6 w-6 ${u}`})})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hata Takip"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Uygulama hatalarn ve crash raporlarn izleyin"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx(ks,{className:"h-5 w-5"}),"Yenile"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-6 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl text-white hover:from-purple-600 hover:to-purple-700 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(Ie,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sentry Dashboard"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Detayl hata analizi ve performans izleme"})]})]}),e.jsx(rs,{className:"h-6 w-6"})]}),e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-6 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl text-white hover:from-orange-600 hover:to-red-600 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(Kt,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Firebase Crashlytics"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Mobil uygulama crash raporlar"})]})]}),e.jsx(rs,{className:"h-6 w-6"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{title:"Toplam Hata",value:(t==null?void 0:t.total_errors)??0,icon:Ie,color:"text-red-600",subtitle:"Tm zamanlar"}),e.jsx(p,{title:"Bugnk Hatalar",value:(t==null?void 0:t.errors_today)??0,icon:ce,color:"text-orange-600",subtitle:"Son 24 saat"}),e.jsx(p,{title:"Bu Haftaki Hatalar",value:(t==null?void 0:t.errors_this_week)??0,icon:ue,color:"text-yellow-600",subtitle:"Son 7 gn"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"border-b",children:e.jsxs("nav",{className:"flex gap-4 px-6",children:[e.jsx("button",{onClick:()=>l("overview"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${i==="overview"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Genel Bak"]})}),e.jsx("button",{onClick:()=>l("mobile"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${i==="mobile"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5"}),"Mobil Hatalar"]})}),e.jsx("button",{onClick:()=>l("backend"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${i==="backend"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-5 w-5"}),"Backend Hatalar"]})})]})}),e.jsx("div",{className:"p-6",children:a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):i==="overview"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ie,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Hata Takip Sistemi Aktif"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Mobil uygulama ve backend hatalar otomatik olarak Sentry ve Firebase Crashlytics'e raporlanmaktadr. Detayl hata analizi iin yukardaki dashboard linklerini kullanabilirsiniz."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5 text-primary-600"}),"Mobil Uygulama"]}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Flutter crash raporlar"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Ekran gei takibi"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Kullanc oturum bilgileri"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Network hata izleme"]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(gt,{className:"h-5 w-5 text-primary-600"}),"Backend Server"]}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Go panic recovery"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"HTTP request tracking"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Database error logging"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"User context capture"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Kurulum Bilgileri"}),e.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-100 text-primary-700 rounded-full text-xs font-medium flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Sentry DSN"}),e.jsxs("p",{className:"text-gray-500",children:[e.jsx("code",{className:"bg-gray-200 px-1 py-0.5 rounded",children:"SENTRY_DSN"})," environment variable'n ayarlayn"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-100 text-primary-700 rounded-full text-xs font-medium flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Firebase Crashlytics"}),e.jsx("p",{className:"text-gray-500",children:"Firebase Console'dan Crashlytics'i etkinletirin"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-100 text-primary-700 rounded-full text-xs font-medium flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Mobil Uygulama"}),e.jsxs("p",{className:"text-gray-500",children:[e.jsx("code",{className:"bg-gray-200 px-1 py-0.5 rounded",children:"lib/config/constants.dart"})," dosyasnda Sentry DSN'i gncelleyin"]})]})]})]})]})]}):i==="mobile"?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Se,{className:"h-16 w-16 text-gray-300 mx-auto"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Mobil Hata Listesi"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Mobil uygulama hatalarn grmek iin Sentry veya Firebase Crashlytics dashboard'unu kullann."}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsx(Ie,{className:"h-5 w-5"}),"Sentry'ye Git"]}),e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:[e.jsx(Kt,{className:"h-5 w-5"}),"Crashlytics'e Git"]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(gt,{className:"h-16 w-16 text-gray-300 mx-auto"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Backend Hata Listesi"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Backend hatalarn grmek iin Sentry dashboard'unu kullann."}),e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsx(Ie,{className:"h-5 w-5"}),"Sentry'ye Git"]})})]})})]})]})}delete me.Icon.Default.prototype._getIconUrl;me.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const hl=me.divIcon({html:'<div style="font-size: 24px;"></div>',className:"custom-home-icon",iconSize:[30,30],iconAnchor:[15,15]}),pl=(t,s)=>me.divIcon({html:`<div style="
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    border: 3px solid white;
  ">
    <span>${t}</span>
    <span style="font-size: 9px; opacity: 0.9;">${s}</span>
  </div>`,className:"custom-cluster-icon",iconSize:[45,45],iconAnchor:[22,22]}),ms=me.divIcon({html:`<div style="
    background: #ef4444;
    color: white;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    box-shadow: 0 2px 10px rgba(239,68,68,0.5);
    border: 3px solid white;
    animation: pulse 1s infinite;
  "></div>`,className:"selected-marker-icon",iconSize:[30,30],iconAnchor:[15,15]}),ht={home:"",loading:"",unloading:"",rest_area:"",sleep:"",gas_station:"",truck_garage:"",parking:"",industrial:"",port:"",customs:"",mall:"",unknown:""},He=.005;function gl(t){const s={};return t.forEach(a=>{const n=Math.floor(a.latitude/He)*He,i=Math.floor(a.longitude/He)*He,l=`${n.toFixed(4)}_${i.toFixed(4)}`;s[l]||(s[l]={lat:n+He/2,lng:i+He/2,stops:[],uniqueDrivers:[],totalDuration:0,province:a.province,district:a.district}),s[l].stops.push(a),s[l].totalDuration+=a.duration_minutes,s[l].uniqueDrivers.includes(a.driver_id)||s[l].uniqueDrivers.push(a.driver_id)}),Object.values(s).sort((a,n)=>n.stops.length-a.stops.length)}function yl({center:t,zoom:s}){const a=It();return r.useEffect(()=>{t&&a.flyTo(t,s,{duration:.5})},[t,s,a]),null}function fl(){var $e,Q,j,W;const t=Be(),[s,a]=r.useState(null),[n,i]=r.useState(null),[l,m]=r.useState("clusters"),[o,x]=r.useState(""),[p,y]=r.useState(!1),[v,E]=r.useState(null),[u,N]=r.useState(null),[b,k]=r.useState(6),[c,f]=r.useState(""),[z,T]=r.useState({name:"",radius:200}),{data:A}=q({queryKey:["location-types"],queryFn:()=>C.get("/admin/stops/location-types")}),{data:_,isLoading:F}=q({queryKey:["stops",l,o],queryFn:()=>{if(l==="uncategorized")return C.get("/admin/stops/uncategorized?limit=500");if(l==="homes")return C.get("/admin/stops?location_type=home&limit=500");const h=o?`?location_type=${o}&limit=500`:"?limit=500";return C.get(`/admin/stops${h}`)},enabled:l!=="homes"}),{data:R,isLoading:g}=q({queryKey:["driver-homes"],queryFn:()=>Fe.getAll({limit:100}),enabled:l==="homes"}),w=Y({mutationFn:({stopId:h,locationType:K})=>C.put(`/admin/stops/${h}`,{location_type:K}),onSuccess:()=>{L.success("Durak tipi gncellendi"),t.invalidateQueries({queryKey:["stops"]}),a(null)},onError:()=>{L.error("Gncelleme baarsz")}}),D=Y({mutationFn:()=>C.post("/admin/stops/detect-all"),onSuccess:h=>{L.success(`${h.data.detected_stops} yeni durak tespit edildi`),t.invalidateQueries({queryKey:["stops"]})},onError:()=>{L.error("Durak tespiti baarsz")}}),I=Y({mutationFn:h=>Fe.create(h.driverId,{name:h.name,latitude:h.latitude,longitude:h.longitude,province:h.province,district:h.district,radius:h.radius}),onSuccess:()=>{L.success("Ev adresi eklendi"),t.invalidateQueries({queryKey:["driver-homes"]}),t.invalidateQueries({queryKey:["stops"]}),y(!1),a(null),T({name:"",radius:200})},onError:h=>{var K,le;L.error(((le=(K=h.response)==null?void 0:K.data)==null?void 0:le.error)||"Ev adresi eklenemedi")}}),V=Y({mutationFn:h=>Fe.delete(h),onSuccess:()=>{L.success("Ev adresi silindi"),t.invalidateQueries({queryKey:["driver-homes"]})},onError:()=>{L.error("Ev adresi silinemedi")}}),U=Y({mutationFn:({homeId:h,data:K})=>Fe.update(h,K),onSuccess:()=>{L.success("Ev adresi gncellendi"),t.invalidateQueries({queryKey:["driver-homes"]}),E(null)},onError:()=>{L.error("Gncelleme baarsz")}}),B=(($e=A==null?void 0:A.data)==null?void 0:$e.location_types)||[],Z=((Q=_==null?void 0:_.data)==null?void 0:Q.stops)||[],ae=((j=R==null?void 0:R.data)==null?void 0:j.homes)||[],d=((W=R==null?void 0:R.data)==null?void 0:W.total)||0,M=r.useMemo(()=>gl(Z),[Z]),$=r.useMemo(()=>{if(!c)return M;const h=c.toLowerCase();return M.filter(K=>{var le,he;return((le=K.province)==null?void 0:le.toLowerCase().includes(h))||((he=K.district)==null?void 0:he.toLowerCase().includes(h))||K.stops.some(ke=>{var ot;return(ot=ke.driver_name)==null?void 0:ot.toLowerCase().includes(h)})})},[M,c]),O=r.useMemo(()=>{const h=new Set(Z.map(he=>he.driver_id)),K=Z.reduce((he,ke)=>he+ke.duration_minutes,0),le=M.filter(he=>he.uniqueDrivers.length>1).length;return{totalStops:Z.length,uniqueDrivers:h.size,clusters:M.length,hotSpots:le,avgDuration:Z.length>0?Math.round(K/Z.length):0}},[Z,M]),P=h=>{if(h<60)return`${h} dk`;const K=Math.floor(h/60),le=h%60;return`${K}s ${le}dk`},S=()=>{s&&(T({name:"Ev",radius:200}),y(!0))},H=()=>{!s||!z.name||I.mutate({driverId:s.driver_id,name:z.name,latitude:s.latitude,longitude:s.longitude,province:s.province,district:s.district,radius:z.radius})},J=(h,K,le=14)=>{N([h,K]),k(le)},X=h=>{a(h),i(null),J(h.latitude,h.longitude,15)},G=h=>{i(h),a(null),J(h.lat,h.lng,14)},je=h=>{J(h.latitude,h.longitude,15)},Oe=B.filter(h=>h.value!=="home"),Me=l==="homes"&&ae.length>0?[ae[0].latitude,ae[0].longitude]:M.length>0?[M[0].lat,M[0].lng]:[39,35];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Durak Ynetimi"}),e.jsx("p",{className:"text-gray-500",children:"ofr duraklarn analiz edin ve ynetin"})]}),e.jsxs("button",{onClick:()=>D.mutate(),disabled:D.isPending,className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[e.jsx(Es,{className:"h-5 w-5"}),D.isPending?"Tespit Ediliyor...":"Duraklar Tespit Et"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(se,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Toplam Durak"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:O.totalStops})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(we,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Src Says"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:O.uniqueDrivers})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(ue,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Kme Says"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:O.clusters})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(ee,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ortak Noktalar"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:O.hotSpots})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(ce,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ort. Bekleme"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:P(O.avgDuration)})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-4 border-b",children:[e.jsxs("button",{onClick:()=>{m("clusters"),x(""),i(null),a(null)},className:`pb-2 px-4 font-medium flex items-center gap-1 ${l==="clusters"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500"}`,children:[e.jsx(ue,{className:"h-4 w-4"}),"Kmelenmi (",M.length,")"]}),e.jsx("button",{onClick:()=>{m("uncategorized"),x(""),i(null),a(null)},className:`pb-2 px-4 font-medium ${l==="uncategorized"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500"}`,children:"Kategorize Edilmemi"}),e.jsx("button",{onClick:()=>{m("all"),x(""),i(null),a(null)},className:`pb-2 px-4 font-medium ${l==="all"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500"}`,children:"Tm Duraklar"}),e.jsxs("button",{onClick:()=>{m("homes"),i(null),a(null)},className:`pb-2 px-4 font-medium flex items-center gap-1 ${l==="homes"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500"}`,children:[e.jsx(ze,{className:"h-4 w-4"}),"ofr Evleri (",d,")"]}),l==="all"&&e.jsxs("select",{value:o,onChange:h=>x(h.target.value),className:"ml-auto border border-gray-300 rounded-lg px-3 py-1",children:[e.jsx("option",{value:"",children:"Tm Tipler"}),B.map(h=>e.jsxs("option",{value:h.value,children:[ht[h.value]," ",h.label]},h.value))]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"font-semibold mb-3",children:l==="homes"?"ofr Ev Adresleri":l==="clusters"?"Ortak Durak Noktalar":"Duraklar"}),l==="clusters"&&e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"l, ile veya src ara...",value:c,onChange:h=>f(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:F||l==="homes"&&g?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):l==="homes"?ae.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(ze,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"Henz ev adresi eklenmemi"})]}):ae.map(h=>e.jsxs("button",{onClick:()=>je(h),className:"w-full text-left p-4 border-b hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-gray-400"}),h.driver_name||"ofr"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("button",{onClick:K=>{K.stopPropagation(),E(h)},className:"p-1 text-gray-400 hover:text-primary-600",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:K=>{K.stopPropagation(),confirm("Bu ev adresini silmek istediinize emin misiniz?")&&V.mutate(h.id)},className:"p-1 text-gray-400 hover:text-red-600",children:e.jsx(be,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("p",{className:"font-medium text-gray-700",children:h.name}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"h-4 w-4"}),h.province||"Konum",", ",h.district||""]}),e.jsxs("p",{className:"text-xs",children:["Yarap: ",h.radius,"m",!h.is_active&&e.jsx("span",{className:"ml-2 text-red-500",children:"(Pasif)"})]})]})]},h.id)):l==="clusters"?$.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(se,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"Durak bulunamad"})]}):$.map((h,K)=>e.jsxs("button",{onClick:()=>G(h),className:`w-full text-left p-4 border-b hover:bg-gray-50 ${n===h?"bg-blue-50 border-l-4 border-l-blue-500":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-blue-500"}),h.province||"Bilinmeyen",", ",h.district||""]}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:[h.stops.length," durak"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(we,{className:"h-4 w-4"}),h.uniqueDrivers.length," src"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"h-4 w-4"}),P(h.totalDuration)]})]}),h.uniqueDrivers.length>1&&e.jsxs("div",{className:"mt-2 text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded inline-block",children:[" Ortak Nokta - ",h.uniqueDrivers.length," farkl src"]})]},K)):Z.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Nt,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),e.jsx("p",{children:"Kategorize edilecek durak yok"})]}):Z.map(h=>e.jsxs("button",{onClick:()=>X(h),className:`w-full text-left p-4 border-b hover:bg-gray-50 ${(s==null?void 0:s.id)===h.id?"bg-primary-50 border-l-4 border-l-primary-500":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-gray-400"}),h.driver_name||"Bilinmeyen ofr"]}),e.jsx("span",{className:"text-2xl",children:ht[h.location_type]||""})]}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"h-4 w-4"}),P(h.duration_minutes)]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"h-4 w-4"}),h.province||"Konum",", ",h.district||""]}),e.jsx("p",{className:"text-xs",children:new Date(h.started_at).toLocaleString("tr-TR")})]})]},h.id))})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold",children:"Harita"}),(s||n)&&e.jsx("button",{onClick:()=>{a(null),i(null),N(null)},className:"text-sm text-gray-500 hover:text-gray-700",children:"Seimi Temizle"})]}),e.jsx("div",{className:"h-[600px]",children:e.jsxs(Ze,{center:Me,zoom:6,style:{height:"100%",width:"100%"},children:[e.jsx(Ve,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(yl,{center:u,zoom:b}),l==="homes"?ae.map(h=>e.jsxs("div",{children:[e.jsx(Le,{position:[h.latitude,h.longitude],icon:hl,children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:h.driver_name}),e.jsx("br",{}),e.jsx("span",{className:"text-lg",children:""})," ",h.name,e.jsx("br",{}),"Yarap: ",h.radius,"m"]})})}),e.jsx(ft,{center:[h.latitude,h.longitude],radius:h.radius,pathOptions:{color:h.is_active?"#22c55e":"#ef4444",fillColor:h.is_active?"#22c55e":"#ef4444",fillOpacity:.2}})]},h.id)):l==="clusters"?e.jsxs(e.Fragment,{children:[$.map((h,K)=>e.jsx(Le,{position:[h.lat,h.lng],icon:n===h?ms:pl(h.stops.length,h.uniqueDrivers.length),eventHandlers:{click:()=>G(h)},children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm min-w-[200px]",children:[e.jsxs("p",{className:"font-semibold mb-2",children:[h.province,", ",h.district]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Toplam Durak:"})," ",h.stops.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Src Says:"})," ",h.uniqueDrivers.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Toplam Bekleme:"})," ",P(h.totalDuration)]})]}),h.uniqueDrivers.length>1&&e.jsxs("p",{className:"mt-2 text-orange-600 text-xs",children:[" ",h.uniqueDrivers.length," farkl src bu noktada durdu"]}),e.jsxs("div",{className:"mt-2 pt-2 border-t max-h-32 overflow-y-auto",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Srcler:"}),Array.from(new Set(h.stops.map(le=>le.driver_name))).slice(0,5).map((le,he)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 rounded px-1 py-0.5 text-xs mr-1 mb-1",children:le},he)),h.uniqueDrivers.length>5&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",h.uniqueDrivers.length-5," daha"]})]})]})})},K)),n&&n.stops.map(h=>e.jsx(ft,{center:[h.latitude,h.longitude],radius:50,pathOptions:{color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.3},children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:h.driver_name}),e.jsx("br",{}),P(h.duration_minutes),e.jsx("br",{}),new Date(h.started_at).toLocaleString("tr-TR")]})})},h.id))]}):e.jsx(e.Fragment,{children:Z.map(h=>e.jsx(Le,{position:[h.latitude,h.longitude],icon:(s==null?void 0:s.id)===h.id?ms:void 0,eventHandlers:{click:()=>X(h)},children:e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:h.driver_name}),e.jsx("br",{}),e.jsx("span",{className:"text-2xl",children:ht[h.location_type]})," ",h.location_label||"Belirlenmedi",e.jsx("br",{}),"Sre: ",P(h.duration_minutes),e.jsx("br",{}),new Date(h.started_at).toLocaleString("tr-TR")]})})},h.id))})]})})]})]}),n&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-blue-600"}),n.province,", ",n.district," - Detayl Analiz"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"zet"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Toplam Durak:"})," ",e.jsx("strong",{children:n.stops.length})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Farkl Src:"})," ",e.jsx("strong",{children:n.uniqueDrivers.length})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Toplam Bekleme:"})," ",e.jsx("strong",{children:P(n.totalDuration)})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Ort. Bekleme:"})," ",e.jsx("strong",{children:P(Math.round(n.totalDuration/n.stops.length))})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Bu Noktada Duran Srcler"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Src"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Durak Says"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Toplam Sre"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Son Ziyaret"})]})}),e.jsx("tbody",{children:Array.from(new Set(n.stops.map(h=>h.driver_id))).map(h=>{const K=n.stops.filter(ke=>ke.driver_id===h),le=K.reduce((ke,ot)=>ke+ot.duration_minutes,0),he=new Date(Math.max(...K.map(ke=>new Date(ke.started_at).getTime())));return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:K[0].driver_name}),e.jsx("td",{className:"px-3 py-2",children:K.length}),e.jsx("td",{className:"px-3 py-2",children:P(le)}),e.jsx("td",{className:"px-3 py-2 text-gray-500",children:he.toLocaleDateString("tr-TR")})]},h)})})]})})]})]})]}),s&&!p&&l!=="clusters"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Durak Tipini Sein"}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:s.driver_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[P(s.duration_minutes)," bekledi"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.province,", ",s.district]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.started_at).toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:S,className:"w-full flex items-center justify-center gap-2 p-3 bg-green-50 border-2 border-green-200 rounded-lg hover:bg-green-100 text-green-700",children:[e.jsx(ze,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Bu ofrn Evi Olarak Kaydet"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"(Her ofr max 2 ev adresi ekleyebilir)"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Veya dier tip sein:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:Oe.map(h=>e.jsxs("button",{onClick:()=>w.mutate({stopId:s.id,locationType:h.value}),disabled:w.isPending,className:"flex items-center gap-2 p-3 border rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[e.jsx("span",{className:"text-2xl",children:ht[h.value]}),e.jsx("span",{className:"text-sm",children:h.label})]},h.value))})]}),e.jsx("button",{onClick:()=>a(null),className:"w-full py-2 text-gray-500 hover:text-gray-700",children:"ptal"})]})}),p&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-green-600"}),"Ev Adresi Ekle"]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:s.driver_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.province,", ",s.district]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s.latitude.toFixed(6),", ",s.longitude.toFixed(6)]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ev Ad"}),e.jsx("input",{type:"text",value:z.name,onChange:h=>T(K=>({...K,name:h.target.value})),placeholder:"Ev 1, Ev 2, Ana Ev, vb.",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tespit Yarap (metre)"}),e.jsx("input",{type:"number",value:z.radius,onChange:h=>T(K=>({...K,radius:parseInt(h.target.value)||200})),min:50,max:1e3,className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ofr bu yarap iinde durunca ev olarak alglanr"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{y(!1),T({name:"",radius:200})},className:"flex-1 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"ptal"}),e.jsxs("button",{onClick:H,disabled:!z.name||I.isPending,className:"flex-1 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),I.isPending?"Kaydediliyor...":"Kaydet"]})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-primary-600"}),"Ev Adresini Dzenle"]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ev Ad"}),e.jsx("input",{type:"text",value:v.name,onChange:h=>E(K=>K?{...K,name:h.target.value}:null),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tespit Yarap (metre)"}),e.jsx("input",{type:"number",value:v.radius,onChange:h=>E(K=>K?{...K,radius:parseInt(h.target.value)||200}:null),min:50,max:1e3,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:v.is_active,onChange:h=>E(K=>K?{...K,is_active:h.target.checked}:null),className:"h-4 w-4 text-primary-600 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Aktif (Durak tespitinde kullanlsn)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>E(null),className:"flex-1 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"ptal"}),e.jsx("button",{onClick:()=>{v&&U.mutate({homeId:v.id,data:{name:v.name,radius:v.radius,is_active:v.is_active}})},disabled:U.isPending,className:"flex-1 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:U.isPending?"Kaydediliyor...":"Gncelle"})]})]})}),e.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.1); }
        }
        .selected-marker-icon div {
          animation: pulse 1s infinite;
        }
      `})]})}function bl({children:t}){return dt(a=>a.isAuthenticated)?e.jsx(e.Fragment,{children:t}):e.jsx(us,{to:"/login"})}function jl(){return e.jsxs(Os,{children:[e.jsx(re,{path:"/login",element:e.jsx(cn,{})}),e.jsxs(re,{path:"/",element:e.jsx(bl,{children:e.jsx(on,{})}),children:[e.jsx(re,{index:!0,element:e.jsx(us,{to:"/dashboard",replace:!0})}),e.jsx(re,{path:"dashboard",element:e.jsx(qn,{})}),e.jsx(re,{path:"drivers",element:e.jsx(Pn,{})}),e.jsx(re,{path:"drivers/:id",element:e.jsx(In,{})}),e.jsx(re,{path:"drivers/:id/routes",element:e.jsx(Gn,{})}),e.jsx(re,{path:"live-map",element:e.jsx(Yn,{})}),e.jsx(re,{path:"heat-map",element:e.jsx(Vn,{})}),e.jsx(re,{path:"analytics",element:e.jsx(tl,{})}),e.jsx(re,{path:"reports",element:e.jsx(xl,{})}),e.jsx(re,{path:"error-monitoring",element:e.jsx(ul,{})}),e.jsx(re,{path:"stops",element:e.jsx(fl,{})}),e.jsx(re,{path:"surveys",element:e.jsx(Xn,{})}),e.jsx(re,{path:"questions",element:e.jsx(ll,{})}),e.jsx(re,{path:"notification-templates",element:e.jsx(cl,{})}),e.jsx(re,{path:"app-config",element:e.jsx(sl,{})}),e.jsx(re,{path:"settings",element:e.jsx(el,{})})]})]})}const vl=new Ds({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});Tt.createRoot(document.getElementById("root")).render(e.jsx(Ks.StrictMode,{children:e.jsx(Ts,{client:vl,children:e.jsxs(qs,{children:[e.jsx(jl,{}),e.jsx(za,{position:"top-right"})]})})}));

import{a as tt,c as at,j as e,u as T,b as Le,d as q,Q as rt,e as lt}from"./data-vendor-bMWk81w7.js";import{a as nt,r,u as Bs,N as it,O as dt,L as xe,b as Ts,d as ot,e as D,f as Rs,R as ct,B as mt}from"./react-vendor-Ce4Q8di-.js";import{c as ye,R as W,A as as,C as ne,X as ie,Y as de,T as Y,a as rs,B as $s,b as zs,P as ls,d as ns,e as is,L as ds,f as ys,g as fs}from"./chart-vendor-D-5LL3Ii.js";import{L as ae,M as Ze,T as Qe,a as He,P as se,b as Pe,C as Os,u as xt}from"./map-vendor-BNydl430.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function a(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(i){if(i.ep)return;i.ep=!0;const n=a(i);fetch(i.href,n)}})();var os={},bs=nt;os.createRoot=bs.createRoot,os.hydrateRoot=bs.hydrateRoot;let pt={data:""},ht=s=>{if(typeof window=="object"){let t=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(s||document.head).appendChild(t),t.firstChild}return s||pt},ut=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,gt=/\/\*[^]*?\*\/|  +/g,js=/\n+/g,ee=(s,t)=>{let a="",l="",i="";for(let n in s){let c=s[n];n[0]=="@"?n[1]=="i"?a=n+" "+c+";":l+=n[1]=="f"?ee(c,n):n+"{"+ee(c,n[1]=="k"?"":t)+"}":typeof c=="object"?l+=ee(c,t?t.replace(/([^,])+/g,d=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,x=>/&/.test(x)?x.replace(/&/g,d):d?d+" "+x:x)):n):c!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ee.p?ee.p(n,c):n+":"+c+";")}return a+(t&&i?t+"{"+i+"}":i)+l},Z={},Ds=s=>{if(typeof s=="object"){let t="";for(let a in s)t+=a+Ds(s[a]);return t}return s},yt=(s,t,a,l,i)=>{let n=Ds(s),c=Z[n]||(Z[n]=(x=>{let p=0,g=11;for(;p<x.length;)g=101*g+x.charCodeAt(p++)>>>0;return"go"+g})(n));if(!Z[c]){let x=n!==s?s:(p=>{let g,f,_=[{}];for(;g=ut.exec(p.replace(gt,""));)g[4]?_.shift():g[3]?(f=g[3].replace(js," ").trim(),_.unshift(_[0][f]=_[0][f]||{})):_[0][g[1]]=g[2].replace(js," ").trim();return _[0]})(s);Z[c]=ee(i?{["@keyframes "+c]:x}:x,a?"":"."+c)}let d=a&&Z.g?Z.g:null;return a&&(Z.g=Z[c]),((x,p,g,f)=>{f?p.data=p.data.replace(f,x):p.data.indexOf(x)===-1&&(p.data=g?x+p.data:p.data+x)})(Z[c],t,l,d),c},ft=(s,t,a)=>s.reduce((l,i,n)=>{let c=t[n];if(c&&c.call){let d=c(a),x=d&&d.props&&d.props.className||/^go/.test(d)&&d;c=x?"."+x:d&&typeof d=="object"?d.props?"":ee(d,""):d===!1?"":d}return l+i+(c??"")},"");function Ve(s){let t=this||{},a=s.call?s(t.p):s;return yt(a.unshift?a.raw?ft(a,[].slice.call(arguments,1),t.p):a.reduce((l,i)=>Object.assign(l,i&&i.call?i(t.p):i),{}):a,ht(t.target),t.g,t.o,t.k)}let Ks,cs,ms;Ve.bind({g:1});let V=Ve.bind({k:1});function bt(s,t,a,l){ee.p=t,Ks=s,cs=a,ms=l}function re(s,t){let a=this||{};return function(){let l=arguments;function i(n,c){let d=Object.assign({},n),x=d.className||i.className;a.p=Object.assign({theme:cs&&cs()},d),a.o=/ *go\d+/.test(x),d.className=Ve.apply(a,l)+(x?" "+x:"");let p=s;return s[0]&&(p=d.as||s,delete d.as),ms&&p[0]&&ms(d),Ks(p,d)}return i}}var jt=s=>typeof s=="function",Ge=(s,t)=>jt(s)?s(t):s,vt=(()=>{let s=0;return()=>(++s).toString()})(),qs=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),Nt=20,us="default",Is=(s,t)=>{let{toastLimit:a}=s.settings;switch(t.type){case 0:return{...s,toasts:[t.toast,...s.toasts].slice(0,a)};case 1:return{...s,toasts:s.toasts.map(c=>c.id===t.toast.id?{...c,...t.toast}:c)};case 2:let{toast:l}=t;return Is(s,{type:s.toasts.find(c=>c.id===l.id)?1:0,toast:l});case 3:let{toastId:i}=t;return{...s,toasts:s.toasts.map(c=>c.id===i||i===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(c=>c.id!==t.toastId)};case 5:return{...s,pausedAt:t.time};case 6:let n=t.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+n}))}}},Ke=[],Hs={toasts:[],pausedAt:void 0,settings:{toastLimit:Nt}},U={},Ps=(s,t=us)=>{U[t]=Is(U[t]||Hs,s),Ke.forEach(([a,l])=>{a===t&&l(U[t])})},Gs=s=>Object.keys(U).forEach(t=>Ps(s,t)),wt=s=>Object.keys(U).find(t=>U[t].toasts.some(a=>a.id===s)),Je=(s=us)=>t=>{Ps(t,s)},kt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},_t=(s={},t=us)=>{let[a,l]=r.useState(U[t]||Hs),i=r.useRef(U[t]);r.useEffect(()=>(i.current!==U[t]&&l(U[t]),Ke.push([t,l]),()=>{let c=Ke.findIndex(([d])=>d===t);c>-1&&Ke.splice(c,1)}),[t]);let n=a.toasts.map(c=>{var d,x,p;return{...s,...s[c.type],...c,removeDelay:c.removeDelay||((d=s[c.type])==null?void 0:d.removeDelay)||(s==null?void 0:s.removeDelay),duration:c.duration||((x=s[c.type])==null?void 0:x.duration)||(s==null?void 0:s.duration)||kt[c.type],style:{...s.style,...(p=s[c.type])==null?void 0:p.style,...c.style}}});return{...a,toasts:n}},St=(s,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...a,id:(a==null?void 0:a.id)||vt()}),Fe=s=>(t,a)=>{let l=St(t,s,a);return Je(l.toasterId||wt(l.id))({type:2,toast:l}),l.id},$=(s,t)=>Fe("blank")(s,t);$.error=Fe("error");$.success=Fe("success");$.loading=Fe("loading");$.custom=Fe("custom");$.dismiss=(s,t)=>{let a={type:3,toastId:s};t?Je(t)(a):Gs(a)};$.dismissAll=s=>$.dismiss(void 0,s);$.remove=(s,t)=>{let a={type:4,toastId:s};t?Je(t)(a):Gs(a)};$.removeAll=s=>$.remove(void 0,s);$.promise=(s,t,a)=>{let l=$.loading(t.loading,{...a,...a==null?void 0:a.loading});return typeof s=="function"&&(s=s()),s.then(i=>{let n=t.success?Ge(t.success,i):void 0;return n?$.success(n,{id:l,...a,...a==null?void 0:a.success}):$.dismiss(l),i}).catch(i=>{let n=t.error?Ge(t.error,i):void 0;n?$.error(n,{id:l,...a,...a==null?void 0:a.error}):$.dismiss(l)}),s};var Ct=1e3,At=(s,t="default")=>{let{toasts:a,pausedAt:l}=_t(s,t),i=r.useRef(new Map).current,n=r.useCallback((f,_=Ct)=>{if(i.has(f))return;let h=setTimeout(()=>{i.delete(f),c({type:4,toastId:f})},_);i.set(f,h)},[]);r.useEffect(()=>{if(l)return;let f=Date.now(),_=a.map(h=>{if(h.duration===1/0)return;let j=(h.duration||0)+h.pauseDuration-(f-h.createdAt);if(j<0){h.visible&&$.dismiss(h.id);return}return setTimeout(()=>$.dismiss(h.id,t),j)});return()=>{_.forEach(h=>h&&clearTimeout(h))}},[a,l,t]);let c=r.useCallback(Je(t),[t]),d=r.useCallback(()=>{c({type:5,time:Date.now()})},[c]),x=r.useCallback((f,_)=>{c({type:1,toast:{id:f,height:_}})},[c]),p=r.useCallback(()=>{l&&c({type:6,time:Date.now()})},[l,c]),g=r.useCallback((f,_)=>{let{reverseOrder:h=!1,gutter:j=8,defaultPosition:b}=_||{},w=a.filter(m=>(m.position||b)===(f.position||b)&&m.height),o=w.findIndex(m=>m.id===f.id),y=w.filter((m,E)=>E<o&&m.visible).length;return w.filter(m=>m.visible).slice(...h?[y+1]:[0,y]).reduce((m,E)=>m+(E.height||0)+j,0)},[a]);return r.useEffect(()=>{a.forEach(f=>{if(f.dismissed)n(f.id,f.removeDelay);else{let _=i.get(f.id);_&&(clearTimeout(_),i.delete(f.id))}})},[a,n]),{toasts:a,handlers:{updateHeight:x,startPause:d,endPause:p,calculateOffset:g}}},Et=V`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Mt=V`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Lt=V`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ft=re("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Et} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Mt} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Lt} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Bt=V`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Tt=re("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${Bt} 1s linear infinite;
`,Rt=V`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,$t=V`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,zt=re("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Rt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${$t} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ot=re("div")`
  position: absolute;
`,Dt=re("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Kt=V`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qt=re("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Kt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,It=({toast:s})=>{let{icon:t,type:a,iconTheme:l}=s;return t!==void 0?typeof t=="string"?r.createElement(qt,null,t):t:a==="blank"?null:r.createElement(Dt,null,r.createElement(Tt,{...l}),a!=="loading"&&r.createElement(Ot,null,a==="error"?r.createElement(Ft,{...l}):r.createElement(zt,{...l})))},Ht=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Pt=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Gt="0%{opacity:0;} 100%{opacity:1;}",Wt="0%{opacity:1;} 100%{opacity:0;}",Yt=re("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ut=re("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Zt=(s,t)=>{let a=s.includes("top")?1:-1,[l,i]=qs()?[Gt,Wt]:[Ht(a),Pt(a)];return{animation:t?`${V(l)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${V(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Qt=r.memo(({toast:s,position:t,style:a,children:l})=>{let i=s.height?Zt(s.position||t||"top-center",s.visible):{opacity:0},n=r.createElement(It,{toast:s}),c=r.createElement(Ut,{...s.ariaProps},Ge(s.message,s));return r.createElement(Yt,{className:s.className,style:{...i,...a,...s.style}},typeof l=="function"?l({icon:n,message:c}):r.createElement(r.Fragment,null,n,c))});bt(r.createElement);var Vt=({id:s,className:t,style:a,onHeightUpdate:l,children:i})=>{let n=r.useCallback(c=>{if(c){let d=()=>{let x=c.getBoundingClientRect().height;l(s,x)};d(),new MutationObserver(d).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[s,l]);return r.createElement("div",{ref:n,className:t,style:a},i)},Jt=(s,t)=>{let a=s.includes("top"),l=a?{top:0}:{bottom:0},i=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:qs()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...l,...i}},Xt=Ve`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$e=16,ea=({reverseOrder:s,position:t="top-center",toastOptions:a,gutter:l,children:i,toasterId:n,containerStyle:c,containerClassName:d})=>{let{toasts:x,handlers:p}=At(a,n);return r.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:$e,left:$e,right:$e,bottom:$e,pointerEvents:"none",...c},className:d,onMouseEnter:p.startPause,onMouseLeave:p.endPause},x.map(g=>{let f=g.position||t,_=p.calculateOffset(g,{reverseOrder:s,gutter:l,defaultPosition:t}),h=Jt(f,_);return r.createElement(Vt,{id:g.id,key:g.id,onHeightUpdate:p.updateHeight,className:g.visible?Xt:"",style:h},g.type==="custom"?Ge(g.message,g):i?i(g):r.createElement(Qt,{toast:g,position:f}))}))},M=$;const sa={};function ta(s,t){let a;try{a=s()}catch{return}return{getItem:i=>{var n;const c=x=>x===null?null:JSON.parse(x,void 0),d=(n=a.getItem(i))!=null?n:null;return d instanceof Promise?d.then(c):c(d)},setItem:(i,n)=>a.setItem(i,JSON.stringify(n,void 0)),removeItem:i=>a.removeItem(i)}}const Ee=s=>t=>{try{const a=s(t);return a instanceof Promise?a:{then(l){return Ee(l)(a)},catch(l){return this}}}catch(a){return{then(l){return this},catch(l){return Ee(l)(a)}}}},aa=(s,t)=>(a,l,i)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,o)=>({...o,...w}),...t},c=!1;const d=new Set,x=new Set;let p;try{p=n.getStorage()}catch{}if(!p)return s((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),a(...w)},l,i);const g=Ee(n.serialize),f=()=>{const w=n.partialize({...l()});let o;const y=g({state:w,version:n.version}).then(m=>p.setItem(n.name,m)).catch(m=>{o=m});if(o)throw o;return y},_=i.setState;i.setState=(w,o)=>{_(w,o),f()};const h=s((...w)=>{a(...w),f()},l,i);let j;const b=()=>{var w;if(!p)return;c=!1,d.forEach(y=>y(l()));const o=((w=n.onRehydrateStorage)==null?void 0:w.call(n,l()))||void 0;return Ee(p.getItem.bind(p))(n.name).then(y=>{if(y)return n.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==n.version){if(n.migrate)return n.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var m;return j=n.merge(y,(m=l())!=null?m:h),a(j,!0),f()}).then(()=>{o==null||o(j,void 0),c=!0,x.forEach(y=>y(j))}).catch(y=>{o==null||o(void 0,y)})};return i.persist={setOptions:w=>{n={...n,...w},w.getStorage&&(p=w.getStorage())},clearStorage:()=>{p==null||p.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>b(),hasHydrated:()=>c,onHydrate:w=>(d.add(w),()=>{d.delete(w)}),onFinishHydration:w=>(x.add(w),()=>{x.delete(w)})},b(),j||h},ra=(s,t)=>(a,l,i)=>{let n={storage:ta(()=>localStorage),partialize:b=>b,version:0,merge:(b,w)=>({...w,...b}),...t},c=!1;const d=new Set,x=new Set;let p=n.storage;if(!p)return s((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),a(...b)},l,i);const g=()=>{const b=n.partialize({...l()});return p.setItem(n.name,{state:b,version:n.version})},f=i.setState;i.setState=(b,w)=>{f(b,w),g()};const _=s((...b)=>{a(...b),g()},l,i);i.getInitialState=()=>_;let h;const j=()=>{var b,w;if(!p)return;c=!1,d.forEach(y=>{var m;return y((m=l())!=null?m:_)});const o=((w=n.onRehydrateStorage)==null?void 0:w.call(n,(b=l())!=null?b:_))||void 0;return Ee(p.getItem.bind(p))(n.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==n.version){if(n.migrate)return[!0,n.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var m;const[E,F]=y;if(h=n.merge(F,(m=l())!=null?m:_),a(h,!0),E)return g()}).then(()=>{o==null||o(h,void 0),h=l(),c=!0,x.forEach(y=>y(h))}).catch(y=>{o==null||o(void 0,y)})};return i.persist={setOptions:b=>{n={...n,...b},b.storage&&(p=b.storage)},clearStorage:()=>{p==null||p.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>j(),hasHydrated:()=>c,onHydrate:b=>(d.add(b),()=>{d.delete(b)}),onFinishHydration:b=>(x.add(b),()=>{x.delete(b)})},n.skipHydration||j(),h||_},la=(s,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((sa?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),aa(s,t)):ra(s,t),na=la,ia="/api/v1",A=tt.create({baseURL:ia,headers:{"Content-Type":"application/json"}});A.interceptors.response.use(s=>s,s=>{var t;return((t=s.response)==null?void 0:t.status)===401&&(window.location.href="/login"),Promise.reject(s)});const vs={getStats:()=>A.get("/admin/dashboard"),getAppStats:()=>A.get("/admin/app-stats")},Ae={getAll:s=>A.get("/admin/drivers",{params:s}),getById:s=>A.get(`/admin/drivers/${s}`),getLocations:(s,t)=>A.get(`/admin/drivers/${s}/locations`,{params:t}),getTrips:(s,t)=>A.get(`/admin/drivers/${s}/trips`,{params:t}),getStops:s=>A.get(`/admin/drivers/${s}/stops`)},da={getLive:()=>A.get("/admin/locations/live")},Ce={getAll:()=>A.get("/admin/surveys"),create:s=>A.post("/admin/surveys",s),update:(s,t)=>A.put(`/admin/surveys/${s}`,t),delete:s=>A.delete(`/admin/surveys/${s}`),getResponses:s=>A.get(`/admin/surveys/${s}/responses`)},Ns={getAll:()=>A.get("/admin/settings"),update:s=>A.put("/admin/settings",{settings:s})},Ws={send:s=>A.post("/admin/notifications/send",s),broadcast:s=>A.post("/admin/notifications/broadcast",s)},ws={getRoutes:s=>A.get("/admin/reports/routes",{params:s}),getStops:s=>A.get("/admin/reports/stops",{params:s})},H={create:s=>A.post("/admin/questions",s),createBulk:s=>A.post("/admin/questions/bulk",s),createBulkFiltered:s=>A.post("/admin/questions/bulk-filtered",s),getById:s=>A.get(`/admin/questions/${s}`),update:(s,t)=>A.put(`/admin/questions/${s}`,t),delete:s=>A.delete(`/admin/questions/${s}`),getPendingApproval:()=>A.get("/admin/questions/pending-approval"),approve:(s,t,a)=>A.post(`/admin/questions/${s}/approve`,{approved:t,rejection_reason:a}),send:s=>A.post(`/admin/questions/${s}/send`),getDriverQuestions:(s,t)=>A.get(`/admin/drivers/${s}/questions`,{params:{status:t}}),getDriverContext:s=>A.get(`/admin/drivers/${s}/context`),getStats:()=>A.get("/admin/questions/stats"),getDriversOnTrip:()=>A.get("/admin/questions/drivers-on-trip"),getIdleDrivers:()=>A.get("/admin/questions/idle-drivers")},We={getAll:s=>A.get("/admin/notification-templates",{params:{active:s}}),getById:s=>A.get(`/admin/notification-templates/${s}`),create:s=>A.post("/admin/notification-templates",s),update:(s,t)=>A.put(`/admin/notification-templates/${s}`,t),delete:s=>A.delete(`/admin/notification-templates/${s}`)},oa={getAll:()=>A.get("/admin/trigger-types")},Be=at()(na(s=>({user:null,token:null,isAuthenticated:!1,login:async(t,a)=>{const l=await A.post("/admin/auth/login",{email:t,password:a}),{admin:i,auth:n}=l.data;A.defaults.headers.common.Authorization=`Bearer ${n.access_token}`,s({user:i,token:n.access_token,isAuthenticated:!0})},logout:()=>{delete A.defaults.headers.common.Authorization,s({user:null,token:null,isAuthenticated:!1})}}),{name:"auth-storage",partialize:s=>({user:s.user,token:s.token,isAuthenticated:s.isAuthenticated})})),ks=Be.getState().token;ks&&(A.defaults.headers.common.Authorization=`Bearer ${ks}`);function ca({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const ma=r.forwardRef(ca);function xa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Ye=r.forwardRef(xa);function pa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Ys=r.forwardRef(pa);function ha({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const ua=r.forwardRef(ha);function ga({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const ya=r.forwardRef(ga);function fa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const _s=r.forwardRef(fa);function ba({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const ja=r.forwardRef(ba);function va({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const Us=r.forwardRef(va);function Na({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const wa=r.forwardRef(Na);function ka({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"}))}const _a=r.forwardRef(ka);function Sa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const gs=r.forwardRef(Sa);function Ca({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12.75c1.148 0 2.278.08 3.383.237 1.037.146 1.866.966 1.866 2.013 0 3.728-2.35 6.75-5.25 6.75S6.75 18.728 6.75 15c0-1.046.83-1.867 1.866-2.013A24.204 24.204 0 0 1 12 12.75Zm0 0c2.883 0 5.647.508 8.207 1.44a23.91 23.91 0 0 1-1.152 6.06M12 12.75c-2.883 0-5.647.508-8.208 1.44.125 2.104.52 4.136 1.153 6.06M12 12.75a2.25 2.25 0 0 0 2.248-2.354M12 12.75a2.25 2.25 0 0 1-2.248-2.354M12 8.25c.995 0 1.971-.08 2.922-.236.403-.066.74-.358.795-.762a3.778 3.778 0 0 0-.399-2.25M12 8.25c-.995 0-1.97-.08-2.922-.236-.402-.066-.74-.358-.795-.762a3.734 3.734 0 0 1 .4-2.253M12 8.25a2.25 2.25 0 0 0-2.248 2.146M12 8.25a2.25 2.25 0 0 1 2.248 2.146M8.683 5a6.032 6.032 0 0 1-1.155-1.002c.07-.63.27-1.222.574-1.747m.581 2.749A3.75 3.75 0 0 1 15.318 5m0 0c.427-.283.815-.62 1.155-.999a4.471 4.471 0 0 0-.575-1.752M4.921 6a24.048 24.048 0 0 0-.392 3.314c1.668.546 3.416.914 5.223 1.082M19.08 6c.205 1.08.337 2.187.392 3.314a23.882 23.882 0 0 1-5.223 1.082"}))}const ge=r.forwardRef(Ca);function Aa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Zs=r.forwardRef(Aa);function Ea({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Q=r.forwardRef(Ea);function Ma({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const Ss=r.forwardRef(Ma);function La({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const xs=r.forwardRef(La);function Fa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Ba=r.forwardRef(Fa);function Ta({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Ra=r.forwardRef(Ta);function $a({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const Cs=r.forwardRef($a);function za({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const Oa=r.forwardRef(za);function Da({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const pe=r.forwardRef(Da);function Ka({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Qs=r.forwardRef(Ka);function qa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const Ia=r.forwardRef(qa);function Ha({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ss=r.forwardRef(Ha);function Pa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const te=r.forwardRef(Pa);function Ga({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Vs=r.forwardRef(Ga);function Wa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const As=r.forwardRef(Wa);function Ya({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Ua=r.forwardRef(Ya);function Za({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const Qa=r.forwardRef(Za);function Va({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Ja=r.forwardRef(Va);function Xa({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const er=r.forwardRef(Xa);function sr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const he=r.forwardRef(sr);function tr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const qe=r.forwardRef(tr);function ar({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const Xe=r.forwardRef(ar);function rr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const ce=r.forwardRef(rr);function lr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const nr=r.forwardRef(lr);function ir({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const fe=r.forwardRef(ir);function dr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const ps=r.forwardRef(dr);function or({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const ts=r.forwardRef(or);function cr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const mr=r.forwardRef(cr);function xr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const pr=r.forwardRef(xr);function hr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const me=r.forwardRef(hr);function ur({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const O=r.forwardRef(ur);function gr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Ie=r.forwardRef(gr);function yr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const fr=r.forwardRef(yr);function br({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const Js=r.forwardRef(br);function jr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const vr=r.forwardRef(jr);function Nr({title:s,titleId:t,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?r.createElement("title",{id:t},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const be=r.forwardRef(Nr),wr=[{name:"Dashboard",href:"/dashboard",icon:Ja},{name:"ofrler",href:"/drivers",icon:Ie},{name:"Canl Harita",href:"/live-map",icon:qe},{name:"Analitik",href:"/analytics",icon:Q},{name:"Raporlar",href:"/reports",icon:Vs},{name:"Hata Takip",href:"/error-monitoring",icon:ge},{name:"Anketler",href:"/surveys",icon:Oa},{name:"Akll Sorular",href:"/questions",icon:ps},{name:"Bildirim ablonlar",href:"/notification-templates",icon:_a},{name:"Uygulama Ayarlar",href:"/app-config",icon:ma},{name:"Sistem Ayarlar",href:"/settings",icon:Qs}];function kr(){var d;const{user:s,logout:t}=Be(),a=Bs(),[l,i]=r.useState(!1),n=()=>{t(),a("/login")},c=()=>i(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-white shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between h-14 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-7 w-7 text-primary-600"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"TestSistem"})]}),e.jsx("button",{onClick:()=>i(!0),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100",children:e.jsx(wa,{className:"h-6 w-6"})})]})}),l&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black/50",onClick:c}),e.jsxs("div",{className:ye("fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out","lg:translate-x-0",l?"translate-x-0":"-translate-x-full"),children:[e.jsxs("div",{className:"flex h-16 items-center justify-between px-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-8 w-8 text-primary-600"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"TestSistem"})]}),e.jsx("button",{onClick:c,className:"lg:hidden p-1 rounded-lg text-gray-600 hover:bg-gray-100",children:e.jsx(be,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"mt-6 px-3 overflow-y-auto",style:{maxHeight:"calc(100vh - 180px)"},children:wr.map(x=>e.jsxs(it,{to:x.href,onClick:c,className:({isActive:p})=>ye("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium mb-1",p?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"),children:[e.jsx(x.icon,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:x.name})]},x.name))}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-primary-700 font-medium",children:(d=s==null?void 0:s.name)==null?void 0:d.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email})]})]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[e.jsx(ya,{className:"h-5 w-5"}),"k Yap"]})]})]}),e.jsx("div",{className:"lg:pl-64",children:e.jsxs("main",{className:"p-4 lg:p-6 pt-18 lg:pt-6",children:[e.jsx("div",{className:"lg:hidden h-14"})," ",e.jsx(dt,{})]})})]})}function _r(){const[s,t]=r.useState(""),[a,l]=r.useState(""),[i,n]=r.useState(!1),c=Be(p=>p.login),d=Bs(),x=async p=>{var g,f;p.preventDefault(),n(!0);try{await c(s,a),M.success("Giri baarl!"),d("/dashboard")}catch(_){M.error(((f=(g=_.response)==null?void 0:g.data)==null?void 0:f.error)||"Giri baarsz")}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(O,{className:"h-16 w-16 text-primary-600"})}),e.jsx("h2",{className:"mt-4 text-3xl font-bold text-gray-900",children:"TestSistem Admin"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Ynetim paneline giri yapn"})]}),e.jsx("form",{className:"mt-8 space-y-6",onSubmit:x,children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"E-posta"}),e.jsx("input",{id:"email",type:"email",required:!0,value:s,onChange:p=>t(p.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 px-4 py-2 border",placeholder:"E-posta adresinizi girin"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"ifre"}),e.jsx("input",{id:"password",type:"password",required:!0,value:a,onChange:p=>l(p.target.value),className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 px-4 py-2 border",placeholder:"ifrenizi girin"})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:i?"Giri yaplyor...":"Giri Yap"})]})}),e.jsx("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"ofr Uygulamas"}),e.jsx("p",{className:"text-xs text-green-600",children:"Android APK ndir"})]}),e.jsxs("a",{href:"/downloads/nakliyeo-v3.apk",download:!0,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ye,{className:"h-4 w-4"}),"APK ndir"]})]})})]})})}function X({title:s,value:t,icon:a,color:l,trend:i,trendLabel:n}){return e.jsx("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 sm:p-3 rounded-lg ${l}`,children:e.jsx(a,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:s}),e.jsx("p",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:t})]})]}),i!==void 0&&e.jsxs("div",{className:`hidden sm:flex items-center ${i>=0?"text-green-600":"text-red-600"}`,children:[i>=0?e.jsx(Us,{className:"h-4 w-4"}):e.jsx(ja,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm ml-1",children:[i>=0?"+":"",i,"%"]}),n&&e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:n})]})]})})}const ze=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];function Sr(){var g,f,_;const{data:s,isLoading:t}=T({queryKey:["dashboard"],queryFn:()=>vs.getStats(),refetchInterval:3e4}),{data:a}=T({queryKey:["questionStats"],queryFn:()=>H.getStats()}),{data:l}=T({queryKey:["driversOnTrip"],queryFn:()=>H.getDriversOnTrip()}),{data:i}=T({queryKey:["appStats"],queryFn:()=>vs.getAppStats(),refetchInterval:6e4}),n=s==null?void 0:s.data,c=i==null?void 0:i.data,d=[{name:"Pzt",seferler:45,mesafe:12500},{name:"Sal",seferler:52,mesafe:14200},{name:"ar",seferler:48,mesafe:13100},{name:"Per",seferler:61,mesafe:16800},{name:"Cum",seferler:55,mesafe:15400},{name:"Cmt",seferler:38,mesafe:10200},{name:"Paz",seferler:28,mesafe:7500}],x=Object.entries(((f=(g=a==null?void 0:a.data)==null?void 0:g.stats)==null?void 0:f.by_status)||{}).map(([h,j])=>({name:h==="draft"?"Taslak":h==="pending_approval"?"Onay Bekliyor":h==="approved"?"Onayl":h==="rejected"?"Reddedildi":h==="sent"?"Gnderildi":h==="answered"?"Cevapland":h==="expired"?"Sresi Doldu":h,value:j})),p=[{name:"Seferde",value:(n==null?void 0:n.drivers_on_trip)||0},{name:"Evde",value:(n==null?void 0:n.drivers_at_home)||0},{name:"Beklemede",value:((n==null?void 0:n.active_drivers)||0)-((n==null?void 0:n.drivers_on_trip)||0)-((n==null?void 0:n.drivers_at_home)||0)}].filter(h=>h.value>0);return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6",children:[e.jsx(X,{title:"Toplam ofr",value:(n==null?void 0:n.total_drivers)||0,icon:Ie,color:"bg-blue-500"}),e.jsx(X,{title:"Aktif ofr",value:(n==null?void 0:n.active_drivers)||0,icon:Ie,color:"bg-green-500",trend:12,trendLabel:"bu ay"}),e.jsx(X,{title:"Seferdeki ofr",value:(n==null?void 0:n.drivers_on_trip)||0,icon:O,color:"bg-orange-500"}),e.jsx(X,{title:"Evdeki ofr",value:(n==null?void 0:n.drivers_at_home)||0,icon:he,color:"bg-purple-500"})]}),c&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(te,{className:"h-6 w-6 text-primary-600 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Uygulama Durumu"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-600",children:c.drivers_with_app}),e.jsx("div",{className:"text-xs text-gray-500",children:"Uygulama Ykl"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["/ ",c.total_drivers," ofr"]})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.active_last_24h}),e.jsx("div",{className:"text-xs text-gray-500",children:"Son 24 Saat Aktif"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.active_last_7d}),e.jsx("div",{className:"text-xs text-gray-500",children:"Son 7 Gn Aktif"})]}),e.jsx("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-gray-700",children:c.ios_count}),e.jsx("div",{className:"text-xs text-gray-500",children:"iOS"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:c.android_count}),e.jsx("div",{className:"text-xs text-gray-500",children:"Android"})]})]})}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:c.background_loc_count}),e.jsx("div",{className:"text-xs text-gray-500",children:"Arka Plan Konum"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6",children:[e.jsx(X,{title:"Bugnk Sefer",value:(n==null?void 0:n.today_trips)||0,icon:O,color:"bg-indigo-500"}),e.jsx(X,{title:"Bugnk Mesafe",value:`${((n==null?void 0:n.today_distance_km)||0).toLocaleString()} km`,icon:he,color:"bg-cyan-500"}),e.jsx(X,{title:"Toplam Ara",value:(n==null?void 0:n.total_vehicles)||0,icon:O,color:"bg-teal-500"}),e.jsx(X,{title:"Anket Yant Oran",value:`%${((n==null?void 0:n.survey_response_rate)||0).toFixed(0)}`,icon:Cs,color:"bg-pink-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Haftalk Sefer Says"}),e.jsx("div",{className:"h-64",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(as,{data:d,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSeferler",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),e.jsx(ne,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),e.jsx(ie,{dataKey:"name",stroke:"#9CA3AF"}),e.jsx(de,{stroke:"#9CA3AF"}),e.jsx(Y,{contentStyle:{backgroundColor:"#FFF",border:"1px solid #E5E7EB",borderRadius:"0.5rem"}}),e.jsx(rs,{type:"monotone",dataKey:"seferler",stroke:"#3B82F6",fillOpacity:1,fill:"url(#colorSeferler)",name:"Sefer Says"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Haftalk Toplam Mesafe (km)"}),e.jsx("div",{className:"h-64",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs($s,{data:d,children:[e.jsx(ne,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),e.jsx(ie,{dataKey:"name",stroke:"#9CA3AF"}),e.jsx(de,{stroke:"#9CA3AF"}),e.jsx(Y,{contentStyle:{backgroundColor:"#FFF",border:"1px solid #E5E7EB",borderRadius:"0.5rem"},formatter:h=>[`${h.toLocaleString()} km`,"Mesafe"]}),e.jsx(zs,{dataKey:"mesafe",fill:"#10B981",radius:[4,4,0,0],name:"Mesafe"})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ofr Durumlar"}),e.jsx("div",{className:"h-64",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(ls,{children:[e.jsx(ns,{data:p,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",label:({name:h,percent:j})=>`${h} ${(j*100).toFixed(0)}%`,children:p.map((h,j)=>e.jsx(is,{fill:ze[j%ze.length]},`cell-${j}`))}),e.jsx(Y,{}),e.jsx(ds,{})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Soru Durumlar"}),e.jsx("div",{className:"h-64",children:x.length>0?e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(ls,{children:[e.jsx(ns,{data:x,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",label:({name:h,percent:j})=>`${h} ${(j*100).toFixed(0)}%`,children:x.map((h,j)=>e.jsx(is,{fill:ze[j%ze.length]},`cell-${j}`))}),e.jsx(Y,{}),e.jsx(ds,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Henz soru verisi yok"})})]})]}),((_=l==null?void 0:l.data)==null?void 0:_.drivers)&&l.data.drivers.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Seferdeki ofrler",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",l.data.drivers.length," ofr)"]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ofr"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balang"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesafe"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Hz"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.data.drivers.slice(0,5).map(h=>{var j;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx("span",{className:"text-primary-700 text-sm font-medium",children:(j=h.name)==null?void 0:j.charAt(0)})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[h.name," ",h.surname]}),e.jsx("p",{className:"text-xs text-gray-500",children:h.phone})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.start_province||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.trip_duration_minutes?`${Math.floor(h.trip_duration_minutes/60)}sa ${Math.round(h.trip_duration_minutes%60)}dk`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.distance_km?`${h.distance_km.toFixed(0)} km`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.current_speed?`${h.current_speed.toFixed(0)} km/h`:"-"})]},h.driver_id)})})]}),l.data.drivers.length>5&&e.jsx("div",{className:"text-center py-3",children:e.jsxs("a",{href:"/live-map",className:"text-sm text-primary-600 hover:text-primary-800",children:["Tmn Gr (",l.data.drivers.length," ofr)"]})})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg shadow p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Mobil Uygulama"}),e.jsx("p",{className:"text-green-100 mb-4",children:"ofrler iin Android uygulamasn indirin"}),e.jsxs("a",{href:"/downloads/nakliyeo-v3.apk",download:!0,className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-green-600 font-semibold rounded-lg hover:bg-green-50 transition-colors",children:[e.jsx(Ye,{className:"h-5 w-5"}),"APK ndir"]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx(te,{className:"h-24 w-24 text-green-200"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Hzl lemler"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("a",{href:"/live-map",className:"flex items-center justify-center gap-2 p-4 bg-primary-50 text-primary-700 rounded-lg hover:bg-primary-100",children:[e.jsx(he,{className:"h-5 w-5"}),e.jsx("span",{children:"Canl Harita"})]}),e.jsxs("a",{href:"/drivers",className:"flex items-center justify-center gap-2 p-4 bg-green-50 text-green-700 rounded-lg hover:bg-green-100",children:[e.jsx(Ie,{className:"h-5 w-5"}),e.jsx("span",{children:"ofrler"})]}),e.jsxs("a",{href:"/questions",className:"flex items-center justify-center gap-2 p-4 bg-orange-50 text-orange-700 rounded-lg hover:bg-orange-100",children:[e.jsx(Cs,{className:"h-5 w-5"}),e.jsx("span",{children:"Akll Sorular"})]}),e.jsxs("a",{href:"/reports",className:"flex items-center justify-center gap-2 p-4 bg-purple-50 text-purple-700 rounded-lg hover:bg-purple-100",children:[e.jsx(O,{className:"h-5 w-5"}),e.jsx("span",{children:"Raporlar"})]})]})]})]})}const Es={active:"Aktif",inactive:"Pasif",on_trip:"Seferde",at_home:"Evde"},Oe={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",on_trip:"bg-orange-100 text-orange-800",at_home:"bg-blue-100 text-blue-800"};function Cr(){var f,_;const[s,t]=r.useState(""),[a,l]=r.useState(0),i=20,{data:n,isLoading:c}=T({queryKey:["drivers",a,i],queryFn:()=>Ae.getAll({limit:i,offset:a*i})}),d=((f=n==null?void 0:n.data)==null?void 0:f.drivers)||[],x=((_=n==null?void 0:n.data)==null?void 0:_.total)||0,p=Math.ceil(x/i),g=d.filter(h=>h.name.toLowerCase().includes(s.toLowerCase())||h.surname.toLowerCase().includes(s.toLowerCase())||h.phone.includes(s));return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"ofrler"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Toplam: ",x," ofr"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(er,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ad, soyad veya telefon ile ara...",value:s,onChange:h=>t(h.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500"})]})}),e.jsx("div",{className:"block lg:hidden space-y-3",children:g.map(h=>e.jsxs(xe,{to:`/drivers/${h.id}`,className:"block bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-primary-700 font-medium text-sm",children:[h.name.charAt(0),h.surname.charAt(0)]})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[h.name," ",h.surname]}),e.jsx("div",{className:"text-xs text-gray-500",children:h.phone})]})]}),e.jsx("span",{className:ye("px-2 py-1 text-xs font-medium rounded-full",Oe[h.status]||Oe.inactive),children:Es[h.status]||"Bilinmiyor"})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("div",{children:h.province&&h.district?`${h.province}, ${h.district}`:"-"}),h.has_app&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:ye("h-4 w-4 mr-1",h.device_os==="ios"?"text-gray-600":"text-green-600")}),e.jsx("span",{children:h.device_os==="ios"?"iOS":"Android"})]})]})]},h.id))}),e.jsxs("div",{className:"hidden lg:block bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ofr"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Telefon"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Konum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uygulama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Son Aktif"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"lemler"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsxs("span",{className:"text-primary-700 font-medium",children:[h.name.charAt(0),h.surname.charAt(0)]})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[h.name," ",h.surname]}),e.jsx("div",{className:"text-sm text-gray-500",children:h.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.province&&h.district?`${h.province}, ${h.district}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.has_app?e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:ye("h-5 w-5 mr-1",h.device_os==="ios"?"text-gray-600":"text-green-600")}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-900",children:h.device_os==="ios"?"iOS":"Android"}),e.jsxs("div",{className:"text-gray-500",children:["v",h.app_version]})]})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"Ykl deil"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:ye("px-2 py-1 text-xs font-medium rounded-full",Oe[h.status]||Oe.inactive),children:Es[h.status]||"Bilinmiyor"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.last_active_at?new Date(h.last_active_at).toLocaleString("tr-TR"):h.last_location_at?new Date(h.last_location_at).toLocaleString("tr-TR"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(xe,{to:`/drivers/${h.id}`,className:"text-primary-600 hover:text-primary-900",children:"Detay"})})]},h.id))})]})}),g.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:"ofr bulunamad"})]}),g.length===0&&e.jsx("div",{className:"lg:hidden text-center py-12 text-gray-500 bg-white rounded-lg shadow",children:"ofr bulunamad"}),p>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 rounded-lg shadow",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>l(Math.max(0,a-1)),disabled:a===0,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"nceki"}),e.jsxs("span",{className:"flex items-center text-sm text-gray-500",children:[a+1," / ",p]}),e.jsx("button",{onClick:()=>l(Math.min(p-1,a+1)),disabled:a>=p-1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Sonraki"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:a*i+1})," - ",e.jsx("span",{className:"font-medium",children:Math.min((a+1)*i,x)})," / ",e.jsx("span",{className:"font-medium",children:x})," sonu"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>l(Math.max(0,a-1)),disabled:a===0,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:e.jsx(Ba,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>l(Math.min(p-1,a+1)),disabled:a>=p-1,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:e.jsx(Ra,{className:"h-5 w-5"})})]})})]})]})]})}delete ae.Icon.Default.prototype._getIconUrl;ae.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function Ar(){var o,y;const{id:s}=Ts(),[t,a]=r.useState(""),[l,i]=r.useState(""),[n,c]=r.useState(!1),{data:d,isLoading:x}=T({queryKey:["driver",s],queryFn:()=>Ae.getById(s),enabled:!!s}),{data:p}=T({queryKey:["driver-locations",s],queryFn:()=>Ae.getLocations(s),enabled:!!s}),{data:g}=T({queryKey:["driver-trips",s],queryFn:()=>Ae.getTrips(s,{limit:10}),enabled:!!s}),f=(d==null?void 0:d.data)||null,_=((o=p==null?void 0:p.data)==null?void 0:o.locations)||[],h=((y=g==null?void 0:g.data)==null?void 0:y.trips)||[],j=async()=>{if(!t||!l){M.error("Balk ve ierik gerekli");return}c(!0);try{await Ws.send({driver_id:s,title:t,body:l}),M.success("Bildirim gnderildi"),a(""),i("")}catch{M.error("Bildirim gnderilemedi")}finally{c(!1)}};if(x)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!f)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"ofr bulunamad"}),e.jsx(xe,{to:"/drivers",className:"text-primary-600 hover:text-primary-700 mt-2 inline-block",children:"Geri dn"})]});const b=_.length>0?_[0]:null,w=_.map(m=>[m.latitude,m.longitude]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(xe,{to:"/drivers",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ys,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[f.name," ",f.surname]}),e.jsx("p",{className:"text-gray-500",children:f.phone})]}),e.jsxs(xe,{to:`/drivers/${s}/routes`,className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(Q,{className:"h-5 w-5"}),"Gzergahlar Gr"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"ofr Bilgileri"}),e.jsxs("dl",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"E-posta"}),e.jsx("dd",{className:"text-sm font-medium",children:f.email})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Ev Adresi"}),e.jsxs("dd",{className:"text-sm font-medium",children:[f.district,", ",f.province]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Kayt Tarihi"}),e.jsx("dd",{className:"text-sm font-medium",children:new Date(f.created_at).toLocaleDateString("tr-TR")})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"Durum"}),e.jsx("dd",{children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:f.status==="active"?"Aktif":f.status==="on_trip"?"Seferde":f.status==="at_home"?"Evde":"Pasif"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Aralar"]}),f.vehicles&&f.vehicles.length>0?e.jsx("ul",{className:"space-y-3",children:f.vehicles.map(m=>e.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[m.brand," ",m.model]}),e.jsx("p",{className:"text-sm text-gray-500",children:m.plate})]}),m.is_active&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Aktif"})]},m.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Ara kayd yok"}),e.jsx("h3",{className:"text-md font-semibold mt-6 mb-3",children:"Dorseler"}),f.trailers&&f.trailers.length>0?e.jsx("ul",{className:"space-y-3",children:f.trailers.map(m=>e.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.type}),e.jsx("p",{className:"text-sm text-gray-500",children:m.plate})]}),m.is_active&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Aktif"})]},m.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Dorse kayd yok"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5"}),"Bildirim Gnder"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balk"}),e.jsx("input",{type:"text",value:t,onChange:m=>a(m.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Bildirim bal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"erik"}),e.jsx("textarea",{value:l,onChange:m=>i(m.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Bildirim ierii"})]}),e.jsx("button",{onClick:j,disabled:n,className:"w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 disabled:opacity-50",children:n?"Gnderiliyor...":"Gnder"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),"Konum Gemii"]}),e.jsx("div",{className:"h-96 rounded-lg overflow-hidden",children:e.jsxs(Ze,{center:b?[b.latitude,b.longitude]:[39.925533,32.866287],zoom:b?12:6,style:{height:"100%",width:"100%"},children:[e.jsx(Qe,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),b&&e.jsx(He,{position:[b.latitude,b.longitude],children:e.jsx(se,{children:e.jsxs("div",{children:[e.jsxs("strong",{children:[f.name," ",f.surname]}),e.jsx("br",{}),"Son konum: ",new Date(b.timestamp).toLocaleString("tr-TR"),e.jsx("br",{}),"Hz: ",b.speed.toFixed(1)," km/s"]})})}),w.length>1&&e.jsx(Pe,{positions:w,color:"blue",weight:3,opacity:.7})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Son Seferler"]}),h.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balang"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Biti"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesafe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Durum"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h.map(m=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(m.start_time).toLocaleString("tr-TR")}),e.jsx("td",{className:"px-4 py-3 text-sm",children:m.end_time?new Date(m.end_time).toLocaleString("tr-TR"):"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[m.distance_km.toFixed(1)," km"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m.status==="completed"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:m.status==="completed"?"Tamamland":"Devam Ediyor"})})]},m.id))})]})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Sefer kayd yok"})]})]})}delete ae.Icon.Default.prototype._getIconUrl;ae.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function Er(){var j,b,w;const{id:s}=Ts(),[t,a]=r.useState(null),[l,i]=r.useState({start:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),{data:n,isLoading:c}=T({queryKey:["driver-routes",s,l],queryFn:()=>A.get(`/admin/analytics/drivers/${s}/routes`,{params:{start_date:l.start,end_date:l.end}}),enabled:!!s}),{data:d}=T({queryKey:["trip-details",t],queryFn:()=>A.get(`/admin/analytics/trips/${t}/details`),enabled:!!t}),x=((j=n==null?void 0:n.data)==null?void 0:j.routes)||[],p=((b=d==null?void 0:d.data)==null?void 0:b.locations)||[],g=((w=d==null?void 0:d.data)==null?void 0:w.stops)||[],f=()=>t&&p.length>0?[p[0].latitude,p[0].longitude]:x.length>0&&x[0].start_latitude?[x[0].start_latitude,x[0].start_longitude]:[39,35],_=p.map(o=>[o.latitude,o.longitude]),h=o=>{switch(o){case"loading":return"#22c55e";case"unloading":return"#ef4444";case"rest_area":return"#3b82f6";case"gas_station":return"#f97316";case"parking":return"#6b7280";default:return"#8b5cf6"}};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(xe,{to:`/drivers/${s}`,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ys,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ofr Gzergahlar"}),e.jsx("p",{className:"text-gray-500",children:"Tm seferleri ve rotalar grntleyin"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Zs,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:l.start,onChange:o=>i(y=>({...y,start:o.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"date",value:l.end,onChange:o=>i(y=>({...y,end:o.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[x.length," sefer bulundu"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"font-semibold",children:"Seferler"})}),e.jsxs("div",{className:"max-h-[600px] overflow-y-auto",children:[x.map(o=>{var y;return e.jsxs("button",{onClick:()=>a(o.trip_id),className:`w-full text-left p-4 border-b hover:bg-gray-50 ${t===o.trip_id?"bg-primary-50":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[o.start_province,"  ",o.end_province||"?"]}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${o.status==="completed"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:o.status==="completed"?"Tamamland":"Devam Ediyor"})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:new Date(o.started_at).toLocaleString("tr-TR")}),e.jsxs("p",{children:[(y=o.distance_km)==null?void 0:y.toFixed(1)," km  ",o.duration_minutes," dk"]}),o.cargo_type&&e.jsxs("p",{className:"text-primary-600",children:["Yk: ",o.cargo_type]}),o.price&&e.jsxs("p",{className:"text-green-600 font-medium",children:[o.price," "]})]})]},o.trip_id)}),x.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Bu tarih aralnda sefer bulunamad"})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold",children:t?"Sefer Detay":"Harita"}),t&&e.jsx("button",{onClick:()=>a(null),className:"text-sm text-gray-500 hover:text-gray-700",children:"Temizle"})]}),e.jsx("div",{className:"h-[600px]",children:e.jsxs(Ze,{center:f(),zoom:t?10:6,style:{height:"100%",width:"100%"},children:[e.jsx(Qe,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t&&_.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(Pe,{positions:_,color:"#3b82f6",weight:4,opacity:.8}),e.jsx(He,{position:_[0],children:e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nr,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Balang"})]})})}),_.length>1&&e.jsx(He,{position:_[_.length-1],children:e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{children:"Biti"})]})})}),g.map(o=>e.jsx(Os,{center:[o.latitude,o.longitude],radius:8,fillColor:h(o.location_type),color:"white",weight:2,fillOpacity:.8,children:e.jsx(se,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:o.location_type==="loading"?"Ykleme":o.location_type==="unloading"?"Boaltma":o.location_type==="rest_area"?"Dinlenme":o.location_type==="gas_station"?"Benzinlik":"Durak"}),e.jsx("br",{}),o.province,", ",o.district,e.jsx("br",{}),"Sre: ",o.duration_minutes," dk",e.jsx("br",{}),new Date(o.started_at).toLocaleTimeString("tr-TR")]})})},o.id))]}),!t&&x.filter(o=>o.start_latitude&&o.end_latitude).map(o=>{var y;return e.jsx(Pe,{positions:[[o.start_latitude,o.start_longitude],[o.end_latitude,o.end_longitude]],color:o.status==="completed"?"#22c55e":"#f97316",weight:2,opacity:.6,eventHandlers:{click:()=>a(o.trip_id)},children:e.jsx(se,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("strong",{children:[o.start_province,"  ",o.end_province]}),e.jsx("br",{}),(y=o.distance_km)==null?void 0:y.toFixed(1)," km",e.jsx("br",{}),new Date(o.started_at).toLocaleDateString("tr-TR")]})})},o.trip_id)})]},t||"default")})]})]}),t&&g.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Sefer Duraklar"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:g.map((o,y)=>e.jsxs("div",{className:"border rounded-lg p-4",style:{borderLeftColor:h(o.location_type),borderLeftWidth:4},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["#",y+1," ",o.location_type==="loading"?"Ykleme":o.location_type==="unloading"?"Boaltma":o.location_type==="rest_area"?"Dinlenme":o.location_type==="gas_station"?"Benzinlik":"Durak"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[o.duration_minutes," dk"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[o.province,", ",o.district]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[new Date(o.started_at).toLocaleTimeString("tr-TR"),o.ended_at&&` - ${new Date(o.ended_at).toLocaleTimeString("tr-TR")}`]})]},o.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Durak Tipleri"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{children:"Ykleme"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{children:"Boaltma"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"Dinlenme"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),e.jsx("span",{children:"Benzinlik"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),e.jsx("span",{children:"Park"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{children:"Dier"})]})]})]})]})}delete ae.Icon.Default.prototype._getIconUrl;ae.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const oe={marmara:{name:"Marmara",color:"#3B82F6",center:[40.7,29],provinces:["stanbul","Kocaeli","Sakarya","Bursa","Balkesir","anakkale","Edirne","Krklareli","Tekirda","Yalova","Bilecik"]},ege:{name:"Ege",color:"#10B981",center:[38.5,28],provinces:["zmir","Aydn","Denizli","Mula","Manisa","Ktahya","Uak","Afyonkarahisar"]},akdeniz:{name:"Akdeniz",color:"#F59E0B",center:[36.8,32.5],provinces:["Antalya","Adana","Mersin","Hatay","Kahramanmara","Osmaniye","Isparta","Burdur"]},icAnadolu:{name:" Anadolu",color:"#EF4444",center:[39,33],provinces:["Ankara","Konya","Eskiehir","Kayseri","Sivas","Yozgat","Krehir","Nevehir","Aksaray","Nide","Karaman","Krkkale","ankr"]},karadeniz:{name:"Karadeniz",color:"#8B5CF6",center:[41,36],provinces:["Samsun","Trabzon","Ordu","Giresun","Rize","Artvin","Gmhane","Bayburt","Tokat","Amasya","orum","Sinop","Kastamonu","Bartn","Karabk","Zonguldak","Dzce","Bolu"]},doguAnadolu:{name:"Dou Anadolu",color:"#EC4899",center:[39.5,41],provinces:["Erzurum","Van","Malatya","Elaz","Erzincan","Mu","Bitlis","Bingl","Tunceli","Ar","Kars","Idr","Ardahan","Hakkari"]},guneydoguAnadolu:{name:"Gneydou Anadolu",color:"#06B6D4",center:[37.5,39.5],provinces:["Gaziantep","anlurfa","Diyarbakr","Mardin","Batman","Siirt","rnak","Adyaman","Kilis"]}},De=s=>new ae.DivIcon({className:"custom-marker",html:`<div style="
      background-color: ${s};
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    "></div>`,iconSize:[24,24],iconAnchor:[12,12]}),Ms={on_trip:De("#f97316"),at_home:De("#3b82f6"),active:De("#22c55e"),inactive:De("#6b7280")};function Mr({locations:s,selectedRegion:t}){const a=xt(),l=r.useRef(!1);return r.useEffect(()=>{if(t&&oe[t]){const i=oe[t];a.flyTo(i.center,7,{duration:1})}else if(s.length>0&&!l.current){const i=ae.latLngBounds(s.map(n=>[n.latitude,n.longitude]));a.fitBounds(i,{padding:[50,50]}),l.current=!0}else t||a.flyTo([39.925533,32.866287],6,{duration:1})},[s,a,t]),null}function Lr(){var w;const[s,t]=r.useState(null),[a,l]=r.useState(null),[i,n]=r.useState(null),[c,d]=r.useState(!1),[x,p]=r.useState([]),g=Be(o=>o.token),{data:f,isLoading:_}=T({queryKey:["live-locations"],queryFn:()=>da.getLive(),refetchInterval:1e4});r.useEffect(()=>{if(!g){console.log("No auth token, skipping WebSocket connection");return}let o;{const N=window.location.protocol==="https:"?"wss:":"ws:",C=window.location.hostname==="localhost"?"localhost:8080":window.location.host;o=`${N}//${C}/ws?type=admin&client_id=admin-panel-${Date.now()}&token=${encodeURIComponent(g)}`}let y=null,m,E;const F=()=>{try{y=new WebSocket(o),y.onopen=()=>{d(!0),console.log("WebSocket connected"),E=setInterval(()=>{(y==null?void 0:y.readyState)===WebSocket.OPEN&&y.send(JSON.stringify({type:"ping"}))},3e4)},y.onmessage=N=>{var C,B;try{const u=JSON.parse(N.data);if(u.type==="location_update"){const v={driver_id:u.driver_id,driver_name:((C=u.name)==null?void 0:C.split(" ")[0])||"",driver_surname:((B=u.name)==null?void 0:B.split(" ").slice(1).join(" "))||"",latitude:u.latitude,longitude:u.longitude,speed:u.speed||0,status:u.status||"active",updated_at:new Date(u.timestamp*1e3).toISOString(),province:u.province};p(L=>{const z=L.findIndex(K=>K.driver_id===u.driver_id);if(z>=0){const K=[...L];return K[z]=v,K}return[...L,v]})}else u.type==="driver_status"&&p(v=>v.map(L=>L.driver_id===u.driver_id?{...L,status:u.status}:L))}catch(u){console.error("WebSocket message parse error:",u)}},y.onclose=()=>{d(!1),clearInterval(E),console.log("WebSocket disconnected, reconnecting..."),m=setTimeout(F,5e3)},y.onerror=N=>{console.error("WebSocket error:",N),y==null||y.close()}}catch(N){console.error("WebSocket connection error:",N),m=setTimeout(F,5e3)}};return F(),()=>{clearTimeout(m),clearInterval(E),y==null||y.close()}},[g]),r.useEffect(()=>{var o;(o=f==null?void 0:f.data)!=null&&o.locations&&p(y=>{const E=[...f.data.locations];return y.forEach(F=>{const N=E.find(C=>C.driver_id===F.driver_id);if(N){if(new Date(F.updated_at)>new Date(N.updated_at)){const C=E.findIndex(B=>B.driver_id===F.driver_id);E[C]=F}}else E.push(F)}),E})},[f]);const h=x.filter(o=>{if(s&&o.status!==s)return!1;if(a){const y=oe[a];if(y&&o.province&&!y.provinces.includes(o.province))return!1}return!(i&&o.province!==i)}),j={on_trip:x.filter(o=>o.status==="on_trip").length,at_home:x.filter(o=>o.status==="at_home").length,active:x.filter(o=>o.status==="active").length,total:x.length},b=o=>{const y=oe[o];return x.filter(m=>m.province&&y.provinces.includes(m.province)).length};return _&&x.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Canl Harita"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`h-3 w-3 rounded-full ${c?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:c?"Canl balant aktif":"Balant kuruluyor..."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 mb-3 sm:mb-4",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 w-full sm:w-auto",children:"Durum:"}),e.jsxs("button",{onClick:()=>t(null),className:`px-2 py-1 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${s===null?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Tm (",j.total,")"]}),e.jsxs("button",{onClick:()=>t("on_trip"),className:`px-2 py-1 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${s==="on_trip"?"bg-orange-500 text-white":"bg-orange-100 text-orange-700 hover:bg-orange-200"}`,children:["Seferde (",j.on_trip,")"]}),e.jsxs("button",{onClick:()=>t("at_home"),className:`px-2 py-1 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${s==="at_home"?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:["Evde (",j.at_home,")"]}),e.jsxs("button",{onClick:()=>t("active"),className:`px-2 py-1 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${s==="active"?"bg-green-500 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:["Aktif (",j.active,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 w-full sm:w-auto sm:mr-2",children:"Blge:"}),e.jsx("button",{onClick:()=>{l(null),n(null)},className:`px-2 py-1 sm:px-3 sm:py-1.5 rounded-lg text-xs font-medium transition-colors ${a===null?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Tm Trkiye"}),Object.entries(oe).map(([o,y])=>e.jsxs("button",{onClick:()=>{l(o),n(null)},className:`px-2 py-1 sm:px-3 sm:py-1.5 rounded-lg text-xs font-medium transition-colors ${a===o?"text-white":"text-gray-700 hover:opacity-80"}`,style:{backgroundColor:a===o?y.color:`${y.color}20`,color:a===o?"white":y.color},children:[y.name," (",b(o),")"]},o))]}),a&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mt-2 sm:mt-3 pt-2 sm:pt-3 border-t",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 w-full sm:w-auto sm:mr-2",children:"l:"}),e.jsx("button",{onClick:()=>n(null),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${i===null?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Tm"}),(w=oe[a])==null?void 0:w.provinces.map(o=>{const y=x.filter(m=>m.province===o).length;return e.jsxs("button",{onClick:()=>n(o),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${i===o?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o," (",y,")"]},o)})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden h-[50vh] sm:h-[60vh] lg:h-[calc(100vh-340px)]",children:e.jsxs(Ze,{center:[39.925533,32.866287],zoom:6,style:{height:"100%",width:"100%"},children:[e.jsx(Qe,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Mr,{locations:h,selectedRegion:a}),h.map(o=>e.jsx(He,{position:[o.latitude,o.longitude],icon:Ms[o.status]||Ms.inactive,children:e.jsx(se,{children:e.jsxs("div",{className:"min-w-48",children:[e.jsxs("h3",{className:"font-semibold",children:[o.driver_name," ",o.driver_surname]}),o.province&&e.jsx("p",{className:"text-sm text-gray-600",children:o.province}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Hz: ",o.speed.toFixed(1)," km/s"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Gncelleme:"," ",new Date(o.updated_at).toLocaleTimeString("tr-TR")]}),e.jsxs("p",{className:"text-sm",children:["Durum:"," ",e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${o.status==="on_trip"?"bg-orange-100 text-orange-800":o.status==="at_home"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:o.status==="on_trip"?"Seferde":o.status==="at_home"?"Evde":"Aktif"})]}),e.jsx(xe,{to:`/drivers/${o.driver_id}`,className:"text-primary-600 hover:text-primary-700 text-sm mt-2 inline-block",children:"Detaya Git "})]})})},o.driver_id))]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-semibold mb-2 sm:mb-3",children:"Durum Aklamalar"}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:items-center gap-2 sm:gap-6 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-orange-500 border-2 border-white shadow"}),e.jsx("span",{children:"Seferde"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-blue-500 border-2 border-white shadow"}),e.jsx("span",{children:"Evde"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-green-500 border-2 border-white shadow"}),e.jsx("span",{children:"Aktif"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-gray-500 border-2 border-white shadow"}),e.jsx("span",{children:"Pasif"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-semibold mb-2 sm:mb-3",children:"Blge Dalm"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:Object.entries(oe).map(([o,y])=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:y.color}}),e.jsxs("span",{className:"truncate",children:[y.name,": ",b(o)]})]},o))})]})]})]})}const Fr={yes_no:"Evet/Hayr",multiple_choice:"oktan Semeli",scale:"lek (1-10)",price:"Fiyat",text:"Metin"},Br={manual:"Manuel",location:"Konum Bazl",time:"Zamanl",trip_end:"Sefer Bitii"};function Tr(){var B,u;const s=Le(),[t,a]=r.useState(!1),[l,i]=r.useState(!1),[n,c]=r.useState(null),[d,x]=r.useState({title:"",description:"",type:"yes_no",options:[""],is_active:!0,trigger_type:"manual"}),{data:p,isLoading:g}=T({queryKey:["surveys"],queryFn:()=>Ce.getAll()}),{data:f}=T({queryKey:["survey-responses",n==null?void 0:n.id],queryFn:()=>Ce.getResponses(n.id),enabled:!!n&&l}),_=q({mutationFn:v=>Ce.create(v),onSuccess:()=>{s.invalidateQueries({queryKey:["surveys"]}),M.success("Anket oluturuldu"),o()},onError:()=>M.error("Anket oluturulamad")}),h=q({mutationFn:({id:v,data:L})=>Ce.update(v,L),onSuccess:()=>{s.invalidateQueries({queryKey:["surveys"]}),M.success("Anket gncellendi"),o()},onError:()=>M.error("Anket gncellenemedi")}),j=q({mutationFn:v=>Ce.delete(v),onSuccess:()=>{s.invalidateQueries({queryKey:["surveys"]}),M.success("Anket silindi")},onError:()=>M.error("Anket silinemedi")}),b=((B=p==null?void 0:p.data)==null?void 0:B.surveys)||[],w=((u=f==null?void 0:f.data)==null?void 0:u.responses)||[],o=()=>{a(!1),c(null),x({title:"",description:"",type:"yes_no",options:[""],is_active:!0,trigger_type:"manual"})},y=v=>{c(v),x({title:v.title,description:v.description,type:v.type,options:v.options.length>0?v.options:[""],is_active:v.is_active,trigger_type:v.trigger_type}),a(!0)},m=v=>{v.preventDefault();const L={...d,options:d.type==="multiple_choice"?d.options.filter(z=>z.trim()!==""):[]};n?h.mutate({id:n.id,data:L}):_.mutate(L)},E=v=>{window.confirm("Bu anketi silmek istediinize emin misiniz?")&&j.mutate(v)},F=()=>{x(v=>({...v,options:[...v.options,""]}))},N=v=>{x(L=>({...L,options:L.options.filter((z,K)=>K!==v)}))},C=(v,L)=>{x(z=>({...z,options:z.options.map((K,J)=>J===v?L:K)}))};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Anketler"}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(fe,{className:"h-5 w-5"}),"Yeni Anket"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Anket"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tip"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tetikleyici"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Yant"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"lemler"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:b.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:v.title}),e.jsx("p",{className:"text-sm text-gray-500",children:v.description})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Fr[v.type]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Br[v.trigger_type]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:v.is_active?"Aktif":"Pasif"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:v.response_count||0}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{c(v),i(!0)},className:"p-1 text-gray-500 hover:text-primary-600",title:"Yantlar Gr",children:e.jsx(Ua,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>y(v),className:"p-1 text-gray-500 hover:text-primary-600",title:"Dzenle",children:e.jsx(ce,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>E(v.id),className:"p-1 text-gray-500 hover:text-red-600",title:"Sil",children:e.jsx(me,{className:"h-5 w-5"})})]})})]},v.id))})]}),b.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Henz anket oluturulmam"})]}),t&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:o}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:n?"Anketi Dzenle":"Yeni Anket"}),e.jsx("button",{onClick:o,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(be,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balk"}),e.jsx("input",{type:"text",required:!0,value:d.title,onChange:v=>x(L=>({...L,title:v.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aklama"}),e.jsx("textarea",{value:d.description,onChange:v=>x(L=>({...L,description:v.target.value})),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Tipi"}),e.jsxs("select",{value:d.type,onChange:v=>x(L=>({...L,type:v.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"yes_no",children:"Evet/Hayr"}),e.jsx("option",{value:"multiple_choice",children:"oktan Semeli"}),e.jsx("option",{value:"scale",children:"lek (1-10)"}),e.jsx("option",{value:"price",children:"Fiyat"}),e.jsx("option",{value:"text",children:"Metin"})]})]}),d.type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seenekler"}),e.jsxs("div",{className:"space-y-2",children:[d.options.map((v,L)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:v,onChange:z=>C(L,z.target.value),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2",placeholder:`Seenek ${L+1}`}),d.options.length>1&&e.jsx("button",{type:"button",onClick:()=>N(L),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:e.jsx(be,{className:"h-5 w-5"})})]},L)),e.jsx("button",{type:"button",onClick:F,className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Seenek Ekle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tetikleyici"}),e.jsxs("select",{value:d.trigger_type,onChange:v=>x(L=>({...L,trigger_type:v.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"manual",children:"Manuel"}),e.jsx("option",{value:"location",children:"Konum Bazl"}),e.jsx("option",{value:"time",children:"Zamanl"}),e.jsx("option",{value:"trip_end",children:"Sefer Bitii"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:d.is_active,onChange:v=>x(L=>({...L,is_active:v.target.checked})),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-gray-700",children:"Aktif"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsx("button",{type:"submit",disabled:_.isPending||h.isPending,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:_.isPending||h.isPending?"Kaydediliyor...":"Kaydet"})]})]})]})]})}),l&&n&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>{i(!1),c(null)}}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full p-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:[n.title," - Yantlar"]}),e.jsx("button",{onClick:()=>{i(!1),c(null)},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(be,{className:"h-5 w-5"})})]}),w.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"ofr"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Yant"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tarih"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(v=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:v.driver_name}),e.jsx("td",{className:"px-4 py-2 text-sm",children:v.answer}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:new Date(v.created_at).toLocaleString("tr-TR")})]},v.id))})]}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Henz yant yok"})]})]})})]})}function Rr(){const s=Le(),[t,a]=r.useState({sms_enabled:"false",sms_provider:"netgsm",sms_api_key:"",sms_api_secret:"",location_interval_active:"30",location_interval_idle:"300",location_interval_trip:"10",trip_start_speed_threshold:"15",trip_end_idle_minutes:"15",home_radius_meters:"200"}),[l,i]=r.useState(""),[n,c]=r.useState(""),[d,x]=r.useState(!1),{data:p,isLoading:g}=T({queryKey:["settings"],queryFn:()=>Ns.getAll()});r.useEffect(()=>{var j;(j=p==null?void 0:p.data)!=null&&j.settings&&a(b=>({...b,...p.data.settings}))},[p]);const f=q({mutationFn:j=>Ns.update(j),onSuccess:()=>{s.invalidateQueries({queryKey:["settings"]}),M.success("Ayarlar kaydedildi")},onError:()=>M.error("Ayarlar kaydedilemedi")}),_=j=>{j.preventDefault(),f.mutate(t)},h=async()=>{if(!l||!n){M.error("Balk ve ierik gerekli");return}x(!0);try{await Ws.broadcast({title:l,body:n}),M.success("Toplu bildirim gnderildi"),i(""),c("")}catch{M.error("Bildirim gnderilemedi")}finally{x(!1)}};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Qs,{className:"h-5 w-5"}),"Genel Ayarlar"]}),e.jsxs("form",{onSubmit:_,className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"border-b pb-3 sm:pb-4 mb-3 sm:mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 sm:mb-3 text-sm sm:text-base",children:"SMS Ayarlar"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"checkbox",id:"sms_enabled",checked:t.sms_enabled==="true",onChange:j=>a(b=>({...b,sms_enabled:j.target.checked?"true":"false"})),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"sms_enabled",className:"text-sm text-gray-700",children:"SMS Dorulama Aktif"})]}),t.sms_enabled==="true"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMS Salayc"}),e.jsx("select",{value:t.sms_provider,onChange:j=>a(b=>({...b,sms_provider:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:e.jsx("option",{value:"netgsm",children:"NetGSM"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),e.jsx("input",{type:"text",value:t.sms_api_key,onChange:j=>a(b=>({...b,sms_api_key:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Secret"}),e.jsx("input",{type:"password",value:t.sms_api_secret,onChange:j=>a(b=>({...b,sms_api_secret:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsxs("div",{className:"border-b pb-3 sm:pb-4 mb-3 sm:mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 sm:mb-3 text-sm sm:text-base",children:"Konum Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aktif Aral (sn)"}),e.jsx("input",{type:"number",value:t.location_interval_active,onChange:j=>a(b=>({...b,location_interval_active:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beklemede Aral (sn)"}),e.jsx("input",{type:"number",value:t.location_interval_idle,onChange:j=>a(b=>({...b,location_interval_idle:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sefer Aral (sn)"}),e.jsx("input",{type:"number",value:t.location_interval_trip,onChange:j=>a(b=>({...b,location_interval_trip:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ev Yarap (m)"}),e.jsx("input",{type:"number",value:t.home_radius_meters,onChange:j=>a(b=>({...b,home_radius_meters:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsxs("div",{className:"mb-3 sm:mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 sm:mb-3 text-sm sm:text-base",children:"Sefer Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balama Hz Eii (km/s)"}),e.jsx("input",{type:"number",value:t.trip_start_speed_threshold,onChange:j=>a(b=>({...b,trip_start_speed_threshold:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Biti Bekleme Sresi (dk)"}),e.jsx("input",{type:"number",value:t.trip_end_idle_minutes,onChange:j=>a(b=>({...b,trip_end_idle_minutes:j.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsx("button",{type:"submit",disabled:f.isPending,className:"w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 disabled:opacity-50",children:f.isPending?"Kaydediliyor...":"Kaydet"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5"}),"Toplu Bildirim Gnder"]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mb-3 sm:mb-4",children:"Tm aktif ofrlere ayn anda bildirim gnderin."}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balk"}),e.jsx("input",{type:"text",value:l,onChange:j=>i(j.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Bildirim bal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"erik"}),e.jsx("textarea",{value:n,onChange:j=>c(j.target.value),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Bildirim ierii"})]}),e.jsx("button",{onClick:h,disabled:d,className:"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 disabled:opacity-50",children:d?"Gnderiliyor...":"Tm ofrlere Gnder"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2 text-sm sm:text-base",children:"Ayar Aklamalar"}),e.jsxs("ul",{className:"text-xs sm:text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Aktif Aral:"})," ofr aktif olduunda konum gnderme skl"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Beklemede Aral:"})," ofr hareketsizken konum gnderme skl"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sefer Aral:"})," Sefer srasnda konum gnderme skl"]}),e.jsxs("li",{className:"hidden sm:list-item",children:[e.jsx("strong",{children:"Ev Yarap:"})," ofrn evde saylaca mesafe"]}),e.jsxs("li",{className:"hidden sm:list-item",children:[e.jsx("strong",{children:"Balama Hz Eii:"})," Seferin balad kabul edilen minimum hz"]}),e.jsxs("li",{className:"hidden sm:list-item",children:[e.jsx("strong",{children:"Biti Bekleme Sresi:"})," Bu sre hareketsiz kalnrsa sefer sonlandrlr"]})]})]})]})}const Ls=["#3b82f6","#22c55e","#f97316","#ef4444","#8b5cf6","#06b6d4","#ec4899"],ue={stanbul:[41.0082,28.9784],Ankara:[39.9334,32.8597],zmir:[38.4237,27.1428],Bursa:[40.1826,29.0665],Antalya:[36.8969,30.7133],Adana:[37,35.3213],Konya:[37.8746,32.4932],Gaziantep:[37.0662,37.3833],Mersin:[36.8121,34.6415],Kayseri:[38.7312,35.4787],Eskiehir:[39.7767,30.5206],Samsun:[41.2867,36.33],Denizli:[37.7765,29.0864],anlurfa:[37.1591,38.7969],Trabzon:[41.0027,39.7168],Diyarbakr:[37.9144,40.2306],Malatya:[38.3552,38.3095],Erzurum:[39.9,41.27],Van:[38.4891,43.4089],Batman:[37.8812,41.1351]};function $r(){var b,w,o,y;const[s,t]=r.useState("charts"),{data:a}=T({queryKey:["route-heatmap"],queryFn:()=>A.get("/admin/analytics/heatmap")}),{data:l}=T({queryKey:["province-stats"],queryFn:()=>A.get("/admin/analytics/province-stats")}),{data:i}=T({queryKey:["daily-stats"],queryFn:()=>A.get("/admin/analytics/daily-stats")}),{data:n}=T({queryKey:["price-matrix"],queryFn:()=>A.get("/admin/analytics/price-matrix")}),c=((b=a==null?void 0:a.data)==null?void 0:b.heatmap)||[],d=((w=l==null?void 0:l.data)==null?void 0:w.province_stats)||[],x=((o=i==null?void 0:i.data)==null?void 0:o.daily_stats)||[],p=((y=n==null?void 0:n.data)==null?void 0:y.price_matrix)||[],g=c.filter(m=>ue[m.from_province]&&ue[m.to_province]).map(m=>({positions:[ue[m.from_province],ue[m.to_province]],weight:Math.min(m.trip_count/2,10)+1,color:m.trip_count>20?"#ef4444":m.trip_count>10?"#f97316":"#3b82f6",route:m})),f=d.filter(m=>ue[m.province]).map(m=>({position:ue[m.province],radius:Math.min(m.driver_count*2,30)+5,stat:m})),_=[{id:"charts",label:"Grafikler",icon:Us},{id:"map",label:"Gzergah Haritas",icon:qe},{id:"stats",label:"statistikler",icon:Q},{id:"prices",label:"Fiyat Matrisi",icon:ss}],h=x.slice().reverse().map(m=>({date:new Date(m.stat_date).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit"}),sefer:m.total_trips,mesafe:Math.round(m.total_distance_km),ciro:Math.round(m.total_revenue),sofor:m.active_drivers,fiyat:Math.round(m.avg_price)})),j=d.slice(0,7).map(m=>({name:m.province,value:m.trip_count}));return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Analitik & Gzergahlar"})}),e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsx("nav",{className:"flex space-x-2 sm:space-x-8 min-w-max",children:_.map(m=>e.jsxs("button",{onClick:()=>t(m.id),className:`py-3 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center gap-1 sm:gap-2 whitespace-nowrap ${s===m.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(m.icon,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"hidden sm:inline",children:m.label}),e.jsx("span",{className:"sm:hidden",children:m.label.split(" ")[0]})]},m.id))})}),s==="charts"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:e.jsx(O,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Toplam Sefer"}),e.jsx("p",{className:"text-lg sm:text-xl font-semibold",children:x.reduce((m,E)=>m+E.total_trips,0)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:e.jsx(qe,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Toplam Mesafe"}),e.jsxs("p",{className:"text-lg sm:text-xl font-semibold",children:[(x.reduce((m,E)=>m+E.total_distance_km,0)/1e3).toFixed(0),"K km"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-orange-100 rounded-lg",children:e.jsx(ss,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Ort. Fiyat"}),e.jsxs("p",{className:"text-lg sm:text-xl font-semibold",children:[(x.reduce((m,E)=>m+E.avg_price,0)/(x.length||1)).toFixed(0)," TL"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-purple-100 rounded-lg",children:e.jsx(Q,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Toplam Ciro"}),e.jsxs("p",{className:"text-lg sm:text-xl font-semibold",children:[(x.reduce((m,E)=>m+E.total_revenue,0)/1e3).toFixed(0),"K TL"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Gunluk Sefer Trendi"}),e.jsx("div",{className:"h-[200px] sm:h-[300px]",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(as,{data:h,children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(ie,{dataKey:"date",fontSize:10}),e.jsx(de,{fontSize:10}),e.jsx(Y,{}),e.jsx(rs,{type:"monotone",dataKey:"sefer",stroke:"#3b82f6",fill:"#93c5fd",name:"Sefer Sayisi"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Gunluk Ciro Trendi"}),e.jsx("div",{className:"h-[200px] sm:h-[300px]",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(as,{data:h,children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(ie,{dataKey:"date",fontSize:10}),e.jsx(de,{fontSize:10}),e.jsx(Y,{formatter:m=>`${m.toLocaleString("tr-TR")} TL`}),e.jsx(rs,{type:"monotone",dataKey:"ciro",stroke:"#22c55e",fill:"#86efac",name:"Ciro (TL)"})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Gunluk Mesafe (km)"}),e.jsx("div",{className:"h-[200px] sm:h-[250px]",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs($s,{data:h.slice(-14),children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(ie,{dataKey:"date",fontSize:9}),e.jsx(de,{fontSize:9}),e.jsx(Y,{formatter:m=>`${m.toLocaleString("tr-TR")} km`}),e.jsx(zs,{dataKey:"mesafe",fill:"#f97316",name:"Mesafe (km)"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Aktif Sofor Sayisi"}),e.jsx("div",{className:"h-[200px] sm:h-[250px]",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(ys,{data:h.slice(-14),children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(ie,{dataKey:"date",fontSize:9}),e.jsx(de,{fontSize:9}),e.jsx(Y,{}),e.jsx(fs,{type:"monotone",dataKey:"sofor",stroke:"#8b5cf6",strokeWidth:2,dot:{fill:"#8b5cf6"},name:"Aktif Sofor"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4 sm:col-span-2 lg:col-span-1",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Il Bazli Sefer Dagilimi"}),e.jsx("div",{className:"h-[200px] sm:h-[250px]",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(ls,{children:[e.jsx(ns,{data:j,cx:"50%",cy:"50%",innerRadius:30,outerRadius:60,paddingAngle:2,dataKey:"value",label:({name:m,percent:E})=>`${m} ${(E*100).toFixed(0)}%`,labelLine:!1,children:j.map((m,E)=>e.jsx(is,{fill:Ls[E%Ls.length]},`cell-${E}`))}),e.jsx(Y,{})]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Ortalama Fiyat Trendi"}),e.jsx("div",{className:"h-[200px] sm:h-[300px]",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(ys,{data:h,children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(ie,{dataKey:"date",fontSize:10}),e.jsx(de,{fontSize:10}),e.jsx(Y,{formatter:m=>`${m.toLocaleString("tr-TR")} TL`}),e.jsx(ds,{}),e.jsx(fs,{type:"monotone",dataKey:"fiyat",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444"},name:"Ort. Fiyat (TL)"})]})})})]}),h.length===0&&e.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center text-gray-500",children:"Grafik verileri yukleniyor veya veri bulunmuyor..."})]}),s==="map"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold mb-1 sm:mb-2",children:"Trkiye Gzergah Haritas"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mb-3 sm:mb-4",children:"izgi kalnl sefer saysn, daire bykl ofr saysn gsterir."}),e.jsx("div",{className:"h-[50vh] sm:h-[60vh] lg:h-[600px] rounded-lg overflow-hidden",children:e.jsxs(Ze,{center:[39,35],zoom:6,style:{height:"100%",width:"100%"},children:[e.jsx(Qe,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),g.map((m,E)=>{var F,N;return e.jsx(Pe,{positions:m.positions,color:m.color,weight:m.weight,opacity:.6,children:e.jsx(se,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("strong",{children:[m.route.from_province,"  ",m.route.to_province]}),e.jsx("br",{}),"Sefer Says: ",m.route.trip_count,e.jsx("br",{}),"Ort. Mesafe: ",(F=m.route.avg_distance_km)==null?void 0:F.toFixed(0)," km",e.jsx("br",{}),"Ort. Fiyat: ",(N=m.route.avg_price)==null?void 0:N.toFixed(0)," "]})})},E)}),f.map((m,E)=>{var F;return e.jsx(Os,{center:m.position,radius:m.radius,fillColor:"#22c55e",color:"#16a34a",weight:2,opacity:.8,fillOpacity:.5,children:e.jsx(se,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:m.stat.province}),e.jsx("br",{}),"ofr: ",m.stat.driver_count,e.jsx("br",{}),"Sefer: ",m.stat.trip_count,e.jsx("br",{}),"Toplam Mesafe: ",(F=m.stat.total_distance_km)==null?void 0:F.toFixed(0)," km"]})})},E)})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:[e.jsx("h3",{className:"font-medium text-sm sm:text-base mb-2 sm:mb-3",children:"Harita Aklamalar"}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-3 sm:gap-6 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 sm:w-8 h-1 bg-blue-500 rounded"}),e.jsx("span",{children:"1-10 Sefer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 sm:w-8 h-1 bg-orange-500 rounded"}),e.jsx("span",{children:"11-20 Sefer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 sm:w-8 h-1 bg-red-500 rounded"}),e.jsx("span",{children:"20+ Sefer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-green-500 opacity-60"}),e.jsx("span",{children:"l (ofr says)"})]})]})]})]}),s==="stats"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:e.jsx(O,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Toplam Sefer"}),e.jsx("p",{className:"text-lg sm:text-xl font-semibold",children:x.reduce((m,E)=>m+E.total_trips,0)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:e.jsx(qe,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Toplam Mesafe"}),e.jsxs("p",{className:"text-lg sm:text-xl font-semibold",children:[(x.reduce((m,E)=>m+E.total_distance_km,0)/1e3).toFixed(0),"K km"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-orange-100 rounded-lg",children:e.jsx(ss,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Ort. Fiyat"}),e.jsxs("p",{className:"text-lg sm:text-xl font-semibold",children:[(x.reduce((m,E)=>m+E.avg_price,0)/(x.length||1)).toFixed(0)," "]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-purple-100 rounded-lg",children:e.jsx(Q,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Toplam Ciro"}),e.jsxs("p",{className:"text-lg sm:text-xl font-semibold",children:[(x.reduce((m,E)=>m+E.total_revenue,0)/1e3).toFixed(0),"K "]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b",children:e.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"l Bazl statistikler"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"l"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ofr"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sefer"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase hidden sm:table-cell",children:"Mesafe"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fiyat"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.slice(0,20).map((m,E)=>{var F,N;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm font-medium",children:m.province}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm",children:m.driver_count}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm",children:m.trip_count}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm hidden sm:table-cell",children:[(F=m.total_distance_km)==null?void 0:F.toFixed(0)," km"]}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm",children:[(N=m.avg_price)==null?void 0:N.toFixed(0)," "]})]},E)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b",children:e.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Gnlk statistikler"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tarih"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase hidden sm:table-cell",children:"ofr"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sefer"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase hidden sm:table-cell",children:"Mesafe"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fiyat"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ciro"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.slice(0,30).map((m,E)=>{var F,N,C;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm font-medium whitespace-nowrap",children:new Date(m.stat_date).toLocaleDateString("tr-TR")}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm hidden sm:table-cell",children:m.active_drivers}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm",children:m.total_trips}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm hidden sm:table-cell",children:[(F=m.total_distance_km)==null?void 0:F.toFixed(0)," km"]}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm",children:[(N=m.avg_price)==null?void 0:N.toFixed(0)," "]}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm",children:[(C=m.total_revenue)==null?void 0:C.toFixed(0)," "]})]},E)})})]})})]})]}),s==="prices"&&e.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b",children:[e.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"ehirleraras Fiyat Matrisi"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Gzergah bazl ortalama fiyatlar ve gvenilirlik seviyeleri"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nereden"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nereye"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase hidden sm:table-cell",children:"Sefer"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Mesafe"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fiyat"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"TL/Km"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gven"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map((m,E)=>{var F,N,C;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm font-medium",children:m.from_province}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm",children:m.to_province}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm hidden sm:table-cell",children:m.trip_count}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm hidden md:table-cell",children:[(F=m.avg_distance_km)==null?void 0:F.toFixed(0)," km"]}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm font-medium text-green-600",children:[(N=m.avg_price)==null?void 0:N.toFixed(0)," "]}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm hidden md:table-cell",children:[(C=m.price_per_km_avg)==null?void 0:C.toFixed(2)," "]}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:e.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs rounded-full ${m.confidence_level==="high_confidence"?"bg-green-100 text-green-800":m.confidence_level==="medium_confidence"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:m.confidence_level==="high_confidence"?"Yksek":m.confidence_level==="medium_confidence"?"Orta":"Dk"})})]},E)})})]})}),p.length===0&&e.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 text-sm",children:"Henz yeterli fiyat verisi yok"})]})})]})}function zr(){var N,C,B;const s=Le(),[t,a]=r.useState("cargo"),[l,i]=r.useState(null),[n,c]=r.useState(null),{data:d}=T({queryKey:["cargo-types"],queryFn:()=>A.get("/admin/config/cargo-types")}),{data:x}=T({queryKey:["vehicle-brands"],queryFn:()=>A.get("/admin/config/vehicle-brands")}),{data:p}=T({queryKey:["trailer-types"],queryFn:()=>A.get("/admin/config/trailer-types")}),{data:g}=T({queryKey:["mobile-config"],queryFn:()=>A.get("/admin/config/mobile")}),f=((N=d==null?void 0:d.data)==null?void 0:N.cargo_types)||[],_=((C=x==null?void 0:x.data)==null?void 0:C.vehicle_brands)||[],h=((B=p==null?void 0:p.data)==null?void 0:B.trailer_types)||[],j=(g==null?void 0:g.data)||null,b=q({mutationFn:u=>u.action==="delete"?A.delete(`/admin/config/cargo-types/${u.id}`):u.id?A.put(`/admin/config/cargo-types/${u.id}`,u.item):A.post("/admin/config/cargo-types",u.item),onSuccess:()=>{s.invalidateQueries({queryKey:["cargo-types"]}),M.success("Kaydedildi"),i(null)},onError:()=>M.error("Hata olutu")}),w=q({mutationFn:u=>u.action==="delete"?A.delete(`/admin/config/vehicle-brands/${u.id}`):u.id?A.put(`/admin/config/vehicle-brands/${u.id}`,u.item):A.post("/admin/config/vehicle-brands",u.item),onSuccess:()=>{s.invalidateQueries({queryKey:["vehicle-brands"]}),M.success("Kaydedildi"),i(null)},onError:()=>M.error("Hata olutu")}),o=q({mutationFn:u=>u.action==="delete"?A.delete(`/admin/config/vehicle-models/${u.id}`):u.id?A.put(`/admin/config/vehicle-models/${u.id}`,u.item):A.post(`/admin/config/vehicle-brands/${u.brandId}/models`,u.item),onSuccess:()=>{s.invalidateQueries({queryKey:["vehicle-brands"]}),M.success("Kaydedildi"),c(null)},onError:()=>M.error("Hata olutu")}),y=q({mutationFn:u=>u.action==="delete"?A.delete(`/admin/config/trailer-types/${u.id}`):u.id?A.put(`/admin/config/trailer-types/${u.id}`,u.item):A.post("/admin/config/trailer-types",u.item),onSuccess:()=>{s.invalidateQueries({queryKey:["trailer-types"]}),M.success("Kaydedildi"),i(null)},onError:()=>M.error("Hata olutu")}),m=q({mutationFn:u=>A.put("/admin/config/mobile",u),onSuccess:()=>{s.invalidateQueries({queryKey:["mobile-config"]}),M.success("Mobil ayarlar kaydedildi")},onError:()=>M.error("Mobil ayarlar kaydedilemedi")}),E=(u,v)=>{window.confirm("Silmek istediinize emin misiniz?")&&(u==="cargo"?b.mutate({id:v,item:{},action:"delete"}):u==="vehicles"?w.mutate({id:v,item:{},action:"delete"}):y.mutate({id:v,item:{},action:"delete"}))},F=[{id:"cargo",label:"Yk Tipleri",icon:Ia,count:f.length},{id:"vehicles",label:"Ara Markalar",icon:O,count:_.length},{id:"trailers",label:"Dorse Tipleri",icon:pr,count:h.length},{id:"mobile",label:"Mobil Ayarlar",icon:te}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Uygulama Ayarlar"}),e.jsx("p",{className:"text-gray-500",children:"Mobil uygulamada grntlenecek seenekleri ynetin"})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:F.map(u=>e.jsxs("button",{onClick:()=>a(u.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${t===u.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(u.icon,{className:"h-5 w-5"}),u.label,u.count!==void 0&&e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:u.count})]},u.id))})}),t==="cargo"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold",children:"Yk Tipleri"}),e.jsxs("button",{onClick:()=>i({type:"cargo",item:{}}),className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(fe,{className:"h-5 w-5"}),"Yeni Ekle"]})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sra"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aklama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"kon"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"lemler"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(u=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:u.sort_order}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:u.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:u.description}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:u.icon}),e.jsxs("td",{className:"px-6 py-4 text-right",children:[e.jsx("button",{onClick:()=>i({type:"cargo",item:u}),className:"text-gray-500 hover:text-primary-600 p-1",children:e.jsx(ce,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>E("cargo",u.id),className:"text-gray-500 hover:text-red-600 p-1 ml-2",children:e.jsx(me,{className:"h-5 w-5"})})]})]},u.id))})]})]}),t==="vehicles"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold",children:"Ara Markalar"}),e.jsxs("button",{onClick:()=>i({type:"vehicles",item:{}}),className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(fe,{className:"h-5 w-5"}),"Yeni Marka"]})]}),_.map(u=>{var v;return e.jsxs("div",{className:"border-b last:border-b-0",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"font-medium",children:u.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",((v=u.models)==null?void 0:v.length)||0," model)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c({brandId:u.id}),className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Model Ekle"}),e.jsx("button",{onClick:()=>i({type:"vehicles",item:u}),className:"text-gray-500 hover:text-primary-600 p-1",children:e.jsx(ce,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>E("vehicles",u.id),className:"text-gray-500 hover:text-red-600 p-1",children:e.jsx(me,{className:"h-5 w-5"})})]})]}),u.models&&u.models.length>0&&e.jsx("div",{className:"p-4 pl-12 grid grid-cols-2 md:grid-cols-4 gap-2",children:u.models.map(L=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-100 rounded px-3 py-1",children:[e.jsx("span",{className:"text-sm",children:L.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>c({brandId:u.id,model:L}),className:"text-gray-400 hover:text-primary-600 p-1",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{window.confirm("Modeli silmek istiyor musunuz?")&&o.mutate({brandId:u.id,id:L.id,item:{},action:"delete"})},className:"text-gray-400 hover:text-red-600 p-1",children:e.jsx(me,{className:"h-4 w-4"})})]})]},L.id))})]},u.id)})]})}),t==="trailers"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold",children:"Dorse Tipleri"}),e.jsxs("button",{onClick:()=>i({type:"trailers",item:{}}),className:"flex items-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:[e.jsx(fe,{className:"h-5 w-5"}),"Yeni Ekle"]})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sra"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aklama"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"lemler"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h.map(u=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:u.sort_order}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:u.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:u.description}),e.jsxs("td",{className:"px-6 py-4 text-right",children:[e.jsx("button",{onClick:()=>i({type:"trailers",item:u}),className:"text-gray-500 hover:text-primary-600 p-1",children:e.jsx(ce,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>E("trailers",u.id),className:"text-gray-500 hover:text-red-600 p-1 ml-2",children:e.jsx(me,{className:"h-5 w-5"})})]})]},u.id))})]})]}),t==="mobile"&&j&&e.jsx(Kr,{config:j,onSave:u=>m.mutate(u),isLoading:m.isPending}),l&&e.jsx(Or,{type:l.type,item:l.item,onClose:()=>i(null),onSave:u=>{const v=u.id?"update":"create";l.type==="cargo"?b.mutate({id:u.id,item:u,action:v}):l.type==="vehicles"?w.mutate({id:u.id,item:u,action:v}):y.mutate({id:u.id,item:u,action:v})}}),n&&e.jsx(Dr,{brandId:n.brandId,model:n.model,onClose:()=>c(null),onSave:u=>{var v;o.mutate({brandId:n.brandId,id:(v=n.model)==null?void 0:v.id,item:u,action:n.model?"update":"create"})}})]})}function Or({type:s,item:t,onClose:a,onSave:l}){const[i,n]=r.useState({name:t.name||"",description:t.description||"",icon:t.icon||"",sort_order:t.sort_order||0,is_active:t.is_active??!0}),c=x=>{x.preventDefault(),l({...i,id:t.id})},d=s==="cargo"?t.id?"Yk Tipi Dzenle":"Yeni Yk Tipi":s==="vehicles"?t.id?"Marka Dzenle":"Yeni Marka":t.id?"Dorse Tipi Dzenle":"Yeni Dorse Tipi";return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:d}),e.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(be,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad"}),e.jsx("input",{type:"text",required:!0,value:i.name,onChange:x=>n(p=>({...p,name:x.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),s!=="vehicles"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aklama"}),e.jsx("textarea",{value:i.description,onChange:x=>n(p=>({...p,description:x.target.value})),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),s==="cargo"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"kon"}),e.jsx("input",{type:"text",value:i.icon,onChange:x=>n(p=>({...p,icon:x.target.value})),placeholder:"food, construction, etc.",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sra"}),e.jsx("input",{type:"number",value:i.sort_order,onChange:x=>n(p=>({...p,sort_order:parseInt(x.target.value)||0})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Kaydet"})]})]})]})]})})}function Dr({brandId:s,model:t,onClose:a,onSave:l}){const[i,n]=r.useState((t==null?void 0:t.name)||""),c=d=>{d.preventDefault(),l({name:i,is_active:!0})};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:t?"Model Dzenle":"Yeni Model"}),e.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(be,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Ad"}),e.jsx("input",{type:"text",required:!0,value:i,onChange:d=>n(d.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Actros, FH16, etc."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Kaydet"})]})]})]})]})})}function Kr({config:s,onSave:t,isLoading:a}){const[l,i]=r.useState(s),n=d=>{d.preventDefault(),t(l)},c=(d,x)=>{i(p=>({...p,[d]:x}))};return e.jsxs("form",{onSubmit:n,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Konum Gncelleme Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hareket Gncelleme Aral (sn)"}),e.jsx("input",{type:"number",value:l.location_update_interval_moving,onChange:d=>c("location_update_interval_moving",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hareket halindeyken konum gncelleme skl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sabit Gncelleme Aral (sn)"}),e.jsx("input",{type:"number",value:l.location_update_interval_stationary,onChange:d=>c("location_update_interval_stationary",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Durunca konum gncelleme skl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Yer Deiiklii (m)"}),e.jsx("input",{type:"number",value:l.minimum_displacement_meters,onChange:d=>c("minimum_displacement_meters",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Konum gncellemesi iin minimum hareket mesafesi"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hzl Hareket Eii (km/sa)"}),e.jsx("input",{type:"number",value:l.fast_moving_threshold_kmh,onChange:d=>c("fast_moving_threshold_kmh",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bu hzn zerinde daha sk gncelleme"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hzl Hareket Aral (sn)"}),e.jsx("input",{type:"number",value:l.fast_moving_interval_seconds,onChange:d=>c("fast_moving_interval_seconds",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hzl harekette gncelleme skl"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Pil Optimizasyonu"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"battery_optimization",checked:l.battery_optimization_enabled,onChange:d=>c("battery_optimization_enabled",d.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"battery_optimization",className:"ml-2 text-sm font-medium text-gray-700",children:"Pil Optimizasyonu Aktif"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konum Hassasiyeti"}),e.jsxs("select",{value:l.location_accuracy_mode,onChange:d=>c("location_accuracy_mode",d.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"high",children:"Yksek (GPS)"}),e.jsx("option",{value:"balanced",children:"Dengeli (GPS + A)"}),e.jsx("option",{value:"low_power",children:"Dk G (A)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dk Pil Eii (%)"}),e.jsx("input",{type:"number",min:"5",max:"50",value:l.low_battery_threshold,onChange:d=>c("low_battery_threshold",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dk Pil Aral (sn)"}),e.jsx("input",{type:"number",value:l.low_battery_interval_seconds,onChange:d=>c("low_battery_interval_seconds",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dk pilde gncelleme skl"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Offline Mod"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"offline_mode",checked:l.offline_mode_enabled,onChange:d=>c("offline_mode_enabled",d.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"offline_mode",className:"ml-2 text-sm font-medium text-gray-700",children:"Offline Mod Aktif"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"sync_wifi",checked:l.sync_on_wifi_only,onChange:d=>c("sync_on_wifi_only",d.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"sync_wifi",className:"ml-2 text-sm font-medium text-gray-700",children:"Sadece WiFi'da Senkronize Et"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maks. Offline Konum Says"}),e.jsx("input",{type:"number",value:l.max_offline_locations,onChange:d=>c("max_offline_locations",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Aral (dk)"}),e.jsx("input",{type:"number",value:l.offline_sync_interval_minutes,onChange:d=>c("offline_sync_interval_minutes",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maks. Offline Veri (MB)"}),e.jsx("input",{type:"number",value:l.max_offline_data_size_mb,onChange:d=>c("max_offline_data_size_mb",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Aktivite Alglama"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"activity_recognition",checked:l.activity_recognition_enabled,onChange:d=>c("activity_recognition_enabled",d.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"activity_recognition",className:"ml-2 text-sm font-medium text-gray-700",children:"Aktivite Alglama Aktif"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"stop_detection",checked:l.stop_detection_enabled,onChange:d=>c("stop_detection_enabled",d.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"stop_detection",className:"ml-2 text-sm font-medium text-gray-700",children:"Durak Alglama Aktif"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durak Alglama Yarap (m)"}),e.jsx("input",{type:"number",value:l.stop_detection_radius_meters,onChange:d=>c("stop_detection_radius_meters",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min. Durak Sresi (dk)"}),e.jsx("input",{type:"number",value:l.stop_detection_min_minutes,onChange:d=>c("stop_detection_min_minutes",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Genel Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heartbeat Aral (dk)"}),e.jsx("input",{type:"number",value:l.heartbeat_interval_minutes,onChange:d=>c("heartbeat_interval_minutes",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uygulama aktiflik kontrol skl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Veri Saklama Sresi (gn)"}),e.jsx("input",{type:"number",value:l.data_retention_days,onChange:d=>c("data_retention_days",parseInt(d.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Uygulama Versiyonu"}),e.jsx("input",{type:"text",value:l.min_app_version,onChange:d=>c("min_app_version",d.target.value),placeholder:"1.0.0",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"force_update",checked:l.force_update_enabled,onChange:d=>c("force_update_enabled",d.target.checked),className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),e.jsx("label",{htmlFor:"force_update",className:"ml-2 text-sm font-medium text-gray-700",children:"Zorunlu Gncelleme Aktif"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Kaydediliyor...":"Ayarlar Kaydet"})})]})}const Me=[{id:"yes_no",name:"Evet/Hayr"},{id:"multiple_choice",name:"oktan Semeli"},{id:"text",name:"Metin"},{id:"number",name:"Say"},{id:"price",name:"Fiyat (TL)"}],Ue={draft:{label:"Taslak",color:"bg-gray-100 text-gray-800"},pending_approval:{label:"Onay Bekliyor",color:"bg-yellow-100 text-yellow-800"},approved:{label:"Onayland",color:"bg-blue-100 text-blue-800"},sent:{label:"Gnderildi",color:"bg-green-100 text-green-800"},answered:{label:"Cevapland",color:"bg-purple-100 text-purple-800"},expired:{label:"Sresi Doldu",color:"bg-red-100 text-red-800"},rejected:{label:"Reddedildi",color:"bg-red-100 text-red-800"}},Fs={Tm:[],Marmara:["stanbul","Kocaeli","Bursa","Balkesir","anakkale","Edirne","Krklareli","Tekirda","Sakarya","Yalova","Bilecik"],Ege:["zmir","Aydn","Denizli","Mula","Manisa","Afyonkarahisar","Ktahya","Uak"],Akdeniz:["Antalya","Adana","Mersin","Hatay","Kahramanmara","Osmaniye","Burdur","Isparta"]," Anadolu":["Ankara","Konya","Kayseri","Eskiehir","Sivas","Yozgat","Krkkale","Aksaray","Nide","Nevehir","Krehir","Karaman","ankr"],Karadeniz:["Samsun","Trabzon","Ordu","Giresun","Rize","Artvin","Gmhane","Bayburt","Tokat","Amasya","orum","Sinop","Kastamonu","Bartn","Karabk","Zonguldak","Bolu","Dzce"],"Dou Anadolu":["Erzurum","Van","Malatya","Elaz","Ar","Kars","Idr","Ardahan","Mu","Bitlis","Bingl","Tunceli","Erzincan"],"Gneydou Anadolu":["Gaziantep","Diyarbakr","anlurfa","Mardin","Batman","Siirt","rnak","Adyaman","Kilis"]};function qr(){var ve,Ne,we,ke,_e,Se;const s=Le(),[t,a]=r.useState("pending"),[l,i]=r.useState(null),[n,c]=r.useState(!1),[d,x]=r.useState(!1),[p,g]=r.useState(null),[f,_]=r.useState("Tm"),[h,j]=r.useState("all"),[b,w]=r.useState([]),{data:o,isLoading:y}=T({queryKey:["pending-questions"],queryFn:()=>H.getPendingApproval(),enabled:t==="pending"}),{data:m}=T({queryKey:["drivers-on-trip"],queryFn:()=>H.getDriversOnTrip(),enabled:t==="drivers"}),{data:E}=T({queryKey:["idle-drivers"],queryFn:()=>H.getIdleDrivers(),enabled:t==="drivers"}),{data:F}=T({queryKey:["all-drivers"],queryFn:()=>Ae.getAll({limit:100}),enabled:t==="bulk"}),{data:N}=T({queryKey:["question-stats"],queryFn:()=>H.getStats()}),C=q({mutationFn:({id:S,approved:P,reason:G})=>H.approve(S,P,G),onSuccess:()=>{s.invalidateQueries({queryKey:["pending-questions"]}),s.invalidateQueries({queryKey:["question-stats"]}),M.success("lem baarl")},onError:()=>M.error("lem baarsz")}),B=q({mutationFn:S=>H.send(S),onSuccess:()=>{s.invalidateQueries({queryKey:["pending-questions"]}),M.success("Soru gnderildi")},onError:()=>M.error("Gnderilemedi")}),u=q({mutationFn:S=>H.delete(S),onSuccess:()=>{s.invalidateQueries({queryKey:["pending-questions"]}),s.invalidateQueries({queryKey:["question-stats"]}),M.success("Soru silindi")},onError:()=>M.error("Silinemedi - Sadece taslak durumundaki sorular silinebilir")}),v=q({mutationFn:({id:S,data:P})=>H.update(S,P),onSuccess:()=>{s.invalidateQueries({queryKey:["pending-questions"]}),M.success("Soru gncellendi"),x(!1),g(null)},onError:()=>M.error("Gncellenemedi")}),L=q({mutationFn:S=>H.createBulk(S),onSuccess:S=>{var G;s.invalidateQueries({queryKey:["pending-questions"]}),s.invalidateQueries({queryKey:["question-stats"]});const P=((G=S==null?void 0:S.data)==null?void 0:G.created_count)||b.length;M.success(`${P} ofre soru gnderildi`),w([])},onError:()=>M.error("Toplu soru gnderilemedi")}),z=((ve=o==null?void 0:o.data)==null?void 0:ve.questions)||[],K=((Ne=m==null?void 0:m.data)==null?void 0:Ne.drivers)||[],J=((we=E==null?void 0:E.data)==null?void 0:we.drivers)||[],Te=((ke=F==null?void 0:F.data)==null?void 0:ke.drivers)||[],je=((_e=N==null?void 0:N.data)==null?void 0:_e.stats)||{};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Akll Soru Sistemi"}),e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-3 py-1.5 sm:px-4 sm:py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 text-xs sm:text-sm self-start sm:self-auto",children:[e.jsx(fe,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Yeni Soru"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-yellow-100 rounded-lg",children:e.jsx(pe,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Onay Bekleyen"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:je.pending_approval||0})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:e.jsx(xs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Cevap Oran"}),e.jsxs("p",{className:"text-lg sm:text-2xl font-bold",children:[((Se=je.answer_rate)==null?void 0:Se.toFixed(1))||0,"%"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-orange-100 rounded-lg",children:e.jsx(O,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Seferde"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:K.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:e.jsx(fr,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Beklemede"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:J.length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsxs("nav",{className:"flex -mb-px min-w-max",children:[e.jsxs("button",{onClick:()=>a("pending"),className:`px-3 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 flex items-center gap-1 sm:gap-2 whitespace-nowrap ${t==="pending"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Onay Bekleyenler"}),e.jsx("span",{className:"sm:hidden",children:"Onay"}),"(",z.length,")"]}),e.jsxs("button",{onClick:()=>a("history"),className:`px-3 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 flex items-center gap-1 sm:gap-2 whitespace-nowrap ${t==="history"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Soru Gemii"}),e.jsx("span",{className:"sm:hidden",children:"Gemi"})]}),e.jsxs("button",{onClick:()=>a("bulk"),className:`px-3 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 flex items-center gap-1 sm:gap-2 whitespace-nowrap ${t==="bulk"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Js,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Toplu Gnder"}),e.jsx("span",{className:"sm:hidden",children:"Toplu"})]}),e.jsxs("button",{onClick:()=>a("drivers"),className:`px-3 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 flex items-center gap-1 sm:gap-2 whitespace-nowrap ${t==="drivers"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"ofr Durumlar"}),e.jsx("span",{className:"sm:hidden",children:"ofrler"})]})]})}),e.jsxs("div",{className:"p-3 sm:p-6",children:[t==="pending"&&e.jsx("div",{className:"space-y-3 sm:space-y-4",children:y?e.jsx("div",{className:"flex justify-center py-6 sm:py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-primary-600"})}):z.length===0?e.jsx("div",{className:"text-center py-6 sm:py-8 text-gray-500 text-sm",children:"Onay bekleyen soru bulunmuyor"}):z.map(S=>{var P,G,k;return e.jsx("div",{className:"border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-2 flex-wrap",children:[e.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-xs ${(P=Ue[S.status])==null?void 0:P.color}`,children:(G=Ue[S.status])==null?void 0:G.label}),e.jsx("span",{className:"text-xs text-gray-500",children:S.source_type==="ai_generated"?" AI":S.source_type==="rule_based"?" Kural":" Manuel"}),e.jsx("span",{className:"text-xs bg-gray-100 px-1.5 sm:px-2 py-0.5 rounded hidden sm:inline",children:((k=Me.find(R=>R.id===S.question_type))==null?void 0:k.name)||S.question_type}),S.ai_confidence&&e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-1.5 sm:px-2 py-0.5 rounded hidden sm:inline",children:["%",(S.ai_confidence*100).toFixed(0)]})]}),e.jsx("p",{className:"font-medium text-gray-900 text-sm sm:text-lg",children:S.question_text}),S.options&&S.options.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:S.options.map((R,I)=>e.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:R},I))}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:[" ",S.driver_name," ",S.driver_surname,S.driver_province&&` |  ${S.driver_province}`]}),S.ai_reasoning&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1 italic bg-gray-50 p-2 rounded hidden sm:block",children:[" ",S.ai_reasoning]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 sm:mt-2",children:new Date(S.created_at).toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"flex sm:flex-col gap-1 sm:ml-4",children:[["draft","pending_approval","approved"].includes(S.status)&&e.jsx("button",{onClick:()=>{g(S),x(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Dzenle",children:e.jsx(ce,{className:"h-5 w-5"})}),S.status==="draft"&&e.jsx("button",{onClick:()=>{confirm("Bu soruyu silmek istediinize emin misiniz?")&&u.mutate(S.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Sil",children:e.jsx(me,{className:"h-5 w-5"})}),S.status==="pending_approval"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C.mutate({id:S.id,approved:!0}),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Onayla",children:e.jsx(xs,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>{const R=prompt("Red sebebi:");R&&C.mutate({id:S.id,approved:!1,reason:R})},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Reddet",children:e.jsx(vr,{className:"h-5 w-5"})})]}),S.status==="approved"&&e.jsx("button",{onClick:()=>B.mutate(S.id),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg",title:"imdi Gnder",children:e.jsx(Xe,{className:"h-5 w-5"})})]})]})},S.id)})}),t==="drivers"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-orange-500"}),"Seferde Olan ofrler"]}),e.jsx("div",{className:"space-y-2",children:K.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"Seferde ofr yok"}):K.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[S.name," ",S.surname]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Sefer sresi: ",Math.round(S.trip_duration_minutes)," dk",S.current_speed&&` | Hz: ${S.current_speed.toFixed(0)} km/s`]})]}),e.jsx("button",{onClick:()=>{i(S),c(!0)},className:"px-3 py-1 bg-orange-500 text-white text-sm rounded hover:bg-orange-600",children:"Soru Sor"})]},S.driver_id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-blue-500"}),"Beklemede Olan ofrler"]}),e.jsx("div",{className:"space-y-2",children:J.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"Beklemede ofr yok"}):J.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[S.name," ",S.surname]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[S.idle_hours?`${S.idle_hours.toFixed(1)} saat beklemede`:"Konum yok",S.home_province&&` | ${S.home_province}`]})]}),e.jsx("button",{onClick:()=>{i(S),c(!0)},className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",children:"Soru Sor"})]},S.driver_id))})]})]}),t==="history"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtrele:"})]}),e.jsxs("select",{value:h,onChange:S=>j(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"Tm Durumlar"}),e.jsx("option",{value:"sent",children:"Gnderildi"}),e.jsx("option",{value:"answered",children:"Cevapland"}),e.jsx("option",{value:"expired",children:"Sresi Doldu"}),e.jsx("option",{value:"rejected",children:"Reddedildi"})]}),e.jsx("select",{value:f,onChange:S=>_(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-1 text-sm",children:Object.keys(Fs).map(S=>e.jsx("option",{value:S,children:S},S))})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ss,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{children:"Soru gemii iin bir ofr sein"}),e.jsx("p",{className:"text-sm mt-2",children:"ofr Durumlar sekmesinden bir ofre tklayarak o ofrn soru gemiini grebilirsiniz."})]})]}),t==="bulk"&&e.jsx(Pr,{allDrivers:Te,selectedDrivers:b,setSelectedDrivers:w,onSend:L.mutate,isLoading:L.isPending,turkeyRegions:Fs})]})]}),n&&e.jsx(Ir,{driver:l,onClose:()=>{c(!1),i(null)},onSuccess:()=>{s.invalidateQueries({queryKey:["pending-questions"]}),c(!1),i(null)}}),d&&p&&e.jsx(Hr,{question:p,onClose:()=>{x(!1),g(null)},onSave:S=>v.mutate({id:p.id,data:S}),isLoading:v.isPending})]})}function Ir({driver:s,onClose:t,onSuccess:a}){const[l,i]=r.useState(""),[n,c]=r.useState("yes_no"),[d,x]=r.useState(["",""]),[p,g]=r.useState([]),[f,_]=r.useState(!0),[h,j]=r.useState(!1),b=[{text:"u an yknz var m?",type:"yes_no",followUps:[{condition:{answer:"yes"},question:"Yknz nereye?",type:"text"},{condition:{answer:"no"},question:"Yk aryor musunuz?",type:"yes_no"}]},{text:"Msait misiniz?",type:"yes_no",followUps:[{condition:{answer:"yes"},question:"Hangi blgeden yk almak istersiniz?",type:"text"}]},{text:"Son seferiniz iin ne kadar cret aldnz?",type:"price",followUps:[]},{text:"Yol durumu nasl?",type:"multiple_choice",options:["Ak","Youn","ok Youn","Kapal"],followUps:[]}],w=()=>s?"id"in s?s.id:"driver_id"in s?s.driver_id:null:null,o=()=>s?`${s.name} ${s.surname}`:"",y=async()=>{const C=w();if(!C||!l){M.error("ofr ve soru metni gerekli");return}j(!0);try{await H.create({driver_id:C,question_text:l,question_type:n,options:n==="multiple_choice"?d.filter(B=>B):void 0,follow_up_questions:p.length>0?p:void 0,send_immediately:f,priority:50}),M.success("Soru oluturuldu"),a()}catch{M.error("Soru oluturulamad")}finally{j(!1)}},m=C=>{i(C.text),c(C.type),C.options&&x(C.options),g(C.followUps)},E=()=>{g([...p,{condition:{answer:"yes"},question:"",type:"text"}])},F=C=>{g(p.filter((B,u)=>u!==C))},N=(C,B,u)=>{const v=[...p];B==="condition"?v[C].condition={answer:u}:B==="question"?v[C].question=u:B==="type"&&(v[C].type=u),g(v)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h2",{className:"text-xl font-semibold",children:["Yeni Soru Olutur",s&&e.jsxs("span",{className:"text-gray-500 text-base ml-2",children:["- ",o()]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hazr Sorular"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((C,B)=>e.jsxs("button",{onClick:()=>m(C),className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full hover:bg-gray-200",children:[C.text.substring(0,30),"..."]},B))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Metni *"}),e.jsx("textarea",{value:l,onChange:C=>i(C.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Sorunuzu yazn..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Tipi"}),e.jsx("select",{value:n,onChange:C=>c(C.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:Me.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))})]}),n==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seenekler"}),e.jsxs("div",{className:"space-y-2",children:[d.map((C,B)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:C,onChange:u=>{const v=[...d];v[B]=u.target.value,x(v)},className:"flex-1 border border-gray-300 rounded-lg px-3 py-2",placeholder:`Seenek ${B+1}`}),d.length>2&&e.jsx("button",{onClick:()=>x(d.filter((u,v)=>v!==B)),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:"Sil"})]},B)),e.jsx("button",{onClick:()=>x([...d,""]),className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Seenek Ekle"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Takip Sorular (Koullu)"}),e.jsx("button",{onClick:E,className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Takip Sorusu Ekle"})]}),p.length>0&&e.jsx("div",{className:"space-y-3 border rounded-lg p-3 bg-gray-50",children:p.map((C,B)=>e.jsxs("div",{className:"flex flex-col gap-2 p-3 bg-white rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Eer cevap"}),e.jsxs("select",{value:C.condition.answer,onChange:u=>N(B,"condition",u.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"yes",children:"Evet"}),e.jsx("option",{value:"no",children:"Hayr"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"ise:"}),e.jsx("button",{onClick:()=>F(B),className:"ml-auto text-red-600 text-sm",children:"Kaldr"})]}),e.jsx("input",{type:"text",value:C.question,onChange:u=>N(B,"question",u.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"Takip sorusu..."}),e.jsx("select",{value:C.type,onChange:u=>N(B,"type",u.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:Me.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))})]},B))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"sendImmediately",checked:f,onChange:C=>_(C.target.checked),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"sendImmediately",className:"text-sm text-gray-700",children:"Hemen gnder (onay bekleme)"})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsxs("button",{onClick:y,disabled:h||!l||!w(),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[h?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Xe,{className:"h-5 w-5"}),f?"Gnder":"Olutur"]})]})]})})}function Hr({question:s,onClose:t,onSave:a,isLoading:l}){var h,j;const[i,n]=r.useState(s.question_text),[c,d]=r.useState(s.question_type),[x,p]=r.useState(s.options||["",""]),[g,f]=r.useState(s.priority),_=()=>{const b={question_text:i,question_type:c,priority:g};c==="multiple_choice"&&(b.options=x.filter(w=>w)),a(b)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full mx-4",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Soru Dzenle"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${(h=Ue[s.status])==null?void 0:h.color}`,children:(j=Ue[s.status])==null?void 0:j.label})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Metni"}),e.jsx("textarea",{value:i,onChange:b=>n(b.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Tipi"}),e.jsx("select",{value:c,onChange:b=>d(b.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:Me.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))})]}),c==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seenekler"}),e.jsxs("div",{className:"space-y-2",children:[x.map((b,w)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:o=>{const y=[...x];y[w]=o.target.value,p(y)},className:"flex-1 border border-gray-300 rounded-lg px-3 py-2",placeholder:`Seenek ${w+1}`}),x.length>2&&e.jsx("button",{onClick:()=>p(x.filter((o,y)=>y!==w)),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:"Sil"})]},w)),e.jsx("button",{onClick:()=>p([...x,""]),className:"text-sm text-primary-600 hover:text-primary-700",children:"+ Seenek Ekle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ncelik (1-100)"}),e.jsx("input",{type:"number",min:"1",max:"100",value:g,onChange:b=>f(parseInt(b.target.value)||50),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ofr:"})," ",s.driver_name," ",s.driver_surname]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Oluturulma:"})," ",new Date(s.created_at).toLocaleString("tr-TR")]})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsxs("button",{onClick:_,disabled:l||!i,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[l?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(xs,{className:"h-5 w-5"}),"Kaydet"]})]})]})})}function Pr({allDrivers:s,selectedDrivers:t,setSelectedDrivers:a,onSend:l,isLoading:i,turkeyRegions:n}){const[c,d]=r.useState(""),[x,p]=r.useState("yes_no"),[g,f]=r.useState(["",""]),[_,h]=r.useState("Tm"),[j,b]=r.useState(!0),w=s.filter(N=>{if(_==="Tm")return!0;const C=n[_]||[];return N.province&&C.includes(N.province)}),o=N=>{t.includes(N)?a(t.filter(C=>C!==N)):a([...t,N])},y=()=>{a(w.map(N=>N.id))},m=()=>{a([])},E=()=>{t.length===0||!c||(l({driver_ids:t,question_text:c,question_type:x,options:x==="multiple_choice"?g.filter(N=>N):void 0,send_immediately:j}),d(""))},F=[{text:"u an msait misiniz?",type:"yes_no"},{text:"Yknz var m?",type:"yes_no"},{text:"Hangi blgeden yk almak istersiniz?",type:"text"},{text:"Yol durumu nasl?",type:"multiple_choice",options:["Ak","Youn","ok Youn","Kapal"]}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Js,{className:"h-5 w-5 text-primary-500"}),"Toplu Soru Gnder"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Birden fazla ofre ayn anda soru gnderin"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm bg-primary-100 text-primary-700 px-3 py-1 rounded-full",children:[t.length," ofr seili"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-medium",children:"ofr Sein"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("select",{value:_,onChange:N=>h(N.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:Object.keys(n).map(N=>e.jsx("option",{value:N,children:N},N))})})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:y,className:"text-xs text-primary-600 hover:text-primary-700",children:["Tmn Se (",w.length,")"]}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{onClick:m,className:"text-xs text-gray-600 hover:text-gray-700",children:"Seimi Temizle"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1",children:w.map(N=>e.jsxs("label",{className:`flex items-center gap-3 p-2 rounded cursor-pointer hover:bg-gray-50 ${t.includes(N.id)?"bg-primary-50":""}`,children:[e.jsx("input",{type:"checkbox",checked:t.includes(N.id),onChange:()=>o(N.id),className:"rounded border-gray-300 text-primary-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:[N.name," ",N.surname]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[N.phone," ",N.province&&`| ${N.province}`]})]})]},N.id))})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Soru"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Hazr Sorular"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:F.map((N,C)=>e.jsxs("button",{onClick:()=>{d(N.text),p(N.type),N.options&&f(N.options)},className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded hover:bg-gray-200",children:[N.text.substring(0,25),"..."]},C))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Metni *"}),e.jsx("textarea",{value:c,onChange:N=>d(N.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Sorunuzu yazn..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soru Tipi"}),e.jsx("select",{value:x,onChange:N=>p(N.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:Me.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))})]}),x==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seenekler"}),e.jsxs("div",{className:"space-y-2",children:[g.map((N,C)=>e.jsx("input",{type:"text",value:N,onChange:B=>{const u=[...g];u[C]=B.target.value,f(u)},className:"w-full border border-gray-300 rounded px-3 py-1 text-sm",placeholder:`Seenek ${C+1}`},C)),e.jsx("button",{onClick:()=>f([...g,""]),className:"text-xs text-primary-600",children:"+ Seenek Ekle"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"bulkSendImmediately",checked:j,onChange:N=>b(N.target.checked),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"bulkSendImmediately",className:"text-sm text-gray-700",children:"Hemen gnder"})]}),e.jsxs("button",{onClick:E,disabled:i||t.length===0||!c,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[i?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Xe,{className:"h-5 w-5"}),t.length," ofre Gnder"]})]})]})]})]})}const hs=[{id:"announcement",name:"Duyuru",color:"bg-blue-100 text-blue-800"},{id:"alert",name:"Uyar",color:"bg-red-100 text-red-800"},{id:"reminder",name:"Hatrlatma",color:"bg-yellow-100 text-yellow-800"},{id:"promotion",name:"Promosyon",color:"bg-green-100 text-green-800"},{id:"system",name:"Sistem",color:"bg-gray-100 text-gray-800"}],Xs=[{id:"all",name:"Tm ofrler"},{id:"active",name:"Aktif ofrler"},{id:"inactive",name:"Pasif ofrler"},{id:"on_trip",name:"Seferde Olanlar"},{id:"at_home",name:"Evde Olanlar"},{id:"new",name:"Yeni Kaytlar"}];function Gr(){var b,w;const s=Le(),[t,a]=r.useState(!1),[l,i]=r.useState(null),{data:n,isLoading:c}=T({queryKey:["notification-templates"],queryFn:()=>We.getAll()}),{data:d}=T({queryKey:["trigger-types"],queryFn:()=>oa.getAll()}),x=q({mutationFn:o=>We.delete(o),onSuccess:()=>{s.invalidateQueries({queryKey:["notification-templates"]}),M.success("ablon silindi")},onError:()=>M.error("Silinemedi")}),p=((b=n==null?void 0:n.data)==null?void 0:b.templates)||[],g=((w=d==null?void 0:d.data)==null?void 0:w.trigger_types)||[],f=o=>hs.find(y=>y.id===o)||hs[0],_=o=>{var y;return((y=Xs.find(m=>m.id===o))==null?void 0:y.name)||o},h=o=>{i(o),a(!0)},j=o=>{confirm("Bu ablonu silmek istediinize emin misiniz?")&&x.mutate(o)};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bildirim ablonlar"}),e.jsxs("button",{onClick:()=>{i(null),a(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[e.jsx(fe,{className:"h-5 w-5"}),"Yeni ablon"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:p.length===0?e.jsx("div",{className:"col-span-2 text-center py-12 text-gray-500",children:"Henz ablon oluturulmam"}):p.map(o=>{const y=f(o.category);return e.jsx("div",{className:`bg-white rounded-lg shadow p-4 border-l-4 ${o.is_active?"border-green-500":"border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(gs,{className:"h-5 w-5 text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:o.name}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${y.color}`,children:y.name})]}),e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:o.title}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:o.body}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-400",children:[e.jsxs("span",{children:["Hedef: ",_(o.target_audience)]}),e.jsx("span",{children:"|"}),e.jsxs("span",{children:["Gnderim: ",o.sent_count]}),e.jsx("span",{children:"|"}),e.jsxs("span",{children:["Okunma: ",o.read_count]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>h(o),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(o.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",children:e.jsx(me,{className:"h-4 w-4"})})]})]})},o.id)})}),t&&e.jsx(Wr,{template:l,triggerTypes:g,onClose:()=>{a(!1),i(null)},onSuccess:()=>{s.invalidateQueries({queryKey:["notification-templates"]}),a(!1),i(null)}})]})}function Wr({template:s,triggerTypes:t,onClose:a,onSuccess:l}){const[i,n]=r.useState({name:(s==null?void 0:s.name)||"",title:(s==null?void 0:s.title)||"",body:(s==null?void 0:s.body)||"",category:(s==null?void 0:s.category)||"announcement",trigger_type:(s==null?void 0:s.trigger_type)||"manual",target_audience:(s==null?void 0:s.target_audience)||"all",is_active:(s==null?void 0:s.is_active)??!0}),[c,d]=r.useState(!1),x=async()=>{if(!i.name||!i.title||!i.body){M.error("Tm alanlar doldurun");return}d(!0);try{s?(await We.update(s.id,i),M.success("ablon gncellendi")):(await We.create(i),M.success("ablon oluturuldu")),l()}catch{M.error("lem baarsz")}finally{d(!1)}},p=["{{driver_name}}","{{trip_count}}","{{total_distance}}","{{province}}","{{diesel_price}}"];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-semibold",children:s?"ablonu Dzenle":"Yeni Bildirim ablonu"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ablon Ad *"}),e.jsx("input",{type:"text",value:i.name,onChange:g=>n({...i,name:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"rn: Haftalk zet"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bildirim Bal *"}),e.jsx("input",{type:"text",value:i.title,onChange:g=>n({...i,title:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Bildirimde grnecek balk"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bildirim erii *"}),e.jsx("textarea",{value:i.body,onChange:g=>n({...i,body:g.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Bildirim ierii..."}),e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Kullanlabilir deikenler:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:p.map(g=>e.jsx("button",{type:"button",onClick:()=>n({...i,body:i.body+g}),className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded hover:bg-gray-200",children:g},g))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),e.jsx("select",{value:i.category,onChange:g=>n({...i,category:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:hs.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tetikleyici"}),e.jsxs("select",{value:i.trigger_type,onChange:g=>n({...i,trigger_type:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"manual",children:"Manuel"}),e.jsx("option",{value:"scheduled",children:"Zamanl"}),e.jsx("option",{value:"event",children:"Olay Bazl"}),t.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hedef Kitle"}),e.jsx("select",{value:i.target_audience,onChange:g=>n({...i,target_audience:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:Xs.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:i.is_active,onChange:g=>n({...i,is_active:g.target.checked}),className:"rounded border-gray-300 text-primary-600"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-gray-700",children:"Aktif"})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsxs("button",{onClick:x,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:[c?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Xe,{className:"h-5 w-5"}),s?"Gncelle":"Olutur"]})]})]})})}function Yr(){var w,o,y,m,E,F,N,C,B,u,v,L,z,K,J,Te,je,ve,Ne,we,ke,_e,Se,S,P,G;const[s,t]=r.useState("routes"),[a,l]=r.useState("30d"),[i,n]=r.useState({start:"",end:""}),c=()=>{const k=new Date;let R,I=k.toISOString().split("T")[0];switch(a){case"7d":R=new Date(k.setDate(k.getDate()-7)).toISOString().split("T")[0];break;case"30d":R=new Date(k.setDate(k.getDate()-30)).toISOString().split("T")[0];break;case"90d":R=new Date(k.setDate(k.getDate()-90)).toISOString().split("T")[0];break;case"custom":R=i.start,I=i.end;break;default:R=new Date(k.setDate(k.getDate()-30)).toISOString().split("T")[0]}return{start_date:R,end_date:I}},{data:d,isLoading:x}=T({queryKey:["reports","routes",a,i],queryFn:()=>ws.getRoutes(c()),enabled:s==="routes"}),{data:p,isLoading:g}=T({queryKey:["reports","stops",a,i],queryFn:()=>ws.getStops(c()),enabled:s==="stops"}),{data:f,isLoading:_}=T({queryKey:["reports","questions"],queryFn:()=>H.getStats(),enabled:s==="questions"}),h=[{id:"routes",label:"Gzergah Analizi",icon:O},{id:"stops",label:"Durak Analizi",icon:he},{id:"questions",label:"Soru statistikleri",icon:ps}],j=s==="routes"&&x||s==="stops"&&g||s==="questions"&&_,b=(k,R)=>{if(!k||k.length===0)return;const I=Object.keys(k[0]),le=[I.join(","),...k.map(et=>I.map(st=>JSON.stringify(et[st]??"")).join(","))].join(`
`),Re=new Blob([le],{type:"text/csv;charset=utf-8;"}),es=document.createElement("a");es.href=URL.createObjectURL(Re),es.download=`${R}_${new Date().toISOString().split("T")[0]}.csv`,es.click()};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Raporlar"})}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsx("nav",{className:"flex -mb-px min-w-max",children:h.map(k=>e.jsxs("button",{onClick:()=>t(k.id),className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm font-medium border-b-2 whitespace-nowrap ${s===k.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(k.icon,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"hidden sm:inline",children:k.label}),e.jsx("span",{className:"sm:hidden",children:k.label.split(" ")[0]})]},k.id))})}),e.jsx("div",{className:"p-3 sm:p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Tarih Aral:"})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:[{value:"7d",label:"7 Gn"},{value:"30d",label:"30 Gn"},{value:"90d",label:"90 Gn"},{value:"custom",label:"zel"}].map(k=>e.jsx("button",{onClick:()=>l(k.value),className:`px-2 py-1 sm:px-3 sm:py-1.5 text-xs sm:text-sm rounded-lg ${a===k.value?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:k.label},k.value))}),a==="custom"&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 sm:mt-0",children:[e.jsx("input",{type:"date",value:i.start,onChange:k=>n(R=>({...R,start:k.target.value})),className:"px-2 py-1 sm:px-3 sm:py-1.5 text-xs sm:text-sm border border-gray-300 rounded-lg"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"date",value:i.end,onChange:k=>n(R=>({...R,end:k.target.value})),className:"px-2 py-1 sm:px-3 sm:py-1.5 text-xs sm:text-sm border border-gray-300 rounded-lg"})]})]})}),e.jsx("div",{className:"p-3 sm:p-6",children:j?e.jsx("div",{className:"flex items-center justify-center h-48 sm:h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 sm:h-12 sm:w-12 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[s==="routes"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Gzergah Analizi"}),e.jsxs("button",{onClick:()=>{var k;return b(((k=d==null?void 0:d.data)==null?void 0:k.routes)||[],"guzergah_raporu")},className:"flex items-center gap-2 px-3 py-1.5 sm:px-4 sm:py-2 text-xs sm:text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 self-start sm:self-auto",children:[e.jsx(Ye,{className:"h-4 w-4"}),"CSV ndir"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:e.jsx(O,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-blue-600",children:"Toplam Sefer"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-900",children:((o=(w=d==null?void 0:d.data)==null?void 0:w.summary)==null?void 0:o.total_trips)||0})]})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:e.jsx(he,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-green-600",children:"Toplam Mesafe"}),e.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-green-900",children:[(((m=(y=d==null?void 0:d.data)==null?void 0:y.summary)==null?void 0:m.total_distance_km)||0).toLocaleString()," km"]})]})]})}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-orange-100 rounded-lg",children:e.jsx(pe,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-orange-600",children:"Ort. Sre"}),e.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-orange-900",children:[(((F=(E=d==null?void 0:d.data)==null?void 0:E.summary)==null?void 0:F.avg_duration_hours)||0).toFixed(1)," sa"]})]})]})}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-purple-100 rounded-lg",children:e.jsx(Q,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-purple-600",children:"Ort. Mesafe"}),e.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-purple-900",children:[(((C=(N=d==null?void 0:d.data)==null?void 0:N.summary)==null?void 0:C.avg_distance_km)||0).toFixed(0)," km"]})]})]})})]}),e.jsxs("div",{className:"overflow-x-auto -mx-3 sm:mx-0",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gzergah"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sefer"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase hidden sm:table-cell",children:"Toplam"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort."}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase hidden sm:table-cell",children:"Sre"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(((B=d==null?void 0:d.data)==null?void 0:B.routes)||[]).map((k,R)=>{var I,le,Re;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900",children:[k.from_province,"  ",k.to_province]}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:k.trip_count}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500 hidden sm:table-cell",children:[(I=k.total_distance_km)==null?void 0:I.toLocaleString()," km"]}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:[(le=k.avg_distance_km)==null?void 0:le.toFixed(0)," km"]}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500 hidden sm:table-cell",children:[(Re=k.avg_duration_hours)==null?void 0:Re.toFixed(1)," sa"]})]},R)})})]}),(((u=d==null?void 0:d.data)==null?void 0:u.routes)||[]).length===0&&e.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 text-sm",children:"Bu tarih aralnda gzergah verisi bulunamad"})]})]}),s==="stops"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Durak Analizi"}),e.jsxs("button",{onClick:()=>{var k;return b(((k=p==null?void 0:p.data)==null?void 0:k.stops)||[],"durak_raporu")},className:"flex items-center gap-2 px-3 py-1.5 sm:px-4 sm:py-2 text-xs sm:text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 self-start sm:self-auto",children:[e.jsx(Ye,{className:"h-4 w-4"}),"CSV ndir"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:e.jsx(he,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-blue-600",children:"Toplam Durak"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-900",children:((L=(v=p==null?void 0:p.data)==null?void 0:v.summary)==null?void 0:L.total_stops)||0})]})]})}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-orange-100 rounded-lg",children:e.jsx(pe,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-orange-600",children:"Ort. Sre"}),e.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-orange-900",children:[(((K=(z=p==null?void 0:p.data)==null?void 0:z.summary)==null?void 0:K.avg_duration_minutes)||0).toFixed(0)," dk"]})]})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-3 sm:p-4 col-span-2 sm:col-span-1",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:e.jsx(Vs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-green-600",children:"Toplam Sre"}),e.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-green-900",children:[(((Te=(J=p==null?void 0:p.data)==null?void 0:J.summary)==null?void 0:Te.total_duration_hours)||0).toFixed(1)," sa"]})]})]})})]}),e.jsxs("div",{className:"overflow-x-auto -mx-3 sm:mx-0",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Konum"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Say"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort."}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase hidden sm:table-cell",children:"Max"}),e.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tip"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(((je=p==null?void 0:p.data)==null?void 0:je.stops)||[]).map((k,R)=>{var I,le;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900",children:k.location_name||`${k.province}`}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:k.stop_count}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:[(I=k.avg_duration_minutes)==null?void 0:I.toFixed(0)," dk"]}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500 hidden sm:table-cell",children:[(le=k.max_duration_minutes)==null?void 0:le.toFixed(0)," dk"]}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-medium rounded-full ${k.stop_type==="rest"?"bg-green-100 text-green-800":k.stop_type==="loading"?"bg-blue-100 text-blue-800":k.stop_type==="unloading"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:k.stop_type==="rest"?"Mola":k.stop_type==="loading"?"Yk":k.stop_type==="unloading"?"Boalt":k.stop_type||"Dier"})})]},R)})})]}),(((ve=p==null?void 0:p.data)==null?void 0:ve.stops)||[]).length===0&&e.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 text-sm",children:"Bu tarih aralnda durak verisi bulunamad"})]})]}),s==="questions"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Soru statistikleri"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:e.jsx(ps,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-blue-600",children:"Onay Bekleyen"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-900",children:((we=(Ne=f==null?void 0:f.data)==null?void 0:Ne.stats)==null?void 0:we.pending_approval)||0})]})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:e.jsx(Q,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-green-600",children:"Yant Oran"}),e.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-green-900",children:["%",(((_e=(ke=f==null?void 0:f.data)==null?void 0:ke.stats)==null?void 0:_e.answer_rate)||0).toFixed(1)]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm sm:text-base mb-3 sm:mb-4",children:"Duruma Gre Dalm"}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:Object.entries(((S=(Se=f==null?void 0:f.data)==null?void 0:Se.stats)==null?void 0:S.by_status)||{}).map(([k,R])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:k==="draft"?"Taslak":k==="pending_approval"?"Onay Bekliyor":k==="approved"?"Onayl":k==="rejected"?"Reddedildi":k==="sent"?"Gnderildi":k==="answered"?"Cevapland":k==="expired"?"Sresi Doldu":k}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:R})]},k))})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm sm:text-base mb-3 sm:mb-4",children:"Kaynaa Gre Dalm"}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:Object.entries(((G=(P=f==null?void 0:f.data)==null?void 0:P.stats)==null?void 0:G.by_source)||{}).map(([k,R])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:k==="manual"?"Manuel":k==="manual_bulk"?"Toplu Manuel":k==="auto_rule"?"Otomatik Kural":k==="ai_generated"?"AI retimi":k}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:R})]},k))})]})]})]})]})})]})]})}function Ur(){const[s,t]=r.useState(null),[a,l]=r.useState(!0),[i,n]=r.useState("overview"),c="https://sentry.io",d="https://console.firebase.google.com";r.useEffect(()=>{x()},[]);const x=async()=>{l(!0),setTimeout(()=>{t({total_errors:0,errors_today:0,errors_this_week:0,top_errors:[],error_trend:[]}),l(!1)},500)},p=({title:g,value:f,icon:_,color:h,subtitle:j})=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:g}),e.jsx("p",{className:`text-3xl font-bold mt-1 ${h}`,children:f}),j&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:j})]}),e.jsx("div",{className:`p-3 rounded-xl ${h.replace("text-","bg-").replace("600","100")}`,children:e.jsx(_,{className:`h-6 w-6 ${h}`})})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hata Takip"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Uygulama hatalarn ve crash raporlarn izleyin"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx(ua,{className:"h-5 w-5"}),"Yenile"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-6 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl text-white hover:from-purple-600 hover:to-purple-700 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(ge,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sentry Dashboard"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Detayl hata analizi ve performans izleme"})]})]}),e.jsx(_s,{className:"h-6 w-6"})]}),e.jsxs("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-6 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl text-white hover:from-orange-600 hover:to-red-600 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:e.jsx(As,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Firebase Crashlytics"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Mobil uygulama crash raporlar"})]})]}),e.jsx(_s,{className:"h-6 w-6"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{title:"Toplam Hata",value:(s==null?void 0:s.total_errors)??0,icon:ge,color:"text-red-600",subtitle:"Tm zamanlar"}),e.jsx(p,{title:"Bugnk Hatalar",value:(s==null?void 0:s.errors_today)??0,icon:pe,color:"text-orange-600",subtitle:"Son 24 saat"}),e.jsx(p,{title:"Bu Haftaki Hatalar",value:(s==null?void 0:s.errors_this_week)??0,icon:Q,color:"text-yellow-600",subtitle:"Son 7 gn"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"border-b",children:e.jsxs("nav",{className:"flex gap-4 px-6",children:[e.jsx("button",{onClick:()=>n("overview"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${i==="overview"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Genel Bak"]})}),e.jsx("button",{onClick:()=>n("mobile"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${i==="mobile"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Mobil Hatalar"]})}),e.jsx("button",{onClick:()=>n("backend"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${i==="backend"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-5 w-5"}),"Backend Hatalar"]})})]})}),e.jsx("div",{className:"p-6",children:a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):i==="overview"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ge,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Hata Takip Sistemi Aktif"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Mobil uygulama ve backend hatalar otomatik olarak Sentry ve Firebase Crashlytics'e raporlanmaktadr. Detayl hata analizi iin yukardaki dashboard linklerini kullanabilirsiniz."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-primary-600"}),"Mobil Uygulama"]}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Flutter crash raporlar"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Ekran gei takibi"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Kullanc oturum bilgileri"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Network hata izleme"]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(ts,{className:"h-5 w-5 text-primary-600"}),"Backend Server"]}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Go panic recovery"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"HTTP request tracking"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Database error logging"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"User context capture"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Kurulum Bilgileri"}),e.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-100 text-primary-700 rounded-full text-xs font-medium flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Sentry DSN"}),e.jsxs("p",{className:"text-gray-500",children:[e.jsx("code",{className:"bg-gray-200 px-1 py-0.5 rounded",children:"SENTRY_DSN"})," environment variable'n ayarlayn"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-100 text-primary-700 rounded-full text-xs font-medium flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Firebase Crashlytics"}),e.jsx("p",{className:"text-gray-500",children:"Firebase Console'dan Crashlytics'i etkinletirin"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-100 text-primary-700 rounded-full text-xs font-medium flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Mobil Uygulama"}),e.jsxs("p",{className:"text-gray-500",children:[e.jsx("code",{className:"bg-gray-200 px-1 py-0.5 rounded",children:"lib/config/constants.dart"})," dosyasnda Sentry DSN'i gncelleyin"]})]})]})]})]})]}):i==="mobile"?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(te,{className:"h-16 w-16 text-gray-300 mx-auto"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Mobil Hata Listesi"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Mobil uygulama hatalarn grmek iin Sentry veya Firebase Crashlytics dashboard'unu kullann."}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsx(ge,{className:"h-5 w-5"}),"Sentry'ye Git"]}),e.jsxs("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:[e.jsx(As,{className:"h-5 w-5"}),"Crashlytics'e Git"]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ts,{className:"h-16 w-16 text-gray-300 mx-auto"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Backend Hata Listesi"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Backend hatalarn grmek iin Sentry dashboard'unu kullann."}),e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsx(ge,{className:"h-5 w-5"}),"Sentry'ye Git"]})})]})})]})]})}function Zr({children:s}){return Be(a=>a.isAuthenticated)?e.jsx(e.Fragment,{children:s}):e.jsx(Rs,{to:"/login"})}function Qr(){return e.jsxs(ot,{children:[e.jsx(D,{path:"/login",element:e.jsx(_r,{})}),e.jsxs(D,{path:"/",element:e.jsx(Zr,{children:e.jsx(kr,{})}),children:[e.jsx(D,{index:!0,element:e.jsx(Rs,{to:"/dashboard",replace:!0})}),e.jsx(D,{path:"dashboard",element:e.jsx(Sr,{})}),e.jsx(D,{path:"drivers",element:e.jsx(Cr,{})}),e.jsx(D,{path:"drivers/:id",element:e.jsx(Ar,{})}),e.jsx(D,{path:"drivers/:id/routes",element:e.jsx(Er,{})}),e.jsx(D,{path:"live-map",element:e.jsx(Lr,{})}),e.jsx(D,{path:"analytics",element:e.jsx($r,{})}),e.jsx(D,{path:"reports",element:e.jsx(Yr,{})}),e.jsx(D,{path:"error-monitoring",element:e.jsx(Ur,{})}),e.jsx(D,{path:"surveys",element:e.jsx(Tr,{})}),e.jsx(D,{path:"questions",element:e.jsx(qr,{})}),e.jsx(D,{path:"notification-templates",element:e.jsx(Gr,{})}),e.jsx(D,{path:"app-config",element:e.jsx(zr,{})}),e.jsx(D,{path:"settings",element:e.jsx(Rr,{})})]})]})}const Vr=new rt({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});os.createRoot(document.getElementById("root")).render(e.jsx(ct.StrictMode,{children:e.jsx(lt,{client:Vr,children:e.jsxs(mt,{children:[e.jsx(Qr,{}),e.jsx(ea,{position:"top-right"})]})})}));
